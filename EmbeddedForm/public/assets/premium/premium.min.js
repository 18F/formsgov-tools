!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("Formio")):"function"==typeof define&&define.amd?define(["Formio"],e):"object"==typeof exports?exports.premium=e(require("Formio")):t.premium=e(t.Formio)}(self,(function(t){return function(){var e={131:function(t,e){e.Z=function(t){return'<div class="row">\n  <div class="col-sm-2">\n    Users\n  </div>\n</div>'}},213:function(t,e){e.Z=function(t){var e,i="";return Array.prototype.join,i+='<div class="list-group-item">\n  <div class="list-group-subheader">\n    <div class="row">\n      <div class="col-sm-2">\n        User '+(null==(e=rowIndex+1)?"":e)+"\n      </div>\n      ",t.self.options.readOnly||(i+='\n      <div class="col-sm-2">\n        <div class="btn-group pull-right">\n          <button class="btn btn-default btn-light btn-sm editCard"><i class="'+(null==(e=t.iconClass("edit"))?"":e)+'"></i></button>\n          <button class="btn btn-danger btn-sm removeCard"><i class="'+(null==(e=t.iconClass("trash"))?"":e)+'"></i></button>\n        </div>\n      </div>\n      '),i+="\n    </div>\n  </div>\n  ",t.util.eachComponent(t.components,(function(n){i+="\n  ",n.hasOwnProperty("tableView")&&!n.tableView||!t.isVisibleInRow(n)||(i+='\n  <div class="row">\n    <div class="col-sm-2">\n      '+(null==(e=n.key)?"":e)+'\n    </div>\n  </div>\n  <div class="row">\n    <div class="col-sm-2">\n      '+(null==(e=t.getView(n,t.row[n.key]))?"":e)+"\n    </div>\n  </div>\n  "),i+="\n  "})),i+="\n</div>"}},353:function(t,e){e.Z=function(t){var e;return""+'<div class="d-flex">\n  <button class="btn btn-secondary" ref="'+(null==(e=t.ref)?"":e)+'">\n    <i class="fa fa-barcode component-icon"></i> '+(null==(e=t.label)?"":e)+'\n  </button>\n  <div class="info-text">\n    '+(null==(e=t.dataValue?t.dataValue:"No code")?"":e)+"\n  </div>\n</div>\n"}},752:function(t,e){e.Z=function(t){var e,i="";return Array.prototype.join,i+='<div ref="tableContainer"></div>\n\n<div class="formio-component-modal-wrapper formio-component-modal-wrapper-'+(null==(e=t.component.type)?"":e)+'" ref="componentModalWrapper">\n  <div class="formio-dialog formio-dialog-theme-default component-rendering-hidden" ref="modalWrapper">\n    <div class="formio-dialog-overlay" ref="modalOverlay"></div>\n    <div class="formio-dialog-content" ref="modalContents">\n      <div ref="modalContents">\n        <ul class="editgrid-listgroup list-group\n            '+(null==(e=t.component.striped?"table-striped":"")?"":e)+"\n            "+(null==(e=t.component.bordered?"table-bordered":"")?"":e)+"\n            "+(null==(e=t.component.hover?"table-hover":"")?"":e)+"\n            "+(null==(e=t.component.condensed?"table-sm":"")?"":e)+'\n            ">\n          ',t.header&&(i+='\n          <li class="list-group-item list-group-header">\n            '+(null==(e=t.header)?"":e)+"\n          </li>\n          "),i+="\n          ",t.rows.forEach((function(n,r){i+='\n          <li class="list-group-item" ref="'+(null==(e=t.ref.row)?"":e)+'">\n            '+(null==(e=n)?"":e)+"\n            ",t.openRows[r]&&!t.readOnly&&(i+='\n            <div class="editgrid-actions">\n              <button class="btn btn-primary" ref="'+(null==(e=t.ref.saveRow)?"":e)+'">'+(null==(e=t.t(t.component.saveRow||"Save",{_userInput:!0}))?"":e)+"</button>\n              ",t.component.removeRow&&(i+='\n              <button class="btn btn-danger" ref="'+(null==(e=t.ref.cancelRow)?"":e)+'">'+(null==(e=t.t(t.component.removeRow||"Cancel",{_userInput:!0}))?"":e)+"</button>\n              "),i+="\n            </div>\n            "),i+='\n            <div class="has-error">\n              <div class="editgrid-row-error help-block">\n                '+(null==(e=t.errors[r])?"":e)+"\n              </div>\n            </div>\n          </li>\n          "})),i+="\n          ",t.footer&&(i+='\n          <li class="list-group-item list-group-footer">\n            '+(null==(e=t.footer)?"":e)+"\n          </li>\n          "),i+='\n        </ul>\n      </div>\n      <button class="formio-dialog-close float-right btn btn-secondary btn-sm" aria-label="close" ref="modalClose"></button>\n    </div>\n  </div>\n</div>\n'}},66:function(t,e){e.Z=function(t){var e,i="";return Array.prototype.join,i+='<ul class="editgrid-listgroup list-group\n    '+(null==(e=t.component.striped?"table-striped":"")?"":e)+"\n    "+(null==(e=t.component.bordered?"table-bordered":"")?"":e)+"\n    "+(null==(e=t.component.hover?"table-hover":"")?"":e)+"\n    "+(null==(e=t.component.condensed?"table-sm":"")?"":e)+'\n    ">\n  ',t.header&&(i+='\n  <li class="list-group-item list-group-header">\n    '+(null==(e=t.header)?"":e)+"\n  </li>\n  "),i+="\n  ",t.rows.forEach((function(n,r){i+='\n  <li class="list-group-item" ref="'+(null==(e=t.ref.row)?"":e)+'">\n    '+(null==(e=n)?"":e)+"\n    ",t.openRows[r]&&!t.readOnly&&(i+='\n    <div class="editgrid-actions">\n      <button class="btn btn-primary" ref="'+(null==(e=t.ref.saveRow)?"":e)+'">'+(null==(e=t.t(t.component.saveRow||"Save",{_userInput:!0}))?"":e)+"</button>\n      ",t.component.removeRow&&(i+='\n      <button class="btn btn-danger" ref="'+(null==(e=t.ref.cancelRow)?"":e)+'">'+(null==(e=t.t(t.component.removeRow||"Cancel",{_userInput:!0}))?"":e)+"</button>\n      "),i+="\n    </div>\n    "),i+='\n    <div class="has-error">\n      <div class="editgrid-row-error help-block">\n        '+(null==(e=t.errors[r])?"":e)+"\n      </div>\n    </div>\n  </li>\n  "})),i+="\n  ",t.footer&&(i+='\n  <li class="list-group-item list-group-footer">\n    '+(null==(e=t.footer)?"":e)+"\n  </li>\n  "),i+="\n</ul>\n"}},656:function(t,e){e.Z=function(t){var e,i="";return Array.prototype.join,i+='<ul class="dynamicWizard-listgroup list-group\n    '+(null==(e=t.component.striped?"table-striped":"")?"":e)+"\n    "+(null==(e=t.component.bordered?"table-bordered":"")?"":e)+"\n    "+(null==(e=t.component.hover?"table-hover":"")?"":e)+"\n    "+(null==(e=t.component.condensed?"table-sm":"")?"":e)+'\n    ">\n  ',t.readOnly||!t.isChangingMode||t.isDisabled?(i+="\n  ",t.header&&(i+='\n  <li class="list-group-item list-group-header">\n    '+(null==(e=t.header)?"":e)+"\n  </li>\n  "),i+="\n  ",t.rows.forEach((function(n,r){i+='\n  <li class="list-group-card" ref="'+(null==(e=t.ref.row)?"":e)+'">\n    '+(null==(e=n)?"":e)+'\n    <div class="has-error">\n      <div class="dynamicWizard-row-error help-block">\n        '+(null==(e=t.errors[r])?"":e)+"\n      </div>\n    </div>\n  </li>\n  "})),i+="\n  ",t.footer&&(i+='\n  <li class="list-group-item list-group-footer">\n    '+(null==(e=t.footer)?"":e)+"\n  </li>\n  "),i+="\n  "):i+='\n  <li class="list-group-field" ref="'+(null==(e=t.ref.row)?"":e)+'">\n    '+(null==(e=t.currentComponent)?"":e)+"\n  </li>\n  ",i+="\n</ul>\n",t.readOnly||t.isBlocking||(i+="\n",t.isChangingMode?(i+='\n<ul class="list-inline" id="'+(null==(e=t.dynamicWizardKey)?"":e)+'-nav">\n  ',t.buttons.cancel&&(i+='\n  <li class="list-inline-item">\n    <button class="btn btn-secondary btn-wizard-nav-cancel"\n      ref="'+(null==(e=t.dynamicWizardKey)?"":e)+'-cancel">'+(null==(e=t.t("cancel"))?"":e)+"</button>\n  </li>\n  "),i+="\n  ",t.buttons.previous&&(i+='\n  <li class="list-inline-item">\n    <button class="btn btn-primary btn-wizard-nav-previous"\n      ref="'+(null==(e=t.dynamicWizardKey)?"":e)+'-previous">'+(null==(e=t.t("previous"))?"":e)+"</button>\n  </li>\n  "),i+="\n  ",t.buttons.next&&(i+='\n  <li class="list-inline-item">\n    <button class="btn btn-primary btn-wizard-nav-next" ref="'+(null==(e=t.dynamicWizardKey)?"":e)+'-next">'+(null==(e=t.t("next"))?"":e)+"</button>\n  </li>\n  "),i+="\n</ul>\n"):i+='\n<p>Would you like to add another?</p>\n<button class="btn btn-primary" ref="'+(null==(e=t.ref.agreeButton)?"":e)+'">\n  '+(null==(e=t.t("Yes"))?"":e)+"\n</button>\n",i+="\n"),i}},970:function(t,e){e.Z=function(t){var e,i="";return Array.prototype.join,i+='<ul class="dynamicWizard-listgroup list-group\n    '+(null==(e=t.component.striped?"table-striped":"")?"":e)+"\n    "+(null==(e=t.component.bordered?"table-bordered":"")?"":e)+"\n    "+(null==(e=t.component.hover?"table-hover":"")?"":e)+"\n    "+(null==(e=t.component.condensed?"table-sm":"")?"":e)+'\n    ">\n  ',t.readOnly||!t.isChangingMode||t.isDisabled?(i+="\n  ",t.header&&(i+='\n  <li class="list-group-item list-group-header">\n    '+(null==(e=t.header)?"":e)+"\n  </li>\n  "),i+="\n  ",t.rows.forEach((function(n,r){i+='\n  <li class="list-group-card" ref="'+(null==(e=t.ref.row)?"":e)+'">\n    '+(null==(e=n)?"":e)+'\n    <div class="has-error">\n      <div class="dynamicWizard-row-error help-block">\n        '+(null==(e=t.errors[r])?"":e)+"\n      </div>\n    </div>\n  </li>\n  "})),i+="\n  ",t.footer&&(i+='\n  <li class="list-group-item list-group-footer">\n    '+(null==(e=t.footer)?"":e)+"\n  </li>\n  "),i+="\n  "):i+='\n  <li class="list-group-field" ref="'+(null==(e=t.ref.row)?"":e)+'">\n    '+(null==(e=t.currentComponent)?"":e)+"\n  </li>\n  ",i+="\n</ul>\n",t.readOnly||t.isBlocking||(i+="\n",t.isChangingMode?(i+='\n<ul class="list-inline" id="'+(null==(e=t.dynamicWizardKey)?"":e)+'-nav">\n  ',t.buttons.cancel&&(i+='\n  <li class="list-inline-item">\n    <button class="btn btn-secondary btn-wizard-nav-cancel"\n      ref="'+(null==(e=t.dynamicWizardKey)?"":e)+'-cancel">'+(null==(e=t.t("cancel"))?"":e)+"</button>\n  </li>\n  "),i+="\n  ",t.buttons.previous&&(i+='\n  <li class="list-inline-item">\n    <button class="btn btn-primary btn-wizard-nav-previous"\n      ref="'+(null==(e=t.dynamicWizardKey)?"":e)+'-previous">'+(null==(e=t.t("previous"))?"":e)+"</button>\n  </li>\n  "),i+="\n  ",t.buttons.next&&(i+='\n  <li class="list-inline-item">\n    <button class="btn btn-primary btn-wizard-nav-next" ref="'+(null==(e=t.dynamicWizardKey)?"":e)+'-next">'+(null==(e=t.t("next"))?"":e)+"</button>\n  </li>\n  "),i+="\n</ul>\n"):i+='\n<p>Would you like to add another?</p>\n<button class="btn btn-primary" ref="'+(null==(e=t.ref.agreeButton)?"":e)+'">\n  '+(null==(e=t.t("Yes"))?"":e)+"\n</button>\n",i+="\n"),i}},175:function(t,e){e.Z=function(t){var e,i="";return Array.prototype.join,i+='<div class="formio-sketchpad-body">\n  <div class="formio-sketchpad-header" ref="header">\n    <div class="btn-toolbar formio-sketchpad-toolbar" role="toolbar">\n      ',!t.disabled&&t.buttonGroups.forEach((function(n){i+='\n        <div class="btn-group formio-sketchpad-toolbar-group" role="group">\n          ',n.forEach((function(n){i+='\n            <div class="btn formio-sketchpad-toolbar-button formio-sketchpad-toolbar-button-'+(null==(e=n.key)?"":e)+'" ref="'+(null==(e=n.key)?"":e)+'" title="'+(null==(e=n.title)?"":e)+'">\n              <i class="'+(null==(e=n.icon)?"":e)+'"></i>\n              ',n.input&&(i+='\n                <input type="'+(null==(e=n.input.type)?"":e)+'" class="formio-sketchpad-toolbar-input '+(null==(e=n.input.class)?"":e)+'" ref="'+(null==(e=n.key)?"":e)+'-input"\n                '+(null==(e=t.self.buttonAttributes(n))?"":e)+"/>\n              "),i+="\n            </div>\n          "})),i+="\n        </div>\n      "})),i+='\n    </div>\n  </div>\n  <div class="formio-sketchpad-container" ref="drawingContainer">\n    <div class="formio-sketchpad-background" ref="background">\n      ',t.component.image||t.component.imageUrl||(i+="\n          Background image is not specified. Sketchpad doesn\\'t work without background image\n      "),i+="\n      ",t.component.imageUrl&&"svg"!==t.component.imageType&&(i+='\n        <img ref="backgroundImage" alt="'+(null==(e=t.t("sketchpad background"))?"":e)+'"/>\n      '),i+='\n    </div>\n    <div class="formio-sketchpad-canvas" ref="canvas"></div>\n  </div>\n  <div class="formio-sketchpad-footer" ref="footer">\n    <div class="formio-sketchpad-meta-info"><div><span ref="totalMultiplier">'+(null==(e=t.zoomInfo.totalMultiplier)?"":e)+"</span>x</div>\n  </div>\n</div></div>\n"}},352:function(t,e){e.Z=function(t){var e,i="";return Array.prototype.join,i+='<div class="formio-tagpad-container clearfix">\n  <div ref="canvasContainer" class="formio-tagpad-image-container" style="max-width: '+(null==(e=t.canvasMaxWidth)?"":e)+"; max-height: "+(null==(e=t.canvasMaxHeight)?"":e)+';">\n      <div ref="background" class="formio-tagpad-background">\n        ',t.component.image||t.component.imageUrl||(i+="\n            Background image is not specified. Tagpad doesn\\'t work without background image\n        "),i+="\n        ",t.component.imageUrl&&(i+="\n            <img src="+(null==(e=t.component.imageUrl)?"":e)+' ref="image" alt="" width="100%"/>\n        '),i+='\n      </div>\n      <div ref="canvas" class="formio-tagpad-canvas"></div>\n  </div>\n  <div ref="formContainer" class="formio-tagpad-form-container">\n      <div class="formio-tagpad-form">\n        ',t.selectedDot?(i+='\n          <p class="formio-tagpad-form-title">Dot: '+(null==(e=t.selectedDot.index+1)?"":e)+'</p>\n          <div  ref="form">'+(null==(e=t.components)?"":e)+"</div>\n          ",t.buttons.removeDot&&(i+='\n            <button class="btn btn-sm btn-danger formio-tagpad-remove-button" ref="removeDot">\n              <i class="fa fa-trash"></i>\n            </button>\n          '),i+="\n        "):!t.hasDots||t.disabled||t.component.disabled||t.self.shouldDisabled?(t.component.disabled||t.disabled||t.self.shouldDisabled)&&(i+='\n          <div class="formio-tagpad-all-data">'+(null==(e=t.self.getDataAsString())?"":e)+"</div>\n        "):i+='\n          <p class="formio-tagpad-form-title">No dot selected</p>\n        ',i+"\n      </div>\n  </div>\n</div>\n"}},333:function(t,e){e.Z=function(t){var e;return""+'<div class="d-flex">\n  <button class="btn btn-secondary" ref="'+(null==(e=t.ref)?"":e)+'">\n    <i class="fa fa-barcode component-icon"></i> '+(null==(e=t.label)?"":e)+'\n  </button>\n  <div class="info-text">\n    '+(null==(e=t.dataValue?t.dataValue:"No code")?"":e)+"\n  </div>\n</div>\n"}},209:function(t,e){e.Z=function(t){var e,i="";return Array.prototype.join,i+='<div ref="tableContainer"></div>\n<div class="formio-component-modal-wrapper formio-component-modal-wrapper-'+(null==(e=t.component.type)?"":e)+'" ref="componentModalWrapper">\n  <div class="formio-dialog formio-dialog-theme-default component-rendering-hidden" ref="modalWrapper">\n    <div class="formio-dialog-overlay" ref="modalOverlay"></div>\n    <div class="formio-dialog-content" ref="modalContents">\n      <div ref="modalContents">\n        <ul class="editgrid-listgroup list-group\n            '+(null==(e=t.component.striped?"table-striped":"")?"":e)+"\n            "+(null==(e=t.component.bordered?"table-bordered":"")?"":e)+"\n            "+(null==(e=t.component.hover?"table-hover":"")?"":e)+"\n            "+(null==(e=t.component.condensed?"table-sm":"")?"":e)+'\n            ">\n          ',t.header&&(i+='\n          <li class="list-group-item list-group-header">\n            '+(null==(e=t.header)?"":e)+"\n          </li>\n          "),i+="\n          ",t.rows.forEach((function(n,r){i+='\n          <li class="list-group-item" ref="'+(null==(e=t.ref.row)?"":e)+'">\n            '+(null==(e=n)?"":e)+"\n            ",t.openRows[r]&&!t.readOnly&&(i+='\n            <div class="editgrid-actions">\n              <button class="btn btn-primary" ref="'+(null==(e=t.ref.saveRow)?"":e)+'">'+(null==(e=t.t(t.component.saveRow||"Save",{_userInput:!0}))?"":e)+"</button>\n              ",t.component.removeRow&&(i+='\n              <button class="btn btn-danger" ref="'+(null==(e=t.ref.cancelRow)?"":e)+'">'+(null==(e=t.t(t.component.removeRow||"Cancel",{_userInput:!0}))?"":e)+"</button>\n              "),i+="\n            </div>\n            "),i+='\n            <div class="has-error">\n              <div class="editgrid-row-error help-block">\n                '+(null==(e=t.errors[r])?"":e)+"\n              </div>\n            </div>\n          </li>\n          "})),i+="\n          ",t.footer&&(i+='\n          <li class="list-group-item list-group-footer">\n            '+(null==(e=t.footer)?"":e)+"\n          </li>\n          "),i+='\n        </ul>\n      </div>\n      <button class="formio-dialog-close float-right btn btn-secondary btn-sm" aria-label="close" ref="modalClose"></button>\n    </div>\n  </div>\n</div>\n\n'}},339:function(t,e){e.Z=function(t){var e,i="";return Array.prototype.join,i+='<ul class="editgrid-listgroup list-group\n    '+(null==(e=t.component.striped?"table-striped":"")?"":e)+"\n    "+(null==(e=t.component.bordered?"table-bordered":"")?"":e)+"\n    "+(null==(e=t.component.hover?"table-hover":"")?"":e)+"\n    "+(null==(e=t.component.condensed?"table-sm":"")?"":e)+'\n    ">\n  ',t.header&&(i+='\n  <li class="list-group-item list-group-header">\n    '+(null==(e=t.header)?"":e)+"\n  </li>\n  "),i+="\n  ",t.rows.forEach((function(n,r){i+='\n  <li class="list-group-item" ref="'+(null==(e=t.ref.row)?"":e)+'">\n    '+(null==(e=n)?"":e)+"\n    ",t.openRows[r]&&!t.readOnly&&(i+='\n    <div class="editgrid-actions">\n      <button class="btn btn-primary" ref="'+(null==(e=t.ref.saveRow)?"":e)+'">'+(null==(e=t.t(t.component.saveRow||"Save",{_userInput:!0}))?"":e)+"</button>\n      ",t.component.removeRow&&(i+='\n      <button class="btn btn-danger" ref="'+(null==(e=t.ref.cancelRow)?"":e)+'">'+(null==(e=t.t(t.component.removeRow||"Cancel",{_userInput:!0}))?"":e)+"</button>\n      "),i+="\n    </div>\n    "),i+='\n    <div class="has-error">\n      <div class="editgrid-row-error help-block">\n        '+(null==(e=t.errors[r])?"":e)+"\n      </div>\n    </div>\n  </li>\n  "})),i+="\n  ",t.footer&&(i+='\n  <li class="list-group-item list-group-footer">\n    '+(null==(e=t.footer)?"":e)+"\n  </li>\n  "),i+="\n</ul>\n"}},290:function(t,e){e.Z=function(t){var e,i="";return Array.prototype.join,i+='<ul class="dynamicWizard-listgroup list-group\n    '+(null==(e=t.component.striped?"table-striped":"")?"":e)+"\n    "+(null==(e=t.component.bordered?"table-bordered":"")?"":e)+"\n    "+(null==(e=t.component.hover?"table-hover":"")?"":e)+"\n    "+(null==(e=t.component.condensed?"table-sm":"")?"":e)+'\n    ">\n  ',t.readOnly||!t.isChangingMode||t.isDisabled?(i+="\n  ",t.header&&(i+='\n  <li class="list-group-item list-group-header">\n    '+(null==(e=t.header)?"":e)+"\n  </li>\n  "),i+="\n  ",t.rows.forEach((function(n,r){i+='\n  <li class="list-group-card" ref="'+(null==(e=t.ref.row)?"":e)+'">\n    '+(null==(e=n)?"":e)+'\n    <div class="has-error">\n      <div class="dynamicWizard-row-error help-block">\n        '+(null==(e=t.errors[r])?"":e)+"\n      </div>\n    </div>\n  </li>\n  "})),i+="\n  ",t.footer&&(i+='\n  <li class="list-group-item list-group-footer">\n    '+(null==(e=t.footer)?"":e)+"\n  </li>\n  "),i+="\n  "):i+='\n  <li class="list-group-field" ref="'+(null==(e=t.ref.row)?"":e)+'">\n    '+(null==(e=t.currentComponent)?"":e)+"\n  </li>\n  ",i+="\n</ul>\n",t.readOnly||t.isBlocking||(i+="\n",t.isChangingMode?(i+='\n<ul class="list-inline" id="'+(null==(e=t.dynamicWizardKey)?"":e)+'-nav">\n  ',t.buttons.cancel&&(i+='\n  <li class="list-inline-item">\n    <button class="btn btn-secondary btn-wizard-nav-cancel"\n      ref="'+(null==(e=t.dynamicWizardKey)?"":e)+'-cancel">'+(null==(e=t.t("cancel"))?"":e)+"</button>\n  </li>\n  "),i+="\n  ",t.buttons.previous&&(i+='\n  <li class="list-inline-item">\n    <button class="btn btn-primary btn-wizard-nav-previous"\n      ref="'+(null==(e=t.dynamicWizardKey)?"":e)+'-previous">'+(null==(e=t.t("previous"))?"":e)+"</button>\n  </li>\n  "),i+="\n  ",t.buttons.next&&(i+='\n  <li class="list-inline-item">\n    <button class="btn btn-primary btn-wizard-nav-next" ref="'+(null==(e=t.dynamicWizardKey)?"":e)+'-next">'+(null==(e=t.t("next"))?"":e)+"</button>\n  </li>\n  "),i+="\n</ul>\n"):i+='\n<p>Would you like to add another?</p>\n<button class="btn btn-primary" ref="'+(null==(e=t.ref.agreeButton)?"":e)+'">\n  '+(null==(e=t.t("Yes"))?"":e)+"\n</button>\n",i+="\n"),i}},469:function(t,e){e.Z=function(t){var e,i="";return Array.prototype.join,i+='<ul class="dynamicWizard-listgroup list-group\n    '+(null==(e=t.component.striped?"table-striped":"")?"":e)+"\n    "+(null==(e=t.component.bordered?"table-bordered":"")?"":e)+"\n    "+(null==(e=t.component.hover?"table-hover":"")?"":e)+"\n    "+(null==(e=t.component.condensed?"table-sm":"")?"":e)+'\n    ">\n  ',t.readOnly||!t.isChangingMode||t.isDisabled?(i+="\n  ",t.header&&(i+='\n  <li class="list-group-item list-group-header">\n    '+(null==(e=t.header)?"":e)+"\n  </li>\n  "),i+="\n  ",t.rows.forEach((function(n,r){i+='\n  <li class="list-group-card" ref="'+(null==(e=t.ref.row)?"":e)+'">\n    '+(null==(e=n)?"":e)+'\n    <div class="has-error">\n      <div class="dynamicWizard-row-error help-block">\n        '+(null==(e=t.errors[r])?"":e)+"\n      </div>\n    </div>\n  </li>\n  "})),i+="\n  ",t.footer&&(i+='\n  <li class="list-group-item list-group-footer">\n    '+(null==(e=t.footer)?"":e)+"\n  </li>\n  "),i+="\n  "):i+='\n  <li class="list-group-field" ref="'+(null==(e=t.ref.row)?"":e)+'">\n    '+(null==(e=t.currentComponent)?"":e)+"\n  </li>\n  ",i+="\n</ul>\n",t.readOnly||t.isBlocking||(i+="\n",t.isChangingMode?(i+='\n<ul class="list-inline" id="'+(null==(e=t.dynamicWizardKey)?"":e)+'-nav">\n  ',t.buttons.cancel&&(i+='\n  <li class="list-inline-item">\n    <button class="btn btn-secondary btn-wizard-nav-cancel"\n      ref="'+(null==(e=t.dynamicWizardKey)?"":e)+'-cancel">'+(null==(e=t.t("cancel"))?"":e)+"</button>\n  </li>\n  "),i+="\n  ",t.buttons.previous&&(i+='\n  <li class="list-inline-item">\n    <button class="btn btn-primary btn-wizard-nav-previous"\n      ref="'+(null==(e=t.dynamicWizardKey)?"":e)+'-previous">'+(null==(e=t.t("previous"))?"":e)+"</button>\n  </li>\n  "),i+="\n  ",t.buttons.next&&(i+='\n  <li class="list-inline-item">\n    <button class="btn btn-primary btn-wizard-nav-next" ref="'+(null==(e=t.dynamicWizardKey)?"":e)+'-next">'+(null==(e=t.t("next"))?"":e)+"</button>\n  </li>\n  "),i+="\n</ul>\n"):i+='\n<p>Would you like to add another?</p>\n<button class="btn btn-primary" ref="'+(null==(e=t.ref.agreeButton)?"":e)+'">\n  '+(null==(e=t.t("Yes"))?"":e)+"\n</button>\n",i+="\n"),i}},432:function(t,e){e.Z=function(t){var e,i="";return Array.prototype.join,i+='<div class="formio-sketchpad-body">\n  <div class="formio-sketchpad-header" ref="header">\n    <div class="btn-toolbar formio-sketchpad-toolbar" role="toolbar">\n      ',!t.disabled&&t.buttonGroups.forEach((function(n){i+='\n        <div class="btn-group formio-sketchpad-toolbar-group" role="group">\n          ',n.forEach((function(n){i+='\n            <div class="btn formio-sketchpad-toolbar-button formio-sketchpad-toolbar-button-'+(null==(e=n.key)?"":e)+'" ref="'+(null==(e=n.key)?"":e)+'" title="'+(null==(e=n.title)?"":e)+'">\n              <i class="'+(null==(e=n.icon)?"":e)+'"></i>\n              ',n.input&&(i+='\n                <input type="'+(null==(e=n.input.type)?"":e)+'" class="formio-sketchpad-toolbar-input '+(null==(e=n.input.class)?"":e)+'" ref="'+(null==(e=n.key)?"":e)+'-input"\n                '+(null==(e=t.self.buttonAttributes(n))?"":e)+"/>\n              "),i+="\n            </div>\n          "})),i+="\n        </div>\n      "})),i+='\n    </div>\n  </div>\n  <div class="formio-sketchpad-container" ref="drawingContainer">\n    <div class="formio-sketchpad-background" ref="background">\n      ',t.component.image||t.component.imageUrl||(i+="\n          Background image is not specified. Sketchpad doesn\\'t work without background image\n      "),i+="\n      ",t.component.imageUrl&&"svg"!==t.component.imageType&&(i+='\n        <img ref="backgroundImage" alt=""/>\n      '),i+='\n    </div>\n    <div class="formio-sketchpad-canvas" ref="canvas"></div>\n  </div>\n  <div class="formio-sketchpad-footer" ref="footer">\n    <div class="formio-sketchpad-meta-info"><div><span ref="totalMultiplier">'+(null==(e=t.zoomInfo.totalMultiplier)?"":e)+"</span>x</div>\n  </div>\n</div></div>\n"}},5:function(t,e){e.Z=function(t){var e,i="";return Array.prototype.join,i+='<div class="formio-tagpad-container clearfix">\n  <div ref="canvasContainer" class="formio-tagpad-image-container" style="max-width: '+(null==(e=t.canvasMaxWidth)?"":e)+"; max-height: "+(null==(e=t.canvasMaxHeight)?"":e)+';">\n      <div ref="background" class="formio-tagpad-background">\n        ',t.component.image||t.component.imageUrl||(i+="\n            Background image is not specified. Tagpad doesn\\'t work without background image\n        "),i+="\n        ",t.component.imageUrl&&(i+="\n            <img src="+(null==(e=t.component.imageUrl)?"":e)+' ref="image" alt="" width="100%"/>\n        '),i+='\n      </div>\n      <div ref="canvas" class="formio-tagpad-canvas"></div>\n  </div>\n  <div ref="formContainer" class="formio-tagpad-form-container">\n      <div class="formio-tagpad-form">\n        ',t.selectedDot?(i+='\n          <p class="formio-tagpad-form-title">Dot: '+(null==(e=t.selectedDot.index+1)?"":e)+'</p>\n          <div  ref="form">'+(null==(e=t.components)?"":e)+"</div>\n          ",t.buttons.removeDot&&(i+='\n            <button class="btn btn-sm btn-danger formio-tagpad-remove-button" ref="removeDot">\n              <i class="fa fa-trash"></i>\n            </button>\n          '),i+="\n        "):!t.hasDots||t.disabled||t.component.disabled||t.self.shouldDisabled?(t.component.disabled||t.disabled||t.self.shouldDisabled)&&(i+='\n          <div class="formio-tagpad-all-data">'+(null==(e=t.self.getDataAsString())?"":e)+"</div>\n        "):i+='\n          <p class="formio-tagpad-form-title">No dot selected</p>\n        ',i+"\n      </div>\n  </div>\n</div>\n"}},98:function(e){"use strict";e.exports=t}},i={};function n(t){var r=i[t];if(void 0!==r)return r.exports;var s=i[t]={exports:{}};return e[t](s,s.exports,n),s.exports}n.d=function(t,e){for(var i in e)n.o(e,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)};var r={};return function(){"use strict";n.d(r,{default:function(){return Hn}});var t=n(98),e=[{weight:0,type:"textfield",input:!0,key:"label",label:"Label",placeholder:"Field Label",tooltip:"The label for this field.",validate:{required:!0}},{key:"multiple",ignore:!0},{key:"defaultValue",ignore:!0},{key:"dbIndex",ignore:!0},{key:"allowCalculateOverride",ignore:!0},{key:"customDefaultValuePanel",ignore:!0},{key:"calculateValuePanel",ignore:!0}],i=[{type:"select",input:!0,weight:0,tooltip:"The source to get the data. You can fetch from a URL or use javascript to get the value.",key:"dataSrc",defaultValue:"url",label:"Data Source Type",dataSrc:"values",data:{values:[{label:"URL",value:"url"},{label:"IndexedDB",value:"indexeddb"}]}},{type:"checkbox",input:!0,weight:9,key:"indexeddb.fromExisting",label:"Choose from existing databases?",defaultValue:!1,tooltip:"Check it if you want to select an existing database.",conditional:{json:{in:[{var:"data.dataSrc"},["indexeddb"]]}}},{type:"textfield",weight:10,input:!0,key:"indexeddb.database",label:"Database name",forceOverride:!0,tooltip:"The name of the indexeddb database.",conditional:{json:{and:[{in:[{var:"data.dataSrc"},["indexeddb"]]},{"!==":[{var:"data.indexeddb.fromExisting"},!0]}]}}},{type:"textfield",input:!0,key:"indexeddb.table",label:"Table name",forceOverride:!0,weight:16,tooltip:"The name of table in the indexeddb database.",conditional:{json:{and:[{in:[{var:"data.dataSrc"},["indexeddb"]]},{"!==":[{var:"data.indexeddb.fromExisting"},!0]}]}}},{type:"select",input:!0,key:"indexeddb.database",label:"Existing Database name",weight:10,tooltip:"The name of the existing indexeddb database.",dataSrc:"custom",valueProperty:"value",skipMerge:!0,data:{custom:function(t){return window.indexedDB?window.indexedDB.databases().then((function(t){return t.map((function(t){var e=t.name;return{value:e,label:e}}))})):(window.alert("Your browser doesn't support current version of indexedDB"),[])}},conditional:{json:{"===":[{var:"data.indexeddb.fromExisting"},!0]}}},{type:"select",input:!0,key:"indexeddb.table",label:"Existing Table name",refreshOn:"indexeddb.database",clearOnRefresh:!0,weight:16,tooltip:"The name of an existing table in the indexeddb database.",dataSrc:"custom",valueProperty:"value",skipMerge:!0,data:{custom:function(t){if(!window.indexedDB)return window.alert("Your browser doesn't support current version of indexedDB"),[];var e=t.data.indexeddb.database;return e?new Promise((function(t){var i=window.indexedDB.open(e);i.onsuccess=function(e){var i=e.target.result.objectStoreNames;if(i.length){var n=Array.from(i).map((function(t){return{value:t,label:t}}));t(n)}else t([])},i.onerror=function(){return t([])}})):[]}},conditional:{json:{"===":[{var:"data.indexeddb.fromExisting"},!0]}}},{type:"textfield",input:!0,key:"fetch.url",weight:10,label:"Data Source URL",placeholder:"Data Source URL",tooltip:"A URL that returns data. You can interpolate form data using curly bracket notation.",clearOnHide:!0,conditional:{json:{"===":[{var:"data.dataSrc"},"url"]}}},{type:"select",input:!0,label:"Method",key:"fetch.method",clearOnHide:!0,tooltip:"The HTTP Request method to use when making the request.",defaultValue:"get",weight:11,template:"<span>{{ item.label }}</span>",dataSrc:"values",data:{values:[{label:"Get",value:"get"},{label:"Post",value:"post"}]},conditional:{json:{"===":[{var:"data.dataSrc"},"url"]}}},{type:"datagrid",input:!0,label:"Request Headers",key:"fetch.headers",tooltip:"Set any headers that should be sent along with the request to the url. This is useful for authentication.",weight:12,components:[{label:"Key",key:"key",input:!0,type:"textfield"},{label:"Value",key:"value",input:!0,type:"textfield"}],clearOnHide:!0,conditional:{json:{"===":[{var:"data.dataSrc"},"url"]}}},{type:"checkbox",input:!0,key:"fetch.forwardHeaders",label:"Forward Headers",tooltip:"Check this if you would like to forward the headers passed to the server to the fetch endpoint.",clearOnHide:!0,conditional:{json:{"===":[{var:"data.dataSrc"},"url"]}}},{type:"checkbox",input:!0,weight:26,key:"fetch.authenticate",label:"Form.io Authentication",tooltip:"Check this if you would like to pass Form.io Authentication headers with the request.",clearOnHide:!0,conditional:{json:{"===":[{var:"data.dataSrc"},"url"]}}},{type:"panel",title:"POST Body Specification",theme:"default",collapsible:!0,collapsed:!0,key:"specifyPostBodyPanel",weight:1e3,tooltip:"Write custom code to specify POST Body.",conditional:{json:{and:[{"===":[{var:"data.dataSrc"},"url"]},{"===":[{var:"data.fetch.method"},"post"]}]}},components:[{type:"htmlelement",tag:"div",content:'<p>The following variables are available in all scripts.</p><table class="table table-bordered table-condensed table-striped"><tr><th>form</th><td>The complete form JSON object</td></tr><tr><th>submission</th><td>The complete submission object.</td></tr><tr><th>data</th><td>The complete submission data object.</td></tr><tr><th>row</th><td>Contextual "row" data, used within DataGrid, EditGrid, and Container components</td></tr><tr><th>component</th><td>The current component JSON</td></tr><tr><th>instance</th><td>The current component instance.</td></tr><tr><th>value</th><td>The current value of the component.</td></tr><tr><th>moment</th><td>The moment.js library for date manipulation.</td></tr><tr><th>_</th><td>An instance of <a href="https://lodash.com/docs/" target="_blank">Lodash</a>.</td></tr><tr><th>utils</th><td>An instance of the <a href="http://formio.github.io/formio.js/docs/identifiers.html#utils" target="_blank">FormioUtils</a> object.</td></tr><tr><th>util</th><td>An alias for "utils".</td></tr></table><br/>'},{type:"textarea",key:"fetch.specifyPostBody",rows:5,editor:"ace",hideLabel:!0,input:!0,placeholder:"body = {\n  data: {\n    b: data.a,\n    submit: true,\n  },\n}"},{type:"htmlelement",tag:"div",content:"<p>Enter custom javascript code.</p><p><h4>Example:</h4><pre>body = {\n  data: {\n    b: data.a,\n    submit: true,\n  },\n};</pre></p>"}]},{type:"checkbox",input:!0,weight:1001,key:"allowCaching",label:"Enable to Store Request Result in the Cache",defaultValue:!0,tooltip:"When checked, the requests and its results will be stored in the cache and if the Select will try to make the request to the same URL with the same paremetrs, the cached data will be returned. It allows to increase performance, but if the remote source's data is changing quite often and you always need to keep it up-to-date, uncheck this option.",conditional:{json:{"===":[{var:"data.dataSrc"},"url"]}}}],s=[{type:"checkbox",input:!0,key:"trigger.init",label:"Trigger on form init",tooltip:"When enabled the request will be made when the form is initialized.",weight:15},{type:"checkbox",input:!0,key:"trigger.server",label:"Trigger on server",tooltip:"When enabled the request will be made on the server during validation.",description:"Async requests on the server can slow down processing since the server must wait for a response before proceeding. Do not add too many server side requests or performance will suffer.",weight:15},{type:"select",input:!0,key:"refreshOn",label:"Trigger on Data change",weight:10,tooltip:"Refresh data when another field changes.",dataSrc:"custom",valueProperty:"value",data:{custom:function(t){var e=[];return e.push({label:"Any Change",value:"data"}),t.utils.eachComponent(t.instance.options.editForm.components,(function(i,n){i.key!==t.data.key&&e.push({label:i.label||i.key,value:n})})),e}}},{type:"select",input:!0,key:"refreshOnBlur",label:"Trigger on blur of Component",weight:10,tooltip:"Refresh data when another field was blured.",dataSrc:"custom",valueProperty:"value",data:{custom:function(t){var e=[];return e.push({label:"Any Change",value:"data"}),t.utils.eachComponent(t.instance.options.editForm.components,(function(i,n){i.key!==t.data.key&&e.push({label:i.label||i.key,value:n})})),e}}},{type:"textfield",label:"Trigger on Event",key:"refreshOnEvent",input:!0,weight:110,tooltip:"Refresh data when this event is fired."},{type:"textfield",label:"Triggered Event",key:"event",input:!0,weight:120,tooltip:"The event to fire when triggered.",description:"When in a datagrid or editgrid, { { rowIndex } } is available for interpolation to target a specific row."}],o=function(){for(var t=0,e=0,i=arguments.length;e<i;e++)t+=arguments[e].length;var n=Array(t),r=0;for(e=0;e<i;e++)for(var s=arguments[e],o=0,a=s.length;o<a;o++,r++)n[r]=s[o];return n},a=t.Components.components.component.editForm;function l(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return a.apply(void 0,o([[{key:"data",components:e},{label:"Trigger",key:"trigger",weight:10,components:s},{label:"Fetch",key:"fetch",weight:20,components:i},{key:"display",ignore:!0},{key:"validation",ignore:!0},{key:"layout",ignore:!0}]],t))}var h,c,d=(h=function(t,e){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}h(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),u=function(){for(var t=0,e=0,i=arguments.length;e<i;e++)t+=arguments[e].length;var n=Array(t),r=0;for(e=0;e<i;e++)for(var s=arguments[e],o=0,a=s.length;o<a;o++,r++)n[r]=s[o];return n},f=t.Components.components.component,p=function(e){function i(t,i,n){return e.call(this,t,i,n)||this}return d(i,e),Object.defineProperty(i,"builderInfo",{get:function(){return{title:"Data Source",icon:"cloud",group:"premium",documentation:"http://help.form.io/userguide/#datasource",weight:30,schema:i.schema()}},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"requestHeaders",{get:function(){var e=this,i=new t.Formio.Headers;if(this.component.fetch&&this.component.fetch.headers)try{this.component.fetch.headers.forEach((function(t){t.key&&i.set(t.key,e.interpolate(t.value))}))}catch(t){console.warn(t.message)}return"POST"!==this.reqMethod||i.has("Content-type")||i.set("Content-type","application/json"),i},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"reqMethod",{get:function(){return t.Utils._.get(this.component,"fetch.method","get").toUpperCase()},enumerable:!1,configurable:!0}),i.schema=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return f.schema.apply(f,u([{label:"Data Source",key:"dataSource",type:"datasource",persistent:"client-only"}],t))},i.prototype.init=function(){return t.Utils._.get(this.component,"trigger.init",!1)&&this.refresh(),e.prototype.init.call(this)},i.prototype.render=function(){return this.builderMode?e.prototype.render.call(this,this.component.label||"Data Source"):e.prototype.render.call(this," ")},i.prototype.attach=function(t){return this.attachRefreshOnBlur(),this.attachRefreshOnEvent(),e.prototype.attach.call(this,t)},i.prototype.attachRefreshOnBlur=function(){var t=this;this.component.refreshOnBlur&&this.on("blur",(function(e){t.checkRefreshOn([{instance:e,value:e.dataValue}],{fromBlur:!0})}))},i.prototype.attachRefreshOnEvent=function(){var t=this;this.component.refreshOnEvent&&this.on(this.component.refreshOnEvent,(function(){return t.refresh()}))},i.prototype.dettachRefreshOnBlur=function(){this.component.refreshOnBlur&&this.off("blur")},i.prototype.dettachRefreshOnEvent=function(){this.component.refreshOnEvent&&this.off(this.component.refreshOnEvent)},i.prototype.refresh=function(t,e,i){if(!this.options.readOnly)switch(this.component.dataSrc){case"url":this.getDataFromUrl(i);break;case"indexeddb":window.indexedDB||window.alert("Your browser doesn't support current version of indexedDB"),this.getDataFromIndexedDb(i)}},i.prototype.getDataFromUrl=function(e){var i,n=this,r=null;t.Utils._.get(this.component,"fetch.specifyPostBody","")&&"POST"===this.reqMethod&&(r=this.specifyBody());var s=t.Formio.makeStaticRequest(this.interpolate(this.component.fetch.url),this.reqMethod,r,{headers:this.requestHeaders,noToken:!(this.component.fetch&&this.component.fetch.authenticate),ignoreCache:!this.component.allowCaching});Promise.all([s,(null===(i=this.root)||void 0===i?void 0:i.formReady)?this.root.formReady:Promise.resolve()]).then((function(t){setTimeout((function(){n.assign(t[0],e)}))})).catch((function(t){console.warn(t)}))},i.prototype.getDataFromIndexedDb=function(e){var i=this;if(this.component.indexeddb&&this.component.indexeddb.database&&this.component.indexeddb.table){var n=window.indexedDB.open(this.component.indexeddb.database);n.onupgradeneeded=function(t){if(i.component.customOptions){var e=t.target.result;e.createObjectStore(i.component.indexeddb.table,{keyPath:"myKey",autoIncrement:!0}).transaction.oncomplete=function(){var t=e.transaction(i.component.indexeddb.table,"readwrite");i.component.customOptions.forEach((function(e){t.objectStore(i.component.indexeddb.table).put(e)}))}}},n.onerror=function(){window.alert(n.errorCode)},n.onsuccess=function(n){var r=n.target.result.transaction(i.component.indexeddb.table,"readwrite").objectStore(i.component.indexeddb.table);new t.Formio.Promise((function(t){var e=[];r.getAll().onsuccess=function(i){i.target.result.forEach((function(t){e.push(t)})),t(e)}})).then((function(t){return i.assign(t,e)}))}}},i.prototype.assign=function(e,i){t.Utils._.isEqual(this.dataValue,e)||(this.dataValue=e,this.triggerChange(i&&i.fromSubmission?{dataSourceInitialLoading:!0}:null)),this.component.event&&this.emitEvents()},i.prototype.emitEvents=function(){this.emit(this.interpolate(this.component.event),this.data),this.events.emit(this.interpolate(this.component.event),this.data),this.emit("customEvent",{type:this.interpolate(this.component.event),component:this.component,data:this.data})},i.prototype.validateMultiple=function(){return!1},i.prototype.specifyBody=function(){var t=null;try{t=this.evaluate(this.component.fetch.specifyPostBody,{value:this.dataValue,row:this.data,data:this.rootValue,component:this.component},"body")}catch(e){t=null}return t},i.prototype.destroy=function(){return this.dettachRefreshOnBlur(),this.dettachRefreshOnEvent(),e.prototype.destroy.call(this)},i.editForm=l,i}(f),g={move:"M",line:"L",curve:"C",arc:"A",close:"Z"};"undefined"!=typeof window?c=window:void 0!==n.g?c=n.g:"undefined"!=typeof self&&(c=self);var m,v=c,y=function(t){return{translateX:t.e,translateY:t.f,scaleX:Math.sqrt(t.a*t.a+t.b*t.b),scaleY:Math.sqrt(t.c*t.c+t.d*t.d),rotation:180*Math.atan2(t.b,t.a)/Math.PI}},_=function(t){m=t},b=function(t,e){e=e&&e.identity()||new m;for(var i=t,n=[];i&&i._matrix;)n.push(i._matrix),i=i.parent;n.reverse();for(var r=0;r<n.length;r++){var s=n[r].elements;e.multiply(s[0],s[1],s[2],s[3],s[4],s[5],s[6],s[7],s[8],s[9])}return e},w=function(t,e,i){return i*(e-t)+t},x=function(t,e){for(;t<0;)t+=e;return t%e},k=v.Float32Array||Array,S=function(t){return Math.floor(1e6*t)/1e6},R=Object.freeze({__proto__:null,decomposeMatrix:y,getComputedMatrix:b,setMatrix:_,lerp:w,mod:x,NumArray:k,toFixed:S}),C=Array.prototype.slice,O={isNaN:function(t){return"number"==typeof t&&t!==+t},isElement:function(t){return!(!t||1!==t.nodeType)},isObject:function(t){var e=typeof t;return"function"===e||"object"===e&&!!t},extend:function(t){for(var e=C.call(arguments,1),i=0;i<e.length;i++){var n=e[i];for(var r in n)t[r]=n[r]}return t},defaults:function(t){for(var e=C.call(arguments,1),i=0;i<e.length;i++){var n=e[i];for(var r in n)void 0===t[r]&&(t[r]=n[r])}return t},each:function(t,e,i){for(var n=i||this,r=!function(t){if(null==t)return!1;var e=t.length;return"number"==typeof e&&e>=0&&e<4294967296}(t)&&Object.keys(t),s=(r||t).length,o=0;o<s;o++){var a=r?r[o]:o;e.call(n,t[a],a,t)}return t},performance:v.performance&&v.performance.now?v.performance:Date},M=function(t,e,i){var n;switch(i.length){case 0:n=function(n){e[n].call(t,i[0])};break;case 1:n=function(n){e[n].call(t,i[0],i[1])};break;case 2:n=function(n){e[n].call(t,i[0],i[1],i[2])};break;case 3:n=function(n){e[n].call(t,i[0],i[1],i[2],i[3])};break;default:n=function(n){e[n].apply(t,i)}}for(var r=0;r<e.length;r++)n(r)},E={on:function(t,e){return this._events||(this._events={}),(this._events[t]||(this._events[t]=[])).push(e),this},off:function(t,e){if(!this._events)return this;if(!t&&!e)return this._events={},this;for(var i=t?[t]:Object.keys(this._events),n=0,r=i.length;n<r;n++){t=i[n];var s=this._events[t];if(s){var o=[];if(e)for(var a=0,l=s.length;a<l;a++){var h=s[a];h=h.handler?h.handler:h,e&&e!==h&&o.push(h)}this._events[t]=o}}return this},trigger:function(t){if(!this._events)return this;var e=Array.prototype.slice.call(arguments,1),i=this._events[t];return i&&M(this,i,e),this},listen:function(t,e,i){var n=this;if(t){var r=function(){i.apply(n,arguments)};r.obj=t,r.name=e,r.handler=i,t.on(e,r)}return this},ignore:function(t,e,i){return t.off(e,i),this},Types:{play:"play",pause:"pause",update:"update",render:"render",resize:"resize",change:"change",remove:"remove",insert:"insert",order:"order",load:"load"}};E.bind=E.on,E.unbind=E.off;var A=function(t,e){this.x=t||0,this.y=e||0};O.extend(A,{zero:new A,add:function(t,e){return new A(t.x+e.x,t.y+e.y)},sub:function(t,e){return new A(t.x-e.x,t.y-e.y)},subtract:function(t,e){return A.sub(t,e)},ratioBetween:function(t,e){return(t.x*e.x+t.y*e.y)/(t.length()*e.length())},angleBetween:function(t,e){var i,n;return arguments.length>=4?(i=arguments[0]-arguments[2],n=arguments[1]-arguments[3],Math.atan2(n,i)):(i=t.x-e.x,n=t.y-e.y,Math.atan2(n,i))},distanceBetween:function(t,e){return Math.sqrt(A.distanceBetweenSquared(t,e))},distanceBetweenSquared:function(t,e){var i=t.x-e.x,n=t.y-e.y;return i*i+n*n},MakeObservable:function(t){t.bind=t.on=function(){return this._bound||(this._x=this.x,this._y=this.y,Object.defineProperty(this,"x",P),Object.defineProperty(this,"y",F),O.extend(this,T),this._bound=!0),E.bind.apply(this,arguments),this}}}),O.extend(A.prototype,E,{constructor:A,set:function(t,e){return this.x=t,this.y=e,this},copy:function(t){return this.x=t.x,this.y=t.y,this},clear:function(){return this.x=0,this.y=0,this},clone:function(){return new A(this.x,this.y)},add:function(t,e){return arguments.length<=0||(arguments.length<=1?"number"==typeof t?(this.x+=t,this.y+=t):t&&"number"==typeof t.x&&"number"==typeof t.y&&(this.x+=t.x,this.y+=t.y):(this.x+=t,this.y+=e)),this},addSelf:function(t){return this.add.apply(this,arguments)},sub:function(t,e){return arguments.length<=0||(arguments.length<=1?"number"==typeof t?(this.x-=t,this.y-=t):t&&"number"==typeof t.x&&"number"==typeof t.y&&(this.x-=t.x,this.y-=t.y):(this.x-=t,this.y-=e)),this},subtract:function(){return this.sub.apply(this,arguments)},subSelf:function(t){return this.sub.apply(this,arguments)},subtractSelf:function(t){return this.sub.apply(this,arguments)},multiply:function(t,e){return arguments.length<=0||(arguments.length<=1?"number"==typeof t?(this.x*=t,this.y*=t):t&&"number"==typeof t.x&&"number"==typeof t.y&&(this.x*=t.x,this.y*=t.y):(this.x*=t,this.y*=e)),this},multiplySelf:function(t){return this.multiply.apply(this,arguments)},multiplyScalar:function(t){return this.multiply(t)},divide:function(t,e){return arguments.length<=0||(arguments.length<=1?"number"==typeof t?(this.x/=t,this.y/=t):t&&"number"==typeof t.x&&"number"==typeof t.y&&(this.x/=t.x,this.y/=t.y):(this.x/=t,this.y/=e),O.isNaN(this.x)&&(this.x=0),O.isNaN(this.y)&&(this.y=0)),this},divideSelf:function(t){return this.divide.apply(this,arguments)},divideScalar:function(t){return this.divide(t)},negate:function(){return this.multiply(-1)},dot:function(t){return this.x*t.x+this.y*t.y},length:function(){return Math.sqrt(this.lengthSquared())},lengthSquared:function(){return this.x*this.x+this.y*this.y},normalize:function(){return this.divideScalar(this.length())},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this.x-t.x,i=this.y-t.y;return e*e+i*i},setLength:function(t){return this.normalize().multiplyScalar(t)},equals:function(t,e){return e=void 0===e?1e-4:e,this.distanceTo(t)<e},lerp:function(t,e){var i=(t.x-this.x)*e+this.x,n=(t.y-this.y)*e+this.y;return this.set(i,n)},isZero:function(t){return t=void 0===t?1e-4:t,this.length()<t},toString:function(){return this.x+", "+this.y},toObject:function(){return{x:this.x,y:this.y}},rotate:function(t){var e=Math.cos(t),i=Math.sin(t);return this.x=this.x*e-this.y*i,this.y=this.x*i+this.y*e,this}});var T={constructor:A,set:function(t,e){return this._x=t,this._y=e,this.trigger(E.Types.change)},copy:function(t){return this._x=t.x,this._y=t.y,this.trigger(E.Types.change)},clear:function(){return this._x=0,this._y=0,this.trigger(E.Types.change)},clone:function(){return new A(this._x,this._y)},add:function(t,e){return arguments.length<=0?this:(arguments.length<=1?"number"==typeof t?(this._x+=t,this._y+=t):t&&"number"==typeof t.x&&"number"==typeof t.y&&(this._x+=t.x,this._y+=t.y):(this._x+=t,this._y+=e),this.trigger(E.Types.change))},sub:function(t,e){return arguments.length<=0?this:(arguments.length<=1?"number"==typeof t?(this._x-=t,this._y-=t):t&&"number"==typeof t.x&&"number"==typeof t.y&&(this._x-=t.x,this._y-=t.y):(this._x-=t,this._y-=e),this.trigger(E.Types.change))},multiply:function(t,e){return arguments.length<=0?this:(arguments.length<=1?"number"==typeof t?(this._x*=t,this._y*=t):t&&"number"==typeof t.x&&"number"==typeof t.y&&(this._x*=t.x,this._y*=t.y):(this._x*=t,this._y*=e),this.trigger(E.Types.change))},divide:function(t,e){return arguments.length<=0?this:(arguments.length<=1?"number"==typeof t?(this._x/=t,this._y/=t):t&&"number"==typeof t.x&&"number"==typeof t.y&&(this._x/=t.x,this._y/=t.y):(this._x/=t,this._y/=e),O.isNaN(this._x)&&(this._x=0),O.isNaN(this._y)&&(this._y=0),this.trigger(E.Types.change))},dot:function(t){return this._x*t.x+this._y*t.y},lengthSquared:function(){return this._x*this._x+this._y*this._y},distanceToSquared:function(t){var e=this._x-t.x,i=this._y-t.y;return e*e+i*i},lerp:function(t,e){var i=(t.x-this._x)*e+this._x,n=(t.y-this._y)*e+this._y;return this.set(i,n)},toString:function(){return this._x+", "+this._y},toObject:function(){return{x:this._x,y:this._y}},rotate:function(t){var e=Math.cos(t),i=Math.sin(t);return this._x=this._x*e-this._y*i,this._y=this._x*i+this._y*e,this}},P={enumerable:!0,get:function(){return this._x},set:function(t){this._x=t,this.trigger(E.Types.change,"x")}},F={enumerable:!0,get:function(){return this._y},set:function(t){this._y=t,this.trigger(E.Types.change,"y")}};A.MakeObservable(A.prototype);var z=function(t,e,i,n,r,s,o){A.call(this,t,e),this._broadcast=function(){this.trigger(E.Types.change)}.bind(this),this._command=o||g.move,this._relative=!0;var a="number"==typeof i,l="number"==typeof n,h="number"==typeof r,c="number"==typeof s;(a||l||h||c)&&z.AppendCurveProperties(this),a&&(this.controls.left.x=i),l&&(this.controls.left.y=n),h&&(this.controls.right.x=r),c&&(this.controls.right.y=s)};O.extend(z,{AppendCurveProperties:function(t){t.relative=!0,t.controls={},t.controls.left=new A(0,0),t.controls.right=new A(0,0)},MakeObservable:function(t){Object.defineProperty(t,"command",{enumerable:!0,get:function(){return this._command},set:function(t){this._command=t,this._command!==g.curve||O.isObject(this.controls)||z.AppendCurveProperties(this),this.trigger(E.Types.change)}}),Object.defineProperty(t,"relative",{enumerable:!0,get:function(){return this._relative},set:function(t){this._relative!=t&&(this._relative=!!t,this.trigger(E.Types.change))}}),O.extend(t,A.prototype,I),t.bind=t.on=function(){var t=this._bound;A.prototype.bind.apply(this,arguments),t||O.extend(this,I)}}});var I={constructor:z,listen:function(){return O.isObject(this.controls)||z.AppendCurveProperties(this),this.controls.left.bind(E.Types.change,this._broadcast),this.controls.right.bind(E.Types.change,this._broadcast),this},ignore:function(){return this.controls.left.unbind(E.Types.change,this._broadcast),this.controls.right.unbind(E.Types.change,this._broadcast),this},copy:function(t){return this.x=t.x,this.y=t.y,"string"==typeof t.command&&(this.command=t.command),O.isObject(t.controls)&&(O.isObject(this.controls)||z.AppendCurveProperties(this),this.controls.left.copy(t.controls.left),this.controls.right.copy(t.controls.right)),"boolean"==typeof t.relative&&(this.relative=t.relative),this.command===g.arc&&(this.rx=t.rx,this.ry=t.ry,this.xAxisRotation=t.xAxisRotation,this.largeArcFlag=t.largeArcFlag,this.sweepFlag=t.sweepFlag),this},clone:function(){var t=this.controls,e=new z(this.x,this.y,t&&t.left.x,t&&t.left.y,t&&t.right.x,t&&t.right.y,this.command);return e.relative=this._relative,e},toObject:function(){var t={x:this.x,y:this.y};return this._command&&(t.command=this._command),this._relative&&(t.relative=this._relative),this.controls&&(t.controls={left:this.controls.left.toObject(),right:this.controls.right.toObject()}),t},toString:function(){return this.controls?[this._x,this._y,this.controls.left.x,this.controls.left.y,this.controls.right.x,this.controls.right.y,this._command,this._relative?1:0].join(", "):[this._x,this._y].join(", ")}};z.MakeObservable(z.prototype);var j=Math.cos,D=Math.sin,L=Math.tan,B=[],V=function(t,e,i,n,r,s){this.elements=new k(9);var o=t;Array.isArray(o)||(o=Array.prototype.slice.call(arguments)),this.identity(),o.length>0&&this.set(o)};_(V),O.extend(V,{Identity:[1,0,0,0,1,0,0,0,1],Multiply:function(t,e,i){if(e.length<=3){var n=t,r=e[0]||0,s=e[1]||0,o=e[2]||0;return{x:n[0]*r+n[1]*s+n[2]*o,y:n[3]*r+n[4]*s+n[5]*o,z:n[6]*r+n[7]*s+n[8]*o}}var a=t[0],l=t[1],h=t[2],c=t[3],d=t[4],u=t[5],f=t[6],p=t[7],g=t[8],m=e[0],v=e[1],y=e[2],_=e[3],b=e[4],w=e[5],x=e[6],S=e[7],R=e[8];return(i=i||new k(9))[0]=a*m+l*_+h*x,i[1]=a*v+l*b+h*S,i[2]=a*y+l*w+h*R,i[3]=c*m+d*_+u*x,i[4]=c*v+d*b+u*S,i[5]=c*y+d*w+u*R,i[6]=f*m+p*_+g*x,i[7]=f*v+p*b+g*S,i[8]=f*y+p*w+g*R,i}}),O.extend(V.prototype,E,{constructor:V,manual:!1,set:function(t,e,i,n,r,s,o,a,l){var h;return void 0===e&&(t=(h=t)[0],e=h[1],i=h[2],n=h[3],r=h[4],s=h[5],o=h[6],a=h[7],l=h[8]),this.elements[0]=t,this.elements[1]=e,this.elements[2]=i,this.elements[3]=n,this.elements[4]=r,this.elements[5]=s,this.elements[6]=o,this.elements[7]=a,this.elements[8]=l,this.trigger(E.Types.change)},copy:function(t){return this.elements[0]=t.elements[0],this.elements[1]=t.elements[1],this.elements[2]=t.elements[2],this.elements[3]=t.elements[3],this.elements[4]=t.elements[4],this.elements[5]=t.elements[5],this.elements[6]=t.elements[6],this.elements[7]=t.elements[7],this.elements[8]=t.elements[8],this.manual=t.manual,this.trigger(E.Types.change)},identity:function(){return this.elements[0]=V.Identity[0],this.elements[1]=V.Identity[1],this.elements[2]=V.Identity[2],this.elements[3]=V.Identity[3],this.elements[4]=V.Identity[4],this.elements[5]=V.Identity[5],this.elements[6]=V.Identity[6],this.elements[7]=V.Identity[7],this.elements[8]=V.Identity[8],this.trigger(E.Types.change)},multiply:function(t,e,i,n,r,s,o,a,l){if(void 0===e)return this.elements[0]*=t,this.elements[1]*=t,this.elements[2]*=t,this.elements[3]*=t,this.elements[4]*=t,this.elements[5]*=t,this.elements[6]*=t,this.elements[7]*=t,this.elements[8]*=t,this.trigger(E.Types.change);if(void 0===n)return t=t||0,e=e||0,i=i||0,{x:(r=this.elements)[0]*t+r[1]*e+r[2]*i,y:r[3]*t+r[4]*e+r[5]*i,z:r[6]*t+r[7]*e+r[8]*i};var h=this.elements,c=[t,e,i,n,r,s,o,a,l],d=h[0],u=h[1],f=h[2],p=h[3],g=h[4],m=h[5],v=h[6],y=h[7],_=h[8],b=c[0],w=c[1],x=c[2],k=c[3],S=c[4],R=c[5],C=c[6],O=c[7],M=c[8];return this.elements[0]=d*b+u*k+f*C,this.elements[1]=d*w+u*S+f*O,this.elements[2]=d*x+u*R+f*M,this.elements[3]=p*b+g*k+m*C,this.elements[4]=p*w+g*S+m*O,this.elements[5]=p*x+g*R+m*M,this.elements[6]=v*b+y*k+_*C,this.elements[7]=v*w+y*S+_*O,this.elements[8]=v*x+y*R+_*M,this.trigger(E.Types.change)},inverse:function(t){var e=this.elements;t=t||new V;var i=e[0],n=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],h=e[7],c=e[8],d=c*o-a*h,u=-c*s+a*l,f=h*s-o*l,p=i*d+n*u+r*f;return p?(p=1/p,t.elements[0]=d*p,t.elements[1]=(-c*n+r*h)*p,t.elements[2]=(a*n-r*o)*p,t.elements[3]=u*p,t.elements[4]=(c*i-r*l)*p,t.elements[5]=(-a*i+r*s)*p,t.elements[6]=f*p,t.elements[7]=(-h*i+n*l)*p,t.elements[8]=(o*i-n*s)*p,t):null},scale:function(t,e){var i=arguments.length;return i<=1&&(e=t),this.multiply(t,0,0,0,e,0,0,0,1)},rotate:function(t){var e=j(t),i=D(t);return this.multiply(e,-i,0,i,e,0,0,0,1)},translate:function(t,e){return this.multiply(1,0,t,0,1,e,0,0,1)},skewX:function(t){var e=L(t);return this.multiply(1,e,0,0,1,0,0,0,1)},skewY:function(t){var e=L(t);return this.multiply(1,0,0,e,1,0,0,0,1)},toString:function(t){return B.length=0,this.toTransformArray(t,B),B.map(S).join(" ")},toTransformArray:function(t,e){var i=this.elements,n=!!e,r=i[0],s=i[1],o=i[2],a=i[3],l=i[4],h=i[5];if(t){var c=i[6],d=i[7],u=i[8];return n?(e[0]=r,e[1]=a,e[2]=c,e[3]=s,e[4]=l,e[5]=d,e[6]=o,e[7]=h,void(e[8]=u)):[r,a,c,s,l,d,o,h,u]}return n?(e[0]=r,e[1]=a,e[2]=s,e[3]=l,e[4]=o,void(e[5]=h)):[r,a,s,l,o,h]},toArray:function(t,e){var i=this.elements,n=!!e,r=i[0],s=i[1],o=i[2],a=i[3],l=i[4],h=i[5];if(t){var c=i[6],d=i[7],u=i[8];return n?(e[0]=r,e[1]=s,e[2]=o,e[3]=a,e[4]=l,e[5]=h,e[6]=c,e[7]=d,void(e[8]=u)):[r,s,o,a,l,h,c,d,u]}return n?(e[0]=r,e[1]=s,e[2]=o,e[3]=a,e[4]=l,void(e[5]=h)):[r,s,o,a,l,h]},toObject:function(){return{elements:this.toArray(!0),manual:!!this.manual}},clone:function(){return(new V).copy(this)}});var W=0,N={nextFrameID:null,Types:{webgl:"WebGLRenderer",svg:"SVGRenderer",canvas:"CanvasRenderer"},Version:"v0.7.1",PublishDate:"2021-01-13T01:57:28.198Z",Identifier:"two-",Resolution:12,AutoCalculateImportedMatrices:!0,Instances:[],uniqueId:function(){return W++}},U=Math.PI/2,H={CollinearityEpsilon:Math.pow(10,-30),RecursionLimit:16,CuspLimit:0,Tolerance:{distance:.25,angle:0,epsilon:Number.EPSILON},abscissas:[[.5773502691896257],[0,.7745966692414834],[.33998104358485626,.8611363115940526],[0,.5384693101056831,.906179845938664],[.2386191860831969,.6612093864662645,.932469514203152],[0,.4058451513773972,.7415311855993945,.9491079123427585],[.1834346424956498,.525532409916329,.7966664774136267,.9602898564975363],[0,.3242534234038089,.6133714327005904,.8360311073266358,.9681602395076261],[.14887433898163122,.4333953941292472,.6794095682990244,.8650633666889845,.9739065285171717],[0,.26954315595234496,.5190961292068118,.7301520055740494,.8870625997680953,.978228658146057],[.1252334085114689,.3678314989981802,.5873179542866175,.7699026741943047,.9041172563704749,.9815606342467192],[0,.2304583159551348,.44849275103644687,.6423493394403402,.8015780907333099,.9175983992229779,.9841830547185881],[.10805494870734367,.31911236892788974,.5152486363581541,.6872929048116855,.827201315069765,.9284348836635735,.9862838086968123],[0,.20119409399743451,.3941513470775634,.5709721726085388,.7244177313601701,.8482065834104272,.937273392400706,.9879925180204854],[.09501250983763744,.2816035507792589,.45801677765722737,.6178762444026438,.755404408355003,.8656312023878318,.9445750230732326,.9894009349916499]],weights:[[1],[.8888888888888888,.5555555555555556],[.6521451548625461,.34785484513745385],[.5688888888888889,.47862867049936647,.23692688505618908],[.46791393457269104,.3607615730481386,.17132449237917036],[.4179591836734694,.3818300505051189,.27970539148927664,.1294849661688697],[.362683783378362,.31370664587788727,.22238103445337448,.10122853629037626],[.3302393550012598,.31234707704000286,.26061069640293544,.1806481606948574,.08127438836157441],[.29552422471475287,.26926671930999635,.21908636251598204,.1494513491505806,.06667134430868814],[.2729250867779006,.26280454451024665,.23319376459199048,.18629021092773426,.1255803694649046,.05566856711617366],[.24914704581340277,.2334925365383548,.20316742672306592,.16007832854334622,.10693932599531843,.04717533638651183],[.2325515532308739,.22628318026289723,.2078160475368885,.17814598076194574,.13887351021978725,.09212149983772845,.04048400476531588],[.2152638534631578,.2051984637212956,.18553839747793782,.15720316715819355,.12151857068790319,.08015808715976021,.03511946033175186],[.2025782419255613,.19843148532711158,.1861610000155622,.16626920581699392,.13957067792615432,.10715922046717194,.07036604748810812,.03075324199611727],[.1894506104550685,.18260341504492358,.16915651939500254,.14959598881657674,.12462897125553388,.09515851168249279,.062253523938647894,.027152459411754096]]},q=function(t,e,i,n,r){var s=1-t;return s*s*s*e+3*s*s*t*i+3*s*t*t*n+t*t*t*r},G=function(t,e,i,n,r,s,o,a,l){var h=(l=l||H.RecursionLimit)+1;if(Math.abs(t-o)<.001&&Math.abs(e-a)<.001)return[new z(o,a)];for(var c=[],d=0;d<h;d++){var u=d/h,f=q(u,t,i,r,o),p=q(u,e,n,s,a);c.push(new z(f,p))}return c},X=function(t,e,i,n,r,s,o,a,l){if(t===i&&e===n&&r===o&&s===a){var h=o-t,c=a-e;return Math.sqrt(h*h+c*c)}var d=9*(i-r)+3*(o-t),u=6*(t+r)-12*i,f=3*(i-t),p=9*(n-s)+3*(a-e),g=6*(e+s)-12*n,m=3*(n-e);return Z((function(t){var e=(d*t+u)*t+f,i=(p*t+g)*t+m;return Math.sqrt(e*e+i*i)}),0,1,l||H.RecursionLimit)},Y=function(t,e,i,n,r,s,o,a){for(var l,h,c,d,u,f,p,g,m=[],v=[[],[]],y=0;y<2;++y)if(0==y?(h=6*t-12*i+6*r,l=-3*t+9*i-9*r+3*o,c=3*i-3*t):(h=6*e-12*n+6*s,l=-3*e+9*n-9*s+3*a,c=3*n-3*e),Math.abs(l)<1e-12){if(Math.abs(h)<1e-12)continue;0<(d=-c/h)&&d<1&&m.push(d)}else p=h*h-4*c*l,g=Math.sqrt(p),p<0||(0<(u=(-h+g)/(2*l))&&u<1&&m.push(u),0<(f=(-h-g)/(2*l))&&f<1&&m.push(f));for(var _,b=m.length,w=b;b--;)_=1-(d=m[b]),v[0][b]=_*_*_*t+3*_*_*d*i+3*_*d*d*r+d*d*d*o,v[1][b]=_*_*_*e+3*_*_*d*n+3*_*d*d*s+d*d*d*a;return v[0][w]=t,v[1][w]=e,v[0][w+1]=o,v[1][w+1]=a,v[0].length=v[1].length=w+2,{min:{x:Math.min.apply(0,v[0]),y:Math.min.apply(0,v[1])},max:{x:Math.max.apply(0,v[0]),y:Math.max.apply(0,v[1])}}},Z=function(t,e,i,n){for(var r=H.abscissas[n-2],s=H.weights[n-2],o=.5*(i-e),a=o+e,l=0,h=n+1>>1,c=1&n?s[l++]*t(a):0;l<h;){var d=o*r[l];c+=s[l++]*(t(a+d)+t(a-d))}return o*c},K=function(t,e){for(var i=t.length,n=i-1,r=0;r<i;r++){var s=t[r];O.isObject(s.controls)||z.AppendCurveProperties(s);var o=e?x(r-1,i):Math.max(r-1,0),a=e?x(r+1,i):Math.min(r+1,n),l=t[o],h=s,c=t[a];$(l,h,c),h.command=0===r?g.move:g.curve}},$=function(t,e,i){var n=A.angleBetween(t,e),r=A.angleBetween(i,e),s=A.distanceBetween(t,e),o=A.distanceBetween(i,e),a=(n+r)/2;return s<1e-4||o<1e-4?("boolean"!=typeof e.relative||e.relative||(e.controls.left.copy(e),e.controls.right.copy(e)),e):(s*=.33,o*=.33,r<n?a+=U:a-=U,e.controls.left.x=Math.cos(a)*s,e.controls.left.y=Math.sin(a)*s,a-=Math.PI,e.controls.right.x=Math.cos(a)*o,e.controls.right.y=Math.sin(a)*o,"boolean"!=typeof e.relative||e.relative||(e.controls.left.x+=e.x,e.controls.left.y+=e.y,e.controls.right.x+=e.x,e.controls.right.y+=e.y),e)},J=function(t,e,i){return new A(2*t.x-(e.x+t.x)-(i?t.x:0),2*t.y-(e.y+t.y)-(i?t.y:0))},Q=Object.freeze({__proto__:null,Curve:H,getComponentOnCubicBezier:q,subdivide:G,getCurveLength:X,getCurveBoundingBox:Y,integrate:Z,getCurveFromPoints:K,getControlPoints:$,getReflection:J,getAnchorsFromArcData:function(t,e,i,n,r,s,o){(new V).translate(t.x,t.y).rotate(e);for(var a=N.Resolution,l=0;l<a;l++){var h=(l+1)/a;o&&(h=1-h);var c=h*s+r,d=i*Math.cos(c),u=n*Math.sin(c),f=new z(d,u);z.AppendCurveProperties(f),f.command=g.line}}}),tt=v.devicePixelRatio||1,et=function(t){return tt/function(t){return t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1}(t)},it=function(){Array.call(this),arguments.length>1?Array.prototype.push.apply(this,arguments):arguments[0]&&Array.isArray(arguments[0])&&Array.prototype.push.apply(this,arguments[0])};(it.prototype=new Array).constructor=it,O.extend(it.prototype,E,{pop:function(){var t=Array.prototype.pop.apply(this,arguments);return this.trigger(E.Types.remove,[t]),t},shift:function(){var t=Array.prototype.shift.apply(this,arguments);return this.trigger(E.Types.remove,[t]),t},push:function(){var t=Array.prototype.push.apply(this,arguments);return this.trigger(E.Types.insert,arguments),t},unshift:function(){var t=Array.prototype.unshift.apply(this,arguments);return this.trigger(E.Types.insert,arguments),t},splice:function(){var t,e=Array.prototype.splice.apply(this,arguments);return this.trigger(E.Types.remove,e),arguments.length>2&&(t=this.slice(arguments[0],arguments[0]+arguments.length-2),this.trigger(E.Types.insert,t),this.trigger(E.Types.order)),e},sort:function(){return Array.prototype.sort.apply(this,arguments),this.trigger(E.Types.order),this},reverse:function(){return Array.prototype.reverse.apply(this,arguments),this.trigger(E.Types.order),this}});var nt=function(){this._renderer={},this._renderer.flagMatrix=nt.FlagMatrix.bind(this),this.isShape=!0,this.id=N.Identifier+N.uniqueId(),this.classList=[],this.matrix=new V,this.translation=new A,this.rotation=0,this.scale=1};O.extend(nt,{FlagMatrix:function(){this._flagMatrix=!0},MakeObservable:function(t){var e={enumerable:!1,get:function(){return this._translation},set:function(t){this._translation&&this._translation.unbind(E.Types.change,this._renderer.flagMatrix),this._translation=t,this._translation.bind(E.Types.change,this._renderer.flagMatrix),nt.FlagMatrix.call(this)}};Object.defineProperty(t,"translation",e),Object.defineProperty(t,"position",e),Object.defineProperty(t,"rotation",{enumerable:!0,get:function(){return this._rotation},set:function(t){this._rotation=t,this._flagMatrix=!0}}),Object.defineProperty(t,"scale",{enumerable:!0,get:function(){return this._scale},set:function(t){this._scale instanceof A&&this._scale.unbind(E.Types.change,this._renderer.flagMatrix),this._scale=t,this._scale instanceof A&&this._scale.bind(E.Types.change,this._renderer.flagMatrix),this._flagMatrix=!0,this._flagScale=!0}}),Object.defineProperty(t,"matrix",{enumerable:!0,get:function(){return this._matrix},set:function(t){this._matrix=t,this._flagMatrix=!0}}),Object.defineProperty(t,"className",{enumerable:!0,get:function(){return this._className},set:function(t){if(this._flagClassName=this._className!==t,this._flagClassName){for(var e=this._className.split(/\s+?/),i=t.split(/\s+?/),n=0;n<e.length;n++){var r=e[n],s=Array.prototype.indexOf.call(this.classList,r);s>=0&&this.classList.splice(s,1)}this.classList=this.classList.concat(i)}this._className=t}})}}),O.extend(nt.prototype,E,{_flagMatrix:!0,_flagScale:!1,_flagClassName:!1,_translation:null,_rotation:0,_scale:1,_className:"",constructor:nt,addTo:function(t){return t.add(this),this},clone:function(t){var e=new nt;return e.translation.copy(this.translation),e.rotation=this.rotation,e.scale=this.scale,this.matrix.manual&&e.matrix.copy(this.matrix),t&&t.add(e),e._update()},_update:function(t){return!this._matrix.manual&&this._flagMatrix&&(this._matrix.identity().translate(this.translation.x,this.translation.y),this._scale instanceof A?this._matrix.scale(this._scale.x,this._scale.y):this._matrix.scale(this._scale),this._matrix.rotate(this.rotation)),t&&this.parent&&this.parent._update&&this.parent._update(),this},flagReset:function(){return this._flagMatrix=this._flagScale=this._flagClassName=!1,this}}),nt.MakeObservable(nt.prototype);var rt=function(){it.apply(this,arguments),Object.defineProperty(this,"_events",{value:{},enumerable:!1}),this.ids={},this.on(E.Types.insert,this.attach),this.on(E.Types.remove,this.detach),rt.prototype.attach.apply(this,arguments)};rt.prototype=new it,O.extend(rt.prototype,{constructor:rt,attach:function(t){for(var e=0;e<t.length;e++)this.ids[t[e].id]=t[e];return this},detach:function(t){for(var e=0;e<t.length;e++)delete this.ids[t[e].id];return this}});var st=Math.min,ot=Math.max,at=function(t){nt.call(this,!0),this._renderer.type="group",this.additions=[],this.subtractions=[],this.children=Array.isArray(t)?t:Array.prototype.slice.call(arguments)};function lt(t,e){var i,n=t.parent;function r(){e.subtractions.length>0&&(i=Array.prototype.indexOf.call(e.subtractions,t))>=0&&e.subtractions.splice(i,1),e.additions.length>0&&(i=Array.prototype.indexOf.call(e.additions,t))>=0&&e.additions.splice(i,1),t.parent=e,e.additions.push(t),e._flagAdditions=!0}function s(){(i=Array.prototype.indexOf.call(n.additions,t))>=0&&n.additions.splice(i,1),(i=Array.prototype.indexOf.call(n.subtractions,t))<0&&(n.subtractions.push(t),n._flagSubtractions=!0)}n!==e?(n&&n.children.ids[t.id]&&(i=Array.prototype.indexOf.call(n.children,t),n.children.splice(i,1),s()),e?r():(s(),n._flagAdditions&&0===n.additions.length&&(n._flagAdditions=!1),n._flagSubtractions&&0===n.subtractions.length&&(n._flagSubtractions=!1),delete t.parent)):r()}O.extend(at,{Children:rt,InsertChildren:function(t){for(var e=0;e<t.length;e++)lt.call(this,t[e],this)},RemoveChildren:function(t){for(var e=0;e<t.length;e++)lt.call(this,t[e])},OrderChildren:function(t){this._flagOrder=!0},Properties:["fill","stroke","linewidth","visible","cap","join","miter","closed","curved","automatic"],MakeObservable:function(t){var e=at.Properties;Object.defineProperty(t,"opacity",{enumerable:!0,get:function(){return this._opacity},set:function(t){this._flagOpacity=this._opacity!==t,this._opacity=t}}),Object.defineProperty(t,"beginning",{enumerable:!0,get:function(){return this._beginning},set:function(t){this._flagBeginning=this._beginning!==t,this._beginning=t}}),Object.defineProperty(t,"ending",{enumerable:!0,get:function(){return this._ending},set:function(t){this._flagEnding=this._ending!==t,this._ending=t}}),Object.defineProperty(t,"length",{enumerable:!0,get:function(){if(this._flagLength||this._length<=0){if(this._length=0,!this.children)return this._length;for(var t=0;t<this.children.length;t++){var e=this.children[t];this._length+=e.length}}return this._length}}),nt.MakeObservable(t),at.MakeGetterSetters(t,e),Object.defineProperty(t,"children",{enumerable:!0,get:function(){return this._children},set:function(t){var e=at.InsertChildren.bind(this),i=at.RemoveChildren.bind(this),n=at.OrderChildren.bind(this);this._children&&this._children.unbind(),this._children=new rt(t),this._children.bind(E.Types.insert,e),this._children.bind(E.Types.remove,i),this._children.bind(E.Types.order,n)}}),Object.defineProperty(t,"mask",{enumerable:!0,get:function(){return this._mask},set:function(t){this._mask=t,this._flagMask=!0,t.clip||(t.clip=!0)}})},MakeGetterSetters:function(t,e){Array.isArray(e)||(e=[e]),O.each(e,(function(e){at.MakeGetterSetter(t,e)}))},MakeGetterSetter:function(t,e){var i="_"+e;Object.defineProperty(t,e,{enumerable:!0,get:function(){return this[i]},set:function(t){this[i]=t;for(var n=0;n<this.children.length;n++)this.children[n][e]=t}})}}),O.extend(at.prototype,nt.prototype,{_flagAdditions:!1,_flagSubtractions:!1,_flagOrder:!1,_flagOpacity:!0,_flagBeginning:!1,_flagEnding:!1,_flagLength:!1,_flagMask:!1,_fill:"#fff",_stroke:"#000",_linewidth:1,_opacity:1,_visible:!0,_cap:"round",_join:"round",_miter:4,_closed:!0,_curved:!1,_automatic:!0,_beginning:0,_ending:1,_length:0,_mask:null,constructor:at,clone:function(t){var e=new at,i=this.children.map((function(t){return t.clone()}));return e.add(i),e.opacity=this.opacity,this.mask&&(e.mask=this.mask),e.translation.copy(this.translation),e.rotation=this.rotation,e.scale=this.scale,e.className=this.className,this.matrix.manual&&e.matrix.copy(this.matrix),t&&t.add(e),e._update()},toObject:function(){var t={children:[],translation:this.translation.toObject(),rotation:this.rotation,scale:this.scale instanceof A?this.scale.toObject():this.scale,opacity:this.opacity,className:this.className,mask:this.mask?this.mask.toObject():null};return this.matrix.manual&&(t.matrix=this.matrix.toObject()),O.each(this.children,(function(e,i){t.children[i]=e.toObject()}),this),t},corner:function(){var t=this.getBoundingClientRect(!0),e={x:t.left,y:t.top};return this.children.forEach((function(t){t.translation.sub(e)})),this},center:function(){var t=this.getBoundingClientRect(!0);return t.centroid={x:t.left+t.width/2-this.translation.x,y:t.top+t.height/2-this.translation.y},this.children.forEach((function(e){e.isShape&&e.translation.sub(t.centroid)})),this},getById:function(t){var e=null;return function i(n){if(n.id===t)return n;if(n.children)for(var r=0;r<n.children.length;r++)if(e=i(n.children[r]))return e;return null}(this)},getByClassName:function(t){var e=[];return function i(n){if(Array.prototype.indexOf.call(n.classList,t)>=0&&e.push(n),n.children)for(var r=0;r<n.children.length;r++)i(n.children[r]);return e}(this)},getByType:function(t){var e=[];return function i(n){if(n instanceof t&&e.push(n),n.children)for(var r=0;r<n.children.length;r++)i(n.children[r]);return e}(this)},add:function(t){t=t instanceof Array?t.slice():Array.prototype.slice.call(arguments);for(var e=0;e<t.length;e++){var i=t[e];if(i&&i.id){var n=Array.prototype.indexOf.call(this.children,i);n>=0&&this.children.splice(n,1),this.children.push(i)}}return this},remove:function(t){var e=arguments.length,i=this.parent;if(e<=0&&i)return i.remove(this),this;t=t instanceof Array?t.slice():Array.prototype.slice.call(arguments);for(var n=0;n<t.length;n++)t[n]&&this.children.ids[t[n].id]&&this.children.splice(Array.prototype.indexOf.call(this.children,t[n]),1);return this},getBoundingClientRect:function(t){var e;this._update(!0);for(var i=1/0,n=-1/0,r=1/0,s=-1/0,o=/texture|gradient/i,a=0;a<this.children.length;a++){var l=this.children[a];l.visible&&!o.test(l._renderer.type)&&"number"==typeof(e=l.getBoundingClientRect(t)).top&&"number"==typeof e.left&&"number"==typeof e.right&&"number"==typeof e.bottom&&(r=st(e.top,r),i=st(e.left,i),n=ot(e.right,n),s=ot(e.bottom,s))}return{top:r,left:i,right:n,bottom:s,width:n-i,height:s-r}},noFill:function(){return this.children.forEach((function(t){t.noFill()})),this},noStroke:function(){return this.children.forEach((function(t){t.noStroke()})),this},subdivide:function(){var t=arguments;return this.children.forEach((function(e){e.subdivide.apply(e,t)})),this},_update:function(){if(this._flagBeginning||this._flagEnding)for(var t=Math.min(this._beginning,this._ending),e=Math.max(this._beginning,this._ending),i=this.length,n=0,r=t*i,s=e*i,o=0;o<this.children.length;o++){var a=this.children[o],l=a.length;r>n+l?(a.beginning=1,a.ending=1):s<n?(a.beginning=0,a.ending=0):r>n&&r<n+l?(a.beginning=(r-n)/l,a.ending=1):s>n&&s<n+l?(a.beginning=0,a.ending=(s-n)/l):(a.beginning=0,a.ending=1),n+=l}return nt.prototype._update.apply(this,arguments)},flagReset:function(){return this._flagAdditions&&(this.additions.length=0,this._flagAdditions=!1),this._flagSubtractions&&(this.subtractions.length=0,this._flagSubtractions=!1),this._flagOrder=this._flagMask=this._flagOpacity=this._flagBeginning=this._flagEnding=!1,nt.prototype.flagReset.call(this),this}}),at.MakeObservable(at.prototype);var ht=[],ct=2*Math.PI,dt=Math.max,ut=Math.min,ft=Math.abs,pt=Math.sin,gt=Math.cos,mt=Math.acos,vt=Math.sqrt,yt=function(t){return 1==t[0]&&0==t[3]&&0==t[1]&&1==t[4]&&0==t[2]&&0==t[5]},_t={isHidden:/(undefined|none|transparent)/i,alignments:{left:"start",middle:"center",right:"end"},shim:function(t,e){return t.tagName=t.nodeName=e||"canvas",t.nodeType=1,t.getAttribute=function(t){return this[t]},t.setAttribute=function(t,e){return this[t]=e,this},t},group:{renderChild:function(t){_t[t._renderer.type].render.call(t,this.ctx,!0,this.clip)},render:function(t){this._update();var e=this._matrix.elements,i=this.parent;this._renderer.opacity=this._opacity*(i&&i._renderer?i._renderer.opacity:1);var n=this._mask,r=yt(e),s=!r||!!n;if(this._renderer.context||(this._renderer.context={}),this._renderer.context.ctx=t,s&&(t.save(),r||t.transform(e[0],e[3],e[1],e[4],e[2],e[5])),n&&_t[n._renderer.type].render.call(n,t,!0),this.opacity>0&&0!==this.scale)for(var o=0;o<this.children.length;o++){var a=this.children[o];_t[a._renderer.type].render.call(a,t)}return s&&t.restore(),this.flagReset()}},path:{render:function(t,e,i){var n,r,s,o,a,l,h,c,d,u,f,p,m,v,y,_,b,w,k,S,R,C,O,M,E,T,P,F,z,I,j,D,L;if(this._update(),n=this._matrix.elements,r=this._stroke,s=this._linewidth,o=this._fill,a=this._opacity*this.parent._renderer.opacity,l=this._visible,h=this._cap,c=this._join,d=this._miter,u=this._closed,m=(p=(f=this._renderer.vertices).length)-1,j=yt(n),L=this.dashes,I=this._clip,!e&&(!l||I))return this;j||(t.save(),t.transform(n[0],n[3],n[1],n[4],n[2],n[5])),o&&("string"==typeof o?t.fillStyle=o:(_t[o._renderer.type].render.call(o,t),t.fillStyle=o._renderer.effect)),r&&("string"==typeof r?t.strokeStyle=r:(_t[r._renderer.type].render.call(r,t),t.strokeStyle=r._renderer.effect),s&&(t.lineWidth=s),d&&(t.miterLimit=d),c&&(t.lineJoin=c),!u&&h&&(t.lineCap=h)),"number"==typeof a&&(t.globalAlpha=a),L&&L.length>0&&(t.lineDashOffset=L.offset||0,t.setLineDash(L)),t.beginPath();for(var B=0;B<f.length;B++)switch(F=(b=f[B]).x,z=b.y,b.command){case g.close:t.closePath();break;case g.arc:var V=b.rx,W=b.ry,N=b.xAxisRotation,U=b.largeArcFlag,H=b.sweepFlag,q=(_=f[y=u?x(B-1,p):dt(B-1,0)]).x,G=_.y;_t.renderSvgArcCommand(t,q,G,V,W,U,H,N,F,z);break;case g.curve:y=u?x(B-1,p):Math.max(B-1,0),v=u?x(B+1,p):Math.min(B+1,m),_=f[y],w=f[v],M=_.controls&&_.controls.right||A.zero,E=b.controls&&b.controls.left||A.zero,_._relative?(C=M.x+_.x,O=M.y+_.y):(C=M.x,O=M.y),b._relative?(S=E.x+b.x,R=E.y+b.y):(S=E.x,R=E.y),t.bezierCurveTo(C,O,S,R,F,z),B>=m&&u&&(w=k,T=b.controls&&b.controls.right||A.zero,P=w.controls&&w.controls.left||A.zero,b._relative?(C=T.x+b.x,O=T.y+b.y):(C=T.x,O=T.y),w._relative?(S=P.x+w.x,R=P.y+w.y):(S=P.x,R=P.y),F=w.x,z=w.y,t.bezierCurveTo(C,O,S,R,F,z));break;case g.line:t.lineTo(F,z);break;case g.move:k=b,t.moveTo(F,z)}return u&&t.closePath(),I||i||(_t.isHidden.test(o)||((D=o._renderer&&o._renderer.offset)&&(t.save(),t.translate(-o._renderer.offset.x,-o._renderer.offset.y),t.scale(o._renderer.scale.x,o._renderer.scale.y)),t.fill(),D&&t.restore()),_t.isHidden.test(r)||((D=r._renderer&&r._renderer.offset)&&(t.save(),t.translate(-r._renderer.offset.x,-r._renderer.offset.y),t.scale(r._renderer.scale.x,r._renderer.scale.y),t.lineWidth=s/r._renderer.scale.x),t.stroke(),D&&t.restore())),j||t.restore(),I&&!i&&t.clip(),L&&L.length>0&&t.setLineDash(ht),this.flagReset()}},text:{render:function(t,e,i){this._update();var n,r,s,o,a,l,h,c,d,u,f,p=this._matrix.elements,g=this._stroke,m=this._linewidth,v=this._fill,y=this._decoration,_=this._opacity*this.parent._renderer.opacity,b=this._visible,w=yt(p),x=v._renderer&&v._renderer.offset&&g._renderer&&g._renderer.offset,k=this.dashes,S=_t.alignments[this._alignment]||this._alignment,R=this._baseline,C=this._clip;if(!e&&(!b||C))return this;if(w||(t.save(),t.transform(p[0],p[3],p[1],p[4],p[2],p[5])),x||(t.font=[this._style,this._weight,this._size+"px/"+this._leading+"px",this._family].join(" ")),t.textAlign=S,t.textBaseline=R,v&&("string"==typeof v?t.fillStyle=v:(_t[v._renderer.type].render.call(v,t),t.fillStyle=v._renderer.effect)),g&&("string"==typeof g?t.strokeStyle=g:(_t[g._renderer.type].render.call(g,t),t.strokeStyle=g._renderer.effect),m&&(t.lineWidth=m)),"number"==typeof _&&(t.globalAlpha=_),k&&k.length>0&&(t.lineDashOffset=k.offset||0,t.setLineDash(k)),C||i||(_t.isHidden.test(v)||(v._renderer&&v._renderer.offset?(l=v._renderer.scale.x,h=v._renderer.scale.y,t.save(),t.translate(-v._renderer.offset.x,-v._renderer.offset.y),t.scale(l,h),n=this._size/v._renderer.scale.y,r=this._leading/v._renderer.scale.y,t.font=[this._style,this._weight,n+"px/",r+"px",this._family].join(" "),s=v._renderer.offset.x/v._renderer.scale.x,o=v._renderer.offset.y/v._renderer.scale.y,t.fillText(this.value,s,o),t.restore()):t.fillText(this.value,0,0)),_t.isHidden.test(g)||(g._renderer&&g._renderer.offset?(l=g._renderer.scale.x,h=g._renderer.scale.y,t.save(),t.translate(-g._renderer.offset.x,-g._renderer.offset.y),t.scale(l,h),n=this._size/g._renderer.scale.y,r=this._leading/g._renderer.scale.y,t.font=[this._style,this._weight,n+"px/",r+"px",this._family].join(" "),s=g._renderer.offset.x/g._renderer.scale.x,o=g._renderer.offset.y/g._renderer.scale.y,a=m/g._renderer.scale.x,t.lineWidth=a,t.strokeText(this.value,s,o),t.restore()):t.strokeText(this.value,0,0))),/(underline|strikethrough)/i.test(y)){var O=t.measureText(this.value),M=1;switch(y){case"underline":d=O.actualBoundingBoxAscent,f=O.actualBoundingBoxAscent;break;case"strikethrough":d=0,f=0,M=.5}switch(R){case"top":d+=this._size*M,f+=this._size*M;break;case"baseline":case"bottom":d-=this._size*M,f-=this._size*M}switch(S){case"left":case"start":c=0,u=O.width;break;case"right":case"end":c=-O.width,u=0;break;default:c=-O.width/2,u=O.width/2}t.lineWidth=Math.max(Math.floor(this._size/15),1),t.strokeStyle=t.fillStyle,t.beginPath(),t.moveTo(c,d),t.lineTo(u,f),t.stroke()}return w||t.restore(),C&&!i&&t.clip(),k&&k.length>0&&t.setLineDash(ht),this.flagReset()}},"linear-gradient":{render:function(t){if(this._update(),!this._renderer.effect||this._flagEndPoints||this._flagStops){this._renderer.effect=t.createLinearGradient(this.left._x,this.left._y,this.right._x,this.right._y);for(var e=0;e<this.stops.length;e++){var i=this.stops[e];this._renderer.effect.addColorStop(i._offset,i._color)}}return this.flagReset()}},"radial-gradient":{render:function(t){if(this._update(),!this._renderer.effect||this._flagCenter||this._flagFocal||this._flagRadius||this._flagStops){this._renderer.effect=t.createRadialGradient(this.center._x,this.center._y,0,this.focal._x,this.focal._y,this._radius);for(var e=0;e<this.stops.length;e++){var i=this.stops[e];this._renderer.effect.addColorStop(i._offset,i._color)}}return this.flagReset()}},texture:{render:function(t){this._update();var e=this.image;return(!this._renderer.effect||(this._flagLoaded||this._flagImage||this._flagVideo||this._flagRepeat)&&this.loaded)&&(this._renderer.effect=t.createPattern(this.image,this._repeat)),(this._flagOffset||this._flagLoaded||this._flagScale)&&(this._renderer.offset instanceof A||(this._renderer.offset=new A),this._renderer.offset.x=-this._offset.x,this._renderer.offset.y=-this._offset.y,e&&(this._renderer.offset.x+=e.width/2,this._renderer.offset.y+=e.height/2,this._scale instanceof A?(this._renderer.offset.x*=this._scale.x,this._renderer.offset.y*=this._scale.y):(this._renderer.offset.x*=this._scale,this._renderer.offset.y*=this._scale))),(this._flagScale||this._flagLoaded)&&(this._renderer.scale instanceof A||(this._renderer.scale=new A),this._scale instanceof A?this._renderer.scale.copy(this._scale):this._renderer.scale.set(this._scale,this._scale)),this.flagReset()}},renderSvgArcCommand:function(t,e,i,n,r,s,o,a,l,h){a=a*Math.PI/180,n=ft(n),r=ft(r);var c=(e-l)/2,d=(i-h)/2,u=gt(a)*c+pt(a)*d,f=-pt(a)*c+gt(a)*d,p=n*n,g=r*r,m=u*u,v=f*f,y=m/p+v/g;if(y>1){var _=vt(y);p=(n*=_)*n,g=(r*=_)*r}var b=p*v+g*m,w=vt(dt(0,(p*g-b)/b));s===o&&(w=-w);var k=w*n*f/r,S=-w*r*u/n,R=gt(a)*k-pt(a)*S+(e+l)/2,C=pt(a)*k+gt(a)*S+(i+h)/2,O=wt(1,0,(u-k)/n,(f-S)/r);!function(t,e,i,n,r,s,o,a,l){var h=H.Tolerance.epsilon,c=o-s,d=Math.abs(c)<h;(c=x(c,ct))<h&&(c=d?0:ct),!0!==a||d||(c===ct?c=-ct:c-=ct);for(var u=0;u<N.Resolution;u++){var f=s+u/(N.Resolution-1)*c,p=e+n*Math.cos(f),g=i+r*Math.sin(f);if(0!==l){var m=Math.cos(l),v=Math.sin(l),y=p-e,_=g-i;p=y*m-_*v+e,g=y*v+_*m+i}t.lineTo(p,g)}}(t,R,C,n,r,O,O+wt((u-k)/n,(f-S)/r,(-u-k)/n,(-f-S)/r)%ct,0===o,a)}},bt=function(t){var e=!1!==t.smoothing;this.domElement=t.domElement||document.createElement("canvas"),this.ctx=this.domElement.getContext("2d"),this.overdraw=t.overdraw||!1,void 0!==this.ctx.imageSmoothingEnabled&&(this.ctx.imageSmoothingEnabled=e),this.scene=new at,this.scene.parent=this};function wt(t,e,i,n){var r=t*i+e*n,s=vt(t*t+e*e)*vt(i*i+n*n),o=mt(dt(-1,ut(1,r/s)));return t*n-e*i<0&&(o=-o),o}O.extend(bt,{Utils:_t}),O.extend(bt.prototype,E,{constructor:bt,setSize:function(t,e,i){return this.width=t,this.height=e,this.ratio=void 0===i?et(this.ctx):i,this.domElement.width=t*this.ratio,this.domElement.height=e*this.ratio,this.domElement.style&&O.extend(this.domElement.style,{width:t+"px",height:e+"px"}),this.trigger(E.Types.resize,t,e,i)},render:function(){var t=1===this.ratio;return t||(this.ctx.save(),this.ctx.scale(this.ratio,this.ratio)),this.overdraw||this.ctx.clearRect(0,0,this.width,this.height),_t.group.render.call(this.scene,this.ctx),t||this.ctx.restore(),this}});var xt={Image:null,isHeadless:!1,shim:function(t,e){return bt.Utils.shim(t),void 0!==e&&(xt.Image=e),xt.isHeadless=!0,t}},kt={temp:v.document?v.document.createElement("div"):{},hasEventListeners:"function"==typeof v.addEventListener,bind:function(t,e,i,n){return this.hasEventListeners?t.addEventListener(e,i,!!n):t.attachEvent("on"+e,i),kt},unbind:function(t,e,i,n){return kt.hasEventListeners?t.removeEventListeners(e,i,!!n):t.detachEvent("on"+e,i),kt},getRequestAnimationFrame:function(){var t,e=0,i=["ms","moz","webkit","o"],n=v.requestAnimationFrame;if(!n){for(var r=0;r<i.length;r++)n=v[i[r]+"RequestAnimationFrame"]||n,t=v[i[r]+"CancelAnimationFrame"]||v[i[r]+"CancelRequestAnimationFrame"]||t;n=n||function(t,i){var n=(new Date).getTime(),r=Math.max(0,16-(n-e)),s=v.setTimeout((function(){t(n+r)}),r);return e=n+r,s}}return n}},St=function(t){this.name="Two.js",this.message=t};(St.prototype=new Error).constructor=St;var Rt=function(t){var e="_"+t,i="_flag"+t.charAt(0).toUpperCase()+t.slice(1);Object.defineProperty(this,t,{enumerable:!0,get:function(){return this[e]},set:function(t){this[e]=t,this[i]=!0}})},Ct=function(){this.map={}};O.extend(Ct.prototype,{constructor:Ct,add:function(t,e){return this.map[t]=e,this},remove:function(t){return delete this.map[t],this},get:function(t){return this.map[t]},contains:function(t){return t in this.map}});var Ot=function(t,e,i){this._renderer={},this._renderer.type="stop",this.offset="number"==typeof t?t:Ot.Index<=0?0:1,this.opacity="number"==typeof i?i:1,this.color="string"==typeof e?e:Ot.Index<=0?"#fff":"#000",Ot.Index=(Ot.Index+1)%2};O.extend(Ot,{Index:0,Properties:["offset","opacity","color"],MakeObservable:function(t){O.each(Ot.Properties,(function(t){var e="_"+t,i="_flag"+t.charAt(0).toUpperCase()+t.slice(1);Object.defineProperty(this,t,{enumerable:!0,get:function(){return this[e]},set:function(t){this[e]=t,this[i]=!0,this.parent&&(this.parent._flagStops=!0)}})}),t)}}),O.extend(Ot.prototype,E,{constructor:Ot,clone:function(){var t=new Ot;return O.each(Ot.Properties,(function(e){t[e]=this[e]}),this),t},toObject:function(){var t={};return O.each(Ot.Properties,(function(e){t[e]=this[e]}),this),t},flagReset:function(){return this._flagOffset=this._flagColor=this._flagOpacity=!1,this}}),Ot.MakeObservable(Ot.prototype),Ot.prototype.constructor=Ot;var Mt=function(t){this._renderer={},this._renderer.type="gradient",this.id=N.Identifier+N.uniqueId(),this.classList=[],this._renderer.flagStops=Mt.FlagStops.bind(this),this._renderer.bindStops=Mt.BindStops.bind(this),this._renderer.unbindStops=Mt.UnbindStops.bind(this),this.spread="pad",this.stops=t};O.extend(Mt,{Stop:Ot,Properties:["spread"],MakeObservable:function(t){O.each(Mt.Properties,Rt,t),Object.defineProperty(t,"stops",{enumerable:!0,get:function(){return this._stops},set:function(t){this._renderer.flagStops;var e=this._renderer.bindStops,i=this._renderer.unbindStops;this._stops&&this._stops.unbind(E.Types.insert,e).unbind(E.Types.remove,i),this._stops=new it((t||[]).slice(0)),this._stops.bind(E.Types.insert,e).bind(E.Types.remove,i),e(this._stops)}})},FlagStops:function(){this._flagStops=!0},BindStops:function(t){for(var e=t.length;e--;)t[e].bind(E.Types.change,this._renderer.flagStops),t[e].parent=this;this._renderer.flagStops()},UnbindStops:function(t){for(var e=t.length;e--;)t[e].unbind(E.Types.change,this._renderer.flagStops),delete t[e].parent;this._renderer.flagStops()}}),O.extend(Mt.prototype,E,{_flagStops:!1,_flagSpread:!1,clone:function(t){var e=this.stops.map((function(t){return t.clone()})),i=new Mt(e);return O.each(Mt.Properties,(function(t){i[t]=this[t]}),this),t&&t.add(i),i},toObject:function(){var t={stops:this.stops.map((function(t){return t.toObject()}))};return O.each(Mt.Properties,(function(e){t[e]=this[e]}),this),t},_update:function(){return(this._flagSpread||this._flagStops)&&this.trigger(E.Types.change),this},flagReset:function(){return this._flagSpread=this._flagStops=!1,this}}),Mt.MakeObservable(Mt.prototype);var Et=function(t,e,i,n,r){Mt.call(this,r),this._renderer.type="linear-gradient";var s=Et.FlagEndPoints.bind(this);this.left=(new A).bind(E.Types.change,s),this.right=(new A).bind(E.Types.change,s),"number"==typeof t&&(this.left.x=t),"number"==typeof e&&(this.left.y=e),"number"==typeof i&&(this.right.x=i),"number"==typeof n&&(this.right.y=n)};O.extend(Et,{Stop:Ot,MakeObservable:function(t){Mt.MakeObservable(t)},FlagEndPoints:function(){this._flagEndPoints=!0}}),O.extend(Et.prototype,Mt.prototype,{_flagEndPoints:!1,constructor:Et,clone:function(t){var e=this.stops.map((function(t){return t.clone()})),i=new Et(this.left._x,this.left._y,this.right._x,this.right._y,e);return O.each(Mt.Properties,(function(t){i[t]=this[t]}),this),t&&t.add(i),i},toObject:function(){var t=Mt.prototype.toObject.call(this);return t.left=this.left.toObject(),t.right=this.right.toObject(),t},_update:function(){return(this._flagEndPoints||this._flagSpread||this._flagStops)&&this.trigger(E.Types.change),this},flagReset:function(){return this._flagEndPoints=!1,Mt.prototype.flagReset.call(this),this}}),Et.MakeObservable(Et.prototype);var At,Tt=function(t,e,i,n,r,s){Mt.call(this,n),this._renderer.type="radial-gradient",this.center=(new A).bind(E.Types.change,function(){this._flagCenter=!0}.bind(this)),this.radius="number"==typeof i?i:20,this.focal=(new A).bind(E.Types.change,function(){this._flagFocal=!0}.bind(this)),"number"==typeof t&&(this.center.x=t),"number"==typeof e&&(this.center.y=e),this.focal.copy(this.center),"number"==typeof r&&(this.focal.x=r),"number"==typeof s&&(this.focal.y=s)};O.extend(Tt,{Stop:Ot,Properties:["radius"],MakeObservable:function(t){Mt.MakeObservable(t),O.each(Tt.Properties,Rt,t)}}),O.extend(Tt.prototype,Mt.prototype,{_flagRadius:!1,_flagCenter:!1,_flagFocal:!1,constructor:Tt,clone:function(t){var e=this.stops.map((function(t){return t.clone()})),i=new Tt(this.center._x,this.center._y,this._radius,e,this.focal._x,this.focal._y);return O.each(Mt.Properties.concat(Tt.Properties),(function(t){i[t]=this[t]}),this),t&&t.add(i),i},toObject:function(){var t=Mt.prototype.toObject.call(this);return O.each(Tt.Properties,(function(e){t[e]=this[e]}),this),t.center=this.center.toObject(),t.focal=this.focal.toObject(),t},_update:function(){return(this._flagRadius||this._flatCenter||this._flagFocal||this._flagSpread||this._flagStops)&&this.trigger(E.Types.change),this},flagReset:function(){return this._flagRadius=this._flagCenter=this._flagFocal=!1,Mt.prototype.flagReset.call(this),this}}),Tt.MakeObservable(Tt.prototype);var Pt={video:/\.(mp4|webm|ogg)$/i,image:/\.(jpe?g|png|gif|tiff|webp)$/i,effect:/texture|gradient/i};v.document&&(At=document.createElement("a"));var Ft=function(t,e){if(this._renderer={},this._renderer.type="texture",this._renderer.flagOffset=Ft.FlagOffset.bind(this),this._renderer.flagScale=Ft.FlagScale.bind(this),this.id=N.Identifier+N.uniqueId(),this.classList=[],this.loaded=!1,this.repeat="no-repeat",this.offset=new A,"function"==typeof e){var i=function(){this.unbind(E.Types.load,i),"function"==typeof e&&e()}.bind(this);this.bind(E.Types.load,i)}if("string"==typeof t)this.src=t;else if("object"==typeof t){var n=Object.prototype.toString.call(t);"[object HTMLImageElement]"!==n&&"[object HTMLCanvasElement]"!==n&&"[object HTMLVideoElement]"!==n&&"[object Image]"!==n||(this.image=t)}this._update()};O.extend(Ft,{Properties:["src","loaded","repeat"],RegularExpressions:Pt,ImageRegistry:new Ct,getAbsoluteURL:function(t){return At?(At.href=t,At.href):t},loadHeadlessBuffer:function(t,e){t.image.onload=e,t.image.src=t.src},getTag:function(t){return t&&t.nodeName&&t.nodeName.toLowerCase()||"img"},getImage:function(t){var e,i=Ft.getAbsoluteURL(t);return Ft.ImageRegistry.contains(i)?Ft.ImageRegistry.get(i):(xt.Image?(e=new xt.Image,bt.Utils.shim(e,"img")):v.document?e=Pt.video.test(i)?document.createElement("video"):document.createElement("img"):console.warn("Two.js: no prototypical image defined for Two.Texture"),e.crossOrigin="anonymous",e)},Register:{canvas:function(t,e){t._src="#"+t.id,Ft.ImageRegistry.add(t.src,t.image),"function"==typeof e&&e()},img:function(t,e){var i=t.image,n=function(t){!xt.isHeadless&&i.removeEventListener&&"function"==typeof i.removeEventListener&&(i.removeEventListener("load",n,!1),i.removeEventListener("error",r,!1)),"function"==typeof e&&e()},r=function(e){throw xt.isHeadless||"function"!=typeof i.removeEventListener||(i.removeEventListener("load",n,!1),i.removeEventListener("error",r,!1)),new St("unable to load "+t.src)};"number"==typeof i.width&&i.width>0&&"number"==typeof i.height&&i.height>0?n():xt.isHeadless||"function"!=typeof i.addEventListener||(i.addEventListener("load",n,!1),i.addEventListener("error",r,!1)),t._src=Ft.getAbsoluteURL(t._src),!xt.isHeadless&&i&&i.getAttribute("two-src")||(xt.isHeadless||i.setAttribute("two-src",t.src),Ft.ImageRegistry.add(t.src,i),xt.isHeadless?Ft.loadHeadlessBuffer(t,n):t.image.src=t.src)},video:function(t,e){if(xt.isHeadless)throw new St("video textures are not implemented in headless environments.");var i=function(r){t.image.removeEventListener("canplaythrough",i,!1),t.image.removeEventListener("error",n,!1),t.image.width=t.image.videoWidth,t.image.height=t.image.videoHeight,"function"==typeof e&&e()},n=function(e){throw t.image.removeEventListener("canplaythrough",i,!1),t.image.removeEventListener("error",n,!1),new St("unable to load "+t.src)};t._src=Ft.getAbsoluteURL(t._src),t.image.getAttribute("two-src")||(t.image.setAttribute("two-src",t.src),Ft.ImageRegistry.add(t.src,t.image)),t.image.readyState>=4?i():(t.image.addEventListener("canplaythrough",i,!1),t.image.addEventListener("error",n,!1),t.image.src=t.src,t.image.load())}},load:function(t,e){t.src;var i=t.image,n=Ft.getTag(i);t._flagImage&&(/canvas/i.test(n)?Ft.Register.canvas(t,e):(t._src=!xt.isHeadless&&i.getAttribute("two-src")||i.src,Ft.Register[n](t,e))),t._flagSrc&&(i||(i=Ft.getImage(t.src),t.image=i),n=Ft.getTag(i),Ft.Register[n](t,e))},FlagOffset:function(){this._flagOffset=!0},FlagScale:function(){this._flagScale=!0},MakeObservable:function(t){O.each(Ft.Properties,Rt,t),Object.defineProperty(t,"image",{enumerable:!0,get:function(){return this._image},set:function(t){var e;switch(Ft.getTag(t)){case"canvas":e="#"+t.id;break;default:e=t.src}Ft.ImageRegistry.contains(e)?this._image=Ft.ImageRegistry.get(t.src):this._image=t,this._flagImage=!0}}),Object.defineProperty(t,"offset",{enumerable:!0,get:function(){return this._offset},set:function(t){this._offset&&this._offset.unbind(E.Types.change,this._renderer.flagOffset),this._offset=t,this._offset.bind(E.Types.change,this._renderer.flagOffset),this._flagOffset=!0}}),Object.defineProperty(t,"scale",{enumerable:!0,get:function(){return this._scale},set:function(t){this._scale instanceof A&&this._scale.unbind(E.Types.change,this._renderer.flagScale),this._scale=t,this._scale instanceof A&&this._scale.bind(E.Types.change,this._renderer.flagScale),this._flagScale=!0}})}}),O.extend(Ft.prototype,E,nt.prototype,{_flagSrc:!1,_flagImage:!1,_flagVideo:!1,_flagLoaded:!1,_flagRepeat:!1,_flagOffset:!1,_flagScale:!1,_src:"",_image:null,_loaded:!1,_repeat:"no-repeat",_scale:1,_offset:null,constructor:Ft,clone:function(){var t=new Ft(this.src);return t.repeat=this.repeat,t.offset.copy(this.origin),t.scale=this.scale,t},toObject:function(){return{src:this.src,repeat:this.repeat,origin:this.origin.toObject(),scale:"number"==typeof this.scale?this.scale:this.scale.toObject()}},_update:function(){return(this._flagSrc||this._flagImage)&&(this.trigger(E.Types.change),(this._flagSrc||this._flagImage)&&(this.loaded=!1,Ft.load(this,function(){this.loaded=!0,this.trigger(E.Types.change).trigger(E.Types.load)}.bind(this)))),this._image&&this._image.readyState>=4&&(this._flagVideo=!0),this},flagReset:function(){return this._flagSrc=this._flagImage=this._flagLoaded=this._flagVideo=this._flagScale=this._flagOffset=!1,this}}),Ft.MakeObservable(Ft.prototype);var zt=Math.min,It=Math.max,jt=Math.ceil,Dt=Math.floor,Lt=function(t,e,i,n){nt.call(this),this._renderer.type="path",this._renderer.flagVertices=Lt.FlagVertices.bind(this),this._renderer.bindVertices=Lt.BindVertices.bind(this),this._renderer.unbindVertices=Lt.UnbindVertices.bind(this),this._renderer.flagFill=Lt.FlagFill.bind(this),this._renderer.flagStroke=Lt.FlagStroke.bind(this),this._renderer.vertices=[],this._renderer.collection=[],this._closed=!!e,this._curved=!!i,this.beginning=0,this.ending=1,this.fill="#fff",this.stroke="#000",this.linewidth=1,this.opacity=1,this.className="",this.visible=!0,this.cap="butt",this.join="miter",this.miter=4,this.vertices=t,this.automatic=!n,this.dashes=[],this.dashes.offset=0};function Bt(t,e){if(0===e||1===e)return!0;for(var i=t._length*e,n=0,r=0;r<t._lengths.length;r++){var s=t._lengths[r];if(n>=i)return i-n>=0;n+=s}return!1}function Vt(t,e){var i=t._length;if(e<=0)return 0;if(e>=i)return t._lengths.length-1;for(var n=0,r=0;n<t._lengths.length;n++){if(r+t._lengths[n]>=e)return e-=r,Math.max(n-1,0)+e/t._lengths[n];r+=t._lengths[n]}return-1}function Wt(t,e,i){var n,r,s,o,a,l,h,c,d=e.controls&&e.controls.right,u=t.controls&&t.controls.left;return n=e.x,a=e.y,r=(d||e).x,l=(d||e).y,s=(u||t).x,h=(u||t).y,o=t.x,c=t.y,d&&e._relative&&(r+=e.x,l+=e.y),u&&t._relative&&(s+=t.x,h+=t.y),X(n,a,r,l,s,h,o,c,i)}function Nt(t,e,i){var n,r,s,o,a,l,h,c,d=e.controls&&e.controls.right,u=t.controls&&t.controls.left;return n=e.x,a=e.y,r=(d||e).x,l=(d||e).y,s=(u||t).x,h=(u||t).y,o=t.x,c=t.y,d&&e._relative&&(r+=e.x,l+=e.y),u&&t._relative&&(s+=t.x,h+=t.y),G(n,a,r,l,s,h,o,c,i)}O.extend(Lt,{Properties:["fill","stroke","linewidth","opacity","visible","cap","join","miter","closed","curved","automatic","beginning","ending"],Utils:{getCurveLength:Wt},FlagVertices:function(){this._flagVertices=!0,this._flagLength=!0,this.parent&&(this.parent._flagLength=!0)},BindVertices:function(t){for(var e=t.length;e--;)t[e].bind(E.Types.change,this._renderer.flagVertices);this._renderer.flagVertices()},UnbindVertices:function(t){for(var e=t.length;e--;)t[e].unbind(E.Types.change,this._renderer.flagVertices);this._renderer.flagVertices()},FlagFill:function(){this._flagFill=!0},FlagStroke:function(){this._flagStroke=!0},MakeObservable:function(t){nt.MakeObservable(t),O.each(Lt.Properties.slice(2,8),Rt,t),Object.defineProperty(t,"fill",{enumerable:!0,get:function(){return this._fill},set:function(t){(this._fill instanceof Mt||this._fill instanceof Et||this._fill instanceof Tt||this._fill instanceof Ft)&&this._fill.unbind(E.Types.change,this._renderer.flagFill),this._fill=t,this._flagFill=!0,(this._fill instanceof Mt||this._fill instanceof Et||this._fill instanceof Tt||this._fill instanceof Ft)&&this._fill.bind(E.Types.change,this._renderer.flagFill)}}),Object.defineProperty(t,"stroke",{enumerable:!0,get:function(){return this._stroke},set:function(t){(this._stroke instanceof Mt||this._stroke instanceof Et||this._stroke instanceof Tt||this._stroke instanceof Ft)&&this._stroke.unbind(E.Types.change,this._renderer.flagStroke),this._stroke=t,this._flagStroke=!0,(this._stroke instanceof Mt||this._stroke instanceof Et||this._stroke instanceof Tt||this._stroke instanceof Ft)&&this._stroke.bind(E.Types.change,this._renderer.flagStroke)}}),Object.defineProperty(t,"length",{get:function(){return this._flagLength&&this._updateLength(),this._length}}),Object.defineProperty(t,"closed",{enumerable:!0,get:function(){return this._closed},set:function(t){this._closed=!!t,this._flagVertices=!0}}),Object.defineProperty(t,"curved",{enumerable:!0,get:function(){return this._curved},set:function(t){this._curved=!!t,this._flagVertices=!0}}),Object.defineProperty(t,"automatic",{enumerable:!0,get:function(){return this._automatic},set:function(t){if(t!==this._automatic){this._automatic=!!t;var e=this._automatic?"ignore":"listen";O.each(this.vertices,(function(t){t[e]()}))}}}),Object.defineProperty(t,"beginning",{enumerable:!0,get:function(){return this._beginning},set:function(t){this._beginning=t,this._flagVertices=!0}}),Object.defineProperty(t,"ending",{enumerable:!0,get:function(){return this._ending},set:function(t){this._ending=t,this._flagVertices=!0}}),Object.defineProperty(t,"vertices",{enumerable:!0,get:function(){return this._collection},set:function(t){this._renderer.flagVertices;var e=this._renderer.bindVertices,i=this._renderer.unbindVertices;this._collection&&this._collection.unbind(E.Types.insert,e).unbind(E.Types.remove,i),this._collection=t instanceof it?t:new it(t||[]),this._collection.bind(E.Types.insert,e).bind(E.Types.remove,i),e(this._collection)}}),Object.defineProperty(t,"clip",{enumerable:!0,get:function(){return this._clip},set:function(t){this._clip=t,this._flagClip=!0}}),Object.defineProperty(t,"dashes",{enumerable:!0,get:function(){return this._dashes},set:function(t){"number"!=typeof t.offset&&(t.offset=this._dashes.offset||0),this._dashes=t}})}}),O.extend(Lt.prototype,nt.prototype,{_flagVertices:!0,_flagLength:!0,_flagFill:!0,_flagStroke:!0,_flagLinewidth:!0,_flagOpacity:!0,_flagVisible:!0,_flagCap:!0,_flagJoin:!0,_flagMiter:!0,_flagClip:!1,_length:0,_fill:"#fff",_stroke:"#000",_linewidth:1,_opacity:1,_visible:!0,_cap:"round",_join:"round",_miter:4,_closed:!0,_curved:!1,_automatic:!0,_beginning:0,_ending:1,_clip:!1,_dashes:[],constructor:Lt,clone:function(t){for(var e=new Lt,i=0;i<this.vertices.length;i++)e.vertices.push(this.vertices[i].clone());for(var n=0;n<Lt.Properties.length;n++){var r=Lt.Properties[n];e[r]=this[r]}return e.className=this.className,e.translation.copy(this.translation),e.rotation=this.rotation,e.scale=this.scale,this.matrix.manual&&e.matrix.copy(this.matrix),t&&t.add(e),e._update()},toObject:function(){var t={vertices:this.vertices.map((function(t){return t.toObject()}))};return O.each(Lt.Properties,(function(e){t[e]=this[e]}),this),t.className=this.className,t.translation=this.translation.toObject(),t.rotation=this.rotation,t.scale=this.scale instanceof A?this.scale.toObject():this.scale,this.matrix.manual&&(t.matrix=this.matrix.toObject()),t},noFill:function(){return this.fill="transparent",this},noStroke:function(){return this.stroke=void 0,this},corner:function(){var t=this.getBoundingClientRect(!0);return t.centroid={x:t.left+t.width/2,y:t.top+t.height/2},O.each(this.vertices,(function(e){e.subSelf(t.centroid),e.x+=t.width/2,e.y+=t.height/2})),this},center:function(){var t=this.getBoundingClientRect(!0);return t.centroid={x:t.left+t.width/2-this.translation.x,y:t.top+t.height/2-this.translation.y},O.each(this.vertices,(function(e){e.subSelf(t.centroid)})),this},remove:function(){return this.parent?(this.parent.remove(this),this):this},getBoundingClientRect:function(t){var e,i,n,r,s,o,a,l,h=1/0,c=-1/0,d=1/0,u=-1/0;if(this._update(!0),e=t?this._matrix:b(this),i=this.linewidth/2,(n=this._renderer.vertices.length)<=0)return{width:0,height:0};for(r=0;r<n;r++)if(l=this._renderer.vertices[r],(s=this._renderer.vertices[(r+n-1)%n]).controls&&l.controls){o=s.relative?e.multiply(s.controls.right.x+s.x,s.controls.right.y+s.y,1):e.multiply(s.controls.right.x,s.controls.right.y,1),s=e.multiply(s.x,s.y,1),a=l.relative?e.multiply(l.controls.left.x+l.x,l.controls.left.y+l.y,1):e.multiply(l.controls.left.x,l.controls.left.y,1),l=e.multiply(l.x,l.y,1);var f=Y(s.x,s.y,o.x,o.y,a.x,a.y,l.x,l.y);d=zt(f.min.y-i,d),h=zt(f.min.x-i,h),c=It(f.max.x+i,c),u=It(f.max.y+i,u)}else r<=1&&(s=e.multiply(s.x,s.y,1),d=zt(s.y-i,d),h=zt(s.x-i,h),c=It(s.x+i,c),u=It(s.y+i,u)),l=e.multiply(l.x,l.y,1),d=zt(l.y-i,d),h=zt(l.x-i,h),c=It(l.x+i,c),u=It(l.y+i,u);return{top:d,left:h,right:c,bottom:u,width:c-h,height:u-d}},getPointAt:function(t,e){for(var i,n,r,s,o,a,l,h,c,d,u,f,p,m,v,y=this.length*Math.min(Math.max(t,0),1),_=this.vertices.length,b=_-1,k=null,S=null,R=0,C=this._lengths.length,M=0;R<C;R++){if(M+this._lengths[R]>=y){this._closed?(i=x(R,_),n=x(R-1,_),0===R&&(i=n,n=R)):(i=R,n=Math.min(Math.max(R-1,0),b)),k=this.vertices[i],S=this.vertices[n],y-=M,t=0!==this._lengths[R]?y/this._lengths[R]:0;break}M+=this._lengths[R]}if(null===k||null===S)return null;if(!k)return S;if(!S)return k;v=S.controls&&S.controls.right,m=k.controls&&k.controls.left,o=S.x,d=S.y,a=(v||S).x,u=(v||S).y,l=(m||k).x,f=(m||k).y,h=k.x,p=k.y,v&&S.relative&&(a+=S.x,u+=S.y),m&&k.relative&&(l+=k.x,f+=k.y),s=q(t,o,a,l,h),c=q(t,d,u,f,p);var E=w(o,a,t),A=w(d,u,t),T=w(a,l,t),P=w(u,f,t),F=w(l,h,t),I=w(f,p,t),j=w(E,T,t),D=w(A,P,t),L=w(T,F,t),B=w(P,I,t);return O.isObject(e)?(e.x=s,e.y=c,O.isObject(e.controls)||z.AppendCurveProperties(e),e.controls.left.x=j,e.controls.left.y=D,e.controls.right.x=L,e.controls.right.y=B,("boolean"===(e.relative,!1)||e.relative)&&(e.controls.left.x-=s,e.controls.left.y-=c,e.controls.right.x-=s,e.controls.right.y-=c),e.t=t,e):((r=new z(s,c,j-s,D-c,L-s,B-c,this._curved?g.curve:g.line)).t=t,r)},plot:function(){if(this.curved)return K(this._collection,this.closed),this;for(var t=0;t<this._collection.length;t++)this._collection[t].command=0===t?g.move:g.line;return this},subdivide:function(t){this._update();var e=this.vertices.length-1,i=this.vertices[e],n=this._closed||this.vertices[e]._command===g.close,r=[];return O.each(this.vertices,(function(s,o){if(o<=0&&!n)i=s;else{if(s.command===g.move)return r.push(new z(i.x,i.y)),o>0&&(r[r.length-1].command=g.line),void(i=s);var a=Nt(s,i,t);r=r.concat(a),O.each(a,(function(t,e){e<=0&&i.command===g.move?t.command=g.move:t.command=g.line})),o>=e&&(this._closed&&this._automatic?(a=Nt(s,i=s,t),r=r.concat(a),O.each(a,(function(t,e){e<=0&&i.command===g.move?t.command=g.move:t.command=g.line}))):n&&r.push(new z(s.x,s.y)),r[r.length-1].command=n?g.close:g.line),i=s}}),this),this._automatic=!1,this._curved=!1,this.vertices=r,this},_updateLength:function(t,e){e||this._update();var i=this.vertices.length-1,n=this.vertices[i],r=0;return void 0===this._lengths&&(this._lengths=[]),O.each(this.vertices,(function(e,i){if(i<=0||e.command===g.move)return n=e,void(this._lengths[i]=0);this._lengths[i]=Wt(e,n,t),r+=this._lengths[i],n=e}),this),this._length=r,this._flagLength=!1,this},_update:function(){if(this._flagVertices){this._automatic&&this.plot(),this._flagLength&&this._updateLength(void 0,!0);var t,e,i,n,r,s=this._collection.length,o=this._closed,a=Math.min(this._beginning,this._ending),l=Math.max(this._beginning,this._ending),h=Vt(this,a*this._length),c=Vt(this,l*this._length),d=jt(h),u=Dt(c);this._renderer.vertices.length=0;for(var f=0;f<s;f++)this._renderer.collection.length<=f&&this._renderer.collection.push(new z),f>u&&!e?((r=this._renderer.collection[f]).copy(this._collection[f]),this.getPointAt(l,r),r.command=this._renderer.collection[f].command,this._renderer.vertices.push(r),e=r,(i=this._collection[f-1])&&i.controls&&(r.controls.right.clear(),this._renderer.collection[f-1].controls.right.clear().lerp(i.controls.right,r.t))):f>=d&&f<=u&&(r=this._renderer.collection[f].copy(this._collection[f]),this._renderer.vertices.push(r),f===u&&Bt(this,l)?(e=r,!o&&e.controls&&e.controls.right.clear()):f===d&&Bt(this,a)&&((t=r).command=g.move,!o&&t.controls&&t.controls.left.clear()));d>0&&!t&&(f=d-1,(r=this._renderer.collection[f]).copy(this._collection[f]),this.getPointAt(a,r),r.command=g.move,this._renderer.vertices.unshift(r),t=r,(n=this._collection[f+1])&&n.controls&&(r.controls.left.clear(),this._renderer.collection[f+1].controls.left.copy(n.controls.left).lerp(A.zero,r.t)))}return nt.prototype._update.apply(this,arguments),this},flagReset:function(){return this._flagVertices=this._flagFill=this._flagStroke=this._flagLinewidth=this._flagOpacity=this._flagVisible=this._flagCap=this._flagJoin=this._flagMiter=this._flagClip=!1,nt.prototype.flagReset.call(this),this}}),Lt.MakeObservable(Lt.prototype);var Ut=2*Math.PI,Ht=Math.PI/2,qt=Math.cos,Gt=Math.sin,Xt=function(t,e,i,n){for(var r=n?Math.max(n,2):4,s=[],o=0;o<r;o++)s.push(new z);Lt.call(this,s,!0,!0,!0),this.radius=i,this._update(),"number"==typeof t&&(this.translation.x=t),"number"==typeof e&&(this.translation.y=e)};O.extend(Xt,{Properties:["radius"],MakeObservable:function(t){Lt.MakeObservable(t),O.each(Xt.Properties,Rt,t)}}),O.extend(Xt.prototype,Lt.prototype,{_flagRadius:!1,_radius:0,constructor:Xt,_update:function(){if(this._flagRadius)for(var t=4/3*Math.tan(Math.PI/(2*this.vertices.length)),e=this._radius,i=e*t,n=0,r=this.vertices.length;n<r;n++){var s=n/r*Ut,o=e*qt(s),a=e*Gt(s),l=i*qt(s-Ht),h=i*Gt(s-Ht),c=i*qt(s+Ht),d=i*Gt(s+Ht),u=this.vertices[n];u.command=g.curve,u.set(o,a),u.controls.left.set(l,h),u.controls.right.set(c,d)}return Lt.prototype._update.call(this),this},flagReset:function(){return this._flagRadius=!1,Lt.prototype.flagReset.call(this),this},clone:function(t){var e=new Xt(0,0,this.radius,this.vertices.length);return e.translation.copy(this.translation),e.rotation=this.rotation,e.scale=this.scale,this.matrix.manual&&e.matrix.copy(this.matrix),O.each(Lt.Properties,(function(t){e[t]=this[t]}),this),t&&t.add(e),e},toObject:function(){var t=Lt.prototype.toObject.call(this);return O.each(Xt.Properties,(function(e){t[e]=this[e]}),this),t}}),Xt.MakeObservable(Xt.prototype);var Yt=2*Math.PI,Zt=Math.PI/2,Kt=Math.cos,$t=Math.sin,Jt=function(t,e,i,n,r){"number"!=typeof n&&(n=i);for(var s=r?Math.max(r,2):4,o=[],a=0;a<s;a++)o.push(new z);Lt.call(this,o,!0,!0,!0),this.width=2*i,this.height=2*n,this._update(),this.translation.set(t,e)};O.extend(Jt,{Properties:["width","height"],MakeObservable:function(t){Lt.MakeObservable(t),O.each(Jt.Properties,Rt,t)}}),O.extend(Jt.prototype,Lt.prototype,{_flagWidth:!1,_flagHeight:!1,_width:0,_height:0,constructor:Jt,_update:function(){if(this._flagWidth||this._flagHeight)for(var t=4/3*Math.tan(Math.PI/(2*this.vertices.length)),e=this._width/2,i=this._height/2,n=0,r=this.vertices.length;n<r;n++){var s=n/r*Yt,o=e*Kt(s),a=i*$t(s),l=e*t*Kt(s-Zt),h=i*t*$t(s-Zt),c=e*t*Kt(s+Zt),d=i*t*$t(s+Zt),u=this.vertices[n];u.command=g.curve,u.set(o,a),u.controls.left.set(l,h),u.controls.right.set(c,d)}return Lt.prototype._update.call(this),this},flagReset:function(){return this._flagWidth=this._flagHeight=!1,Lt.prototype.flagReset.call(this),this},clone:function(t){var e=this.width/2,i=this.height/2,n=this.vertices.length,r=new Jt(0,0,e,i,n);return r.translation.copy(this.translation),r.rotation=this.rotation,r.scale=this.scale,this.matrix.manual&&r.matrix.copy(this.matrix),O.each(Lt.Properties,(function(t){r[t]=this[t]}),this),t&&t.add(r),r},toObject:function(){var t=Lt.prototype.toObject.call(this);return O.each(Jt.Properties,(function(e){t[e]=this[e]}),this),t}}),Jt.MakeObservable(Jt.prototype);var Qt=function(t,e,i,n){Lt.call(this,[new z(t,e),new z(i,n)]),this.vertices[0].command=g.move,this.vertices[1].command=g.line,this.automatic=!1};O.extend(Qt.prototype,Lt.prototype),Qt.prototype.constructor=Qt,Lt.MakeObservable(Qt.prototype);var te=function(t,e,i,n){Lt.call(this,[new z,new z,new z,new z],!0,!1,!0),this.width=i,this.height=n,this.origin=new A,this.translation.set(t,e),this._update()};O.extend(te,{Properties:["width","height"],MakeObservable:function(t){Lt.MakeObservable(t),O.each(te.Properties,Rt,t),Object.defineProperty(t,"origin",{enumerable:!0,get:function(){return this._origin},set:function(t){this._origin&&this._origin.unbind(E.Types.change,this._renderer.flagVertices),this._origin=t,this._origin.bind(E.Types.change,this._renderer.flagVertices),this._renderer.flagVertices()}})}}),O.extend(te.prototype,Lt.prototype,{_flagWidth:0,_flagHeight:0,_width:0,_height:0,_origin:null,constructor:te,_update:function(){if(this._flagWidth||this._flagHeight){var t=this._width/2,e=this._height/2;this.vertices[0].set(-t,-e).add(this._origin).command=g.move,this.vertices[1].set(t,-e).add(this._origin).command=g.line,this.vertices[2].set(t,e).add(this._origin).command=g.line,this.vertices[3].set(-t,e).add(this._origin).command=g.line,this.vertices[4]&&(this.vertices[4].set(-t,-e).add(this._origin).command=g.line)}return Lt.prototype._update.call(this),this},flagReset:function(){return this._flagWidth=this._flagHeight=!1,Lt.prototype.flagReset.call(this),this},clone:function(t){var e=new te(0,0,this.width,this.height);return e.translation.copy(this.translation),e.rotation=this.rotation,e.scale=this.scale,this.matrix.manual&&e.matrix.copy(this.matrix),O.each(Lt.Properties,(function(t){e[t]=this[t]}),this),t&&t.add(e),e},toObject:function(){var t=Lt.prototype.toObject.call(this);return t.width=this.width,t.height=this.height,t.origin=this.origin.toObject(),t}}),te.MakeObservable(te.prototype);var ee=function(t,e,i,n,r){void 0===r&&(r=Math.floor(Math.min(i,n)/12));for(var s=[],o=0;o<10;o++)s.push(new z(0,0,0,0,0,0,0===o?g.move:g.curve));Lt.call(this,s),this.closed=!0,this.automatic=!1,this._renderer.flagRadius=ee.FlagRadius.bind(this),this.width=i,this.height=n,this.radius=r,this._update(),this.translation.set(t,e)};O.extend(ee,{Properties:["width","height"],FlagRadius:function(){this._flagRadius=!0},MakeObservable:function(t){Lt.MakeObservable(t),O.each(ee.Properties,Rt,t),Object.defineProperty(t,"radius",{enumerable:!0,get:function(){return this._radius},set:function(t){this._radius instanceof A&&this._radius.unbind(E.Types.change,this._renderer.flagRadius),this._radius=t,this._radius instanceof A&&this._radius.bind(E.Types.change,this._renderer.flagRadius),this._flagRadius=!0}})}}),O.extend(ee.prototype,Lt.prototype,{_flagWidth:!1,_flagHeight:!1,_flagRadius:!1,_width:0,_height:0,_radius:0,constructor:ee,_update:function(){if(this._flagWidth||this._flagHeight||this._flagRadius){var t,e,i,n=this._width,r=this._height;this._radius instanceof A?(t=this._radius.x,e=this._radius.y):(t=this._radius,e=this._radius);var s=n/2,o=r/2;(i=this.vertices[0]).x=-(s-t),i.y=-o,(i=this.vertices[1]).x=s-t,i.y=-o,i.controls.left.clear(),i.controls.right.x=t,i.controls.right.y=0,(i=this.vertices[2]).x=s,i.y=-(o-e),i.controls.right.clear(),i.controls.left.clear(),(i=this.vertices[3]).x=s,i.y=o-e,i.controls.left.clear(),i.controls.right.x=0,i.controls.right.y=e,(i=this.vertices[4]).x=s-t,i.y=o,i.controls.right.clear(),i.controls.left.clear(),(i=this.vertices[5]).x=-(s-t),i.y=o,i.controls.left.clear(),i.controls.right.x=-t,i.controls.right.y=0,(i=this.vertices[6]).x=-s,i.y=o-e,i.controls.left.clear(),i.controls.right.clear(),(i=this.vertices[7]).x=-s,i.y=-(o-e),i.controls.left.clear(),i.controls.right.x=0,i.controls.right.y=-e,(i=this.vertices[8]).x=-(s-t),i.y=-o,i.controls.left.clear(),i.controls.right.clear(),(i=this.vertices[9]).copy(this.vertices[8])}return Lt.prototype._update.call(this),this},flagReset:function(){return this._flagWidth=this._flagHeight=this._flagRadius=!1,Lt.prototype.flagReset.call(this),this},clone:function(t){var e=this.width,i=this.height,n=this.radius,r=new ee(0,0,e,i,n);return r.translation.copy(this.translation),r.rotation=this.rotation,r.scale=this.scale,this.matrix.manual&&r.matrix.copy(this.matrix),O.each(Lt.Properties,(function(t){r[t]=this[t]}),this),t&&t.add(r),r},toObject:function(){var t=Lt.prototype.toObject.call(this);return O.each(ee.Properties,(function(e){t[e]=this[e]}),this),t.radius="number"==typeof this.radius?this.radius:this.radius.toObject(),t}}),ee.MakeObservable(ee.prototype);var ie=function(t,e,i,n){if(nt.call(this),this._renderer.type="text",this._renderer.flagFill=ie.FlagFill.bind(this),this._renderer.flagStroke=ie.FlagStroke.bind(this),this.value=t,"number"==typeof e&&(this.translation.x=e),"number"==typeof i&&(this.translation.y=i),this.dashes=[],this.dashes.offset=0,!O.isObject(n))return this;O.each(ie.Properties,(function(t){t in n&&(this[t]=n[t])}),this)};O.extend(ie,{Ratio:.6,Properties:["value","family","size","leading","alignment","linewidth","style","weight","decoration","baseline","opacity","visible","className","fill","stroke"],FlagFill:function(){this._flagFill=!0},FlagStroke:function(){this._flagStroke=!0},MakeObservable:function(t){nt.MakeObservable(t),O.each(ie.Properties.slice(0,12),Rt,t),Object.defineProperty(t,"fill",{enumerable:!0,get:function(){return this._fill},set:function(t){(this._fill instanceof Mt||this._fill instanceof Et||this._fill instanceof Tt||this._fill instanceof Ft)&&this._fill.unbind(E.Types.change,this._renderer.flagFill),this._fill=t,this._flagFill=!0,(this._fill instanceof Mt||this._fill instanceof Et||this._fill instanceof Tt||this._fill instanceof Ft)&&this._fill.bind(E.Types.change,this._renderer.flagFill)}}),Object.defineProperty(t,"stroke",{enumerable:!0,get:function(){return this._stroke},set:function(t){(this._stroke instanceof Mt||this._stroke instanceof Et||this._stroke instanceof Tt||this._stroke instanceof Ft)&&this._stroke.unbind(E.Types.change,this._renderer.flagStroke),this._stroke=t,this._flagStroke=!0,(this._stroke instanceof Mt||this._stroke instanceof Et||this._stroke instanceof Tt||this._stroke instanceof Ft)&&this._stroke.bind(E.Types.change,this._renderer.flagStroke)}}),Object.defineProperty(t,"clip",{enumerable:!0,get:function(){return this._clip},set:function(t){this._clip=t,this._flagClip=!0}}),Object.defineProperty(t,"dashes",{enumerable:!0,get:function(){return this._dashes},set:function(t){"number"!=typeof t.offset&&(t.offset=this._dashes.offset||0),this._dashes=t}})}}),O.extend(ie.prototype,nt.prototype,{_flagValue:!0,_flagFamily:!0,_flagSize:!0,_flagLeading:!0,_flagAlignment:!0,_flagBaseline:!0,_flagStyle:!0,_flagWeight:!0,_flagDecoration:!0,_flagFill:!0,_flagStroke:!0,_flagLinewidth:!0,_flagOpacity:!0,_flagClassName:!0,_flagVisible:!0,_flagClip:!1,_value:"",_family:"sans-serif",_size:13,_leading:17,_alignment:"center",_baseline:"middle",_style:"normal",_weight:500,_decoration:"none",_fill:"#000",_stroke:"transparent",_linewidth:1,_opacity:1,_className:"",_visible:!0,_clip:!1,_dashes:[],constructor:ie,remove:function(){return this.parent?(this.parent.remove(this),this):this},clone:function(t){var e=new ie(this.value);return e.translation.copy(this.translation),e.rotation=this.rotation,e.scale=this.scale,O.each(ie.Properties,(function(t){e[t]=this[t]}),this),this.matrix.manual&&e.matrix.copy(this.matrix),t&&t.add(e),e._update()},toObject:function(){var t={translation:this.translation.toObject(),rotation:this.rotation,scale:this.scale};return this.matrix.manual&&(t.matrix=this.matrix.toObject()),O.each(ie.Properties,(function(e){t[e]=this[e]}),this),t},noFill:function(){return this.fill="transparent",this},noStroke:function(){return this.stroke=void 0,this.linewidth=void 0,this},getBoundingClientRect:function(t){var e,i,n,r,s,o;this._update(!0),e=t?this._matrix:b(this);var a=this.leading,l=this.value.length*this.size*ie.Ratio;switch(this.alignment){case"left":n=0,r=l;break;case"right":n=-l,r=0;break;default:n=-l/2,r=l/2}switch(this.baseline){case"top":s=0,o=a;break;case"bottom":s=-a,o=0;break;default:s=-a/2,o=a/2}return{top:s=(i=e.multiply(n,s,1)).y,left:n=i.x,right:r=(i=e.multiply(r,o,1)).x,bottom:o=i.y,width:r-n,height:o-s}},flagReset:function(){return this._flagValue=this._flagFamily=this._flagSize=this._flagLeading=this._flagAlignment=this._flagFill=this._flagStroke=this._flagLinewidth=this._flagOpacity=this._flagVisible=this._flagClip=this._flagDecoration=this._flagClassName=this._flagBaseline=this._flagWeight=this._flagStyle=!1,nt.prototype.flagReset.call(this),this}}),ie.MakeObservable(ie.prototype);var ne={start:"left",middle:"center",end:"right"},re=function(t,e){var i,n,r,s;e||(e={}),i=t.split(";");for(var o=0;o<i.length;o++)r=(n=i[o].split(":"))[0],s=n[1],void 0!==r&&void 0!==s&&(e[r]=s.replace(/\s/,""));return e},se=function(t){for(var e={},i=oe(t),n=Math.max(i.length,t.style.length),r=0;r<n;r++){var s=t.style[r],o=i[r];s&&(e[s]=t.style[s]),o&&(e[o]=t.getAttribute(o))}return e},oe=function(t){for(var e=t.getAttributeNames(),i=["id","class","transform","xmlns","viewBox"],n=0;n<i.length;n++){var r=i[n],s=Array.prototype.indexOf.call(e,r);s>=0&&e.splice(s,1)}return e},ae=function(t,e){var i=e.split(/\s/),n=parseFloat(i[0]),r=parseFloat(i[1]),s=parseFloat(i[2]),o=parseFloat(i[3]),a=Math.min(this.width/s,this.height/o);return t.translation.x-=n*a,t.translation.y-=r*a,t.scale=a,t},le=function(t,e,i){var n,r,s,o,a={},l={},h={};if(v.getComputedStyle){var c=v.getComputedStyle(t);for(n=c.length;n--;)void 0!==(s=c[r=c[n]])&&(a[r]=s)}for(n=0;n<t.attributes.length;n++)o=t.attributes[n],/style/i.test(o.nodeName)?re(o.value,h):l[o.nodeName]=o.value;for(r in void 0!==a.opacity&&(a["stroke-opacity"]=a.opacity,a["fill-opacity"]=a.opacity,delete a.opacity),i&&O.defaults(a,i),O.extend(a,h,l),a.visible=!(void 0===a.display&&/none/i.test(a.display))||void 0===a.visibility&&/hidden/i.test(a.visibility),a)switch(s=a[r],r){case"transform":if(/none/i.test(s))break;if(null===(p=t.transform&&t.transform.baseVal&&t.transform.baseVal.length>0?t.transform.baseVal[0].matrix:t.getCTM?t.getCTM():null))break;if(N.AutoCalculateImportedMatrices){var d=y(p);e.translation.set(d.translateX,d.translateY),e.rotation=Math.PI*(d.rotation/180),e.scale=new A(d.scaleX,d.scaleY);var u=parseFloat((a.x+"").replace("px")),f=parseFloat((a.y+"").replace("px"));u&&(e.translation.x=u),f&&(e.translation.y=f)}else{var p=t.getCTM();e._matrix.manual=!0,e._matrix.set(p.a,p.b,p.c,p.d,p.e,p.f)}break;case"viewBox":ae.call(this,e,s);break;case"visible":if(e instanceof at){e._visible=s;break}e.visible=s;break;case"stroke-linecap":if(e instanceof at){e._cap=s;break}e.cap=s;break;case"stroke-linejoin":if(e instanceof at){e._join=s;break}e.join=s;break;case"stroke-miterlimit":if(e instanceof at){e._miter=s;break}e.miter=s;break;case"stroke-width":if(e instanceof at){e._linewidth=parseFloat(s);break}e.linewidth=parseFloat(s);break;case"opacity":case"stroke-opacity":case"fill-opacity":if(e instanceof at){e._opacity=parseFloat(s);break}e.opacity=parseFloat(s);break;case"fill":case"stroke":if(e instanceof at&&(r="_"+r),/url\(#.*\)/i.test(s)){var g=ce(this);e[r]=g.getById(s.replace(/url\(#(.*)\)/i,"$1"))}else e[r]=/none/i.test(s)?"transparent":s;break;case"id":e.id=s,t.id=s+"-"+N.Identifier+"applied";break;case"class":case"className":e.classList=s.split(" ");break;case"x":case"y":if(e instanceof Mt||e instanceof Et||e instanceof Tt)break;if(s.match("[a-z%]$")&&!s.endsWith("px")){var m=new St("only pixel values are supported with the "+r+" attribute.");console.warn(m.name,m.message)}e.translation[r]=parseFloat(s);break;case"font-family":e instanceof ie&&(e.family=s);break;case"font-size":e instanceof ie&&(e.size=s);break;case"font-weight":e instanceof ie&&(e.weight=s);break;case"font-style":e instanceof ie&&(e.style=s);break;case"text-decoration":e instanceof ie&&(e.decoration=s);break;case"line-height":e instanceof ie&&(e.leading=s)}return a},he=function(t,e){for(var i=0,n=t.childNodes.length;i<n;i++){var r=t.childNodes[i];r.id&&"#text"!==r.localName&&e.add(r.id,r)}},ce=function(t){for(;t.parent;)t=t.parent;return t.scene},de={svg:function(t){for(var e=de.defs.current=new Ct,i=t.getElementsByTagName("defs"),n=0;n<i.length;n++)he(i[n],e);var r=de.g.call(this,t);return t.getAttribute("viewBox"),r.defs=e,delete de.defs.current,r},defs:function(t){return null},use:function(t,e){var i=t.getAttribute("href")||t.getAttribute("xlink:href");if(!i){var n=new St("encountered <use /> with no href.");return console.warn(n.name,n.message),null}var r=i.slice(1);if(!de.defs.current.contains(r))return n=new St("unable to find element for reference "+i+"."),console.warn(n.name,n.message),null;for(var s=de.defs.current.get(r).cloneNode(!0),o=["x","y","width","height","href","xlink:href"],a=0;a<t.attributes.length;a++){var l=t.attributes[a],h=o.includes(l.nodeName),c=!s.hasAttribute(l.nodeName);(h||c)&&s.setAttribute(l.nodeName,l.value)}var d=s.localName;return de[d].call(this,s,e)},g:function(t,e){var i,n=new at;le.call(this,t,n,e),this.add(n),i=se.call(this,t);for(var r=0,s=t.childNodes.length;r<s;r++){var o=t.childNodes[r],a=o.nodeName;if(!a)return;var l=a.replace(/svg:/gi,"").toLowerCase();if(l in de){var h=de[l].call(n,o,i);h&&!h.parent&&n.add(h)}}return n},polygon:function(t,e){var i=t.getAttribute("points"),n=[];i.replace(/(-?[\d.?]+)[,|\s](-?[\d.?]+)/g,(function(t,e,i){n.push(new z(parseFloat(e),parseFloat(i)))}));var r=new Lt(n,!0).noStroke();return r.fill="black",le.call(this,t,r,e),r},polyline:function(t,e){var i=de.polygon.call(this,t,e);return i.closed=!1,i},path:function(t,e){var i=t.getAttribute("d"),n=[],r=!1,s=!1;if(i){var o,a,l=new z,h=i.match(/[a-df-z][^a-df-z]*/gi),c=h.length-1;O.each(h.slice(0),(function(t,e){var i,n,r,s,o,a,l,c,d,u=(t=function(t){var e=t.match(/[\+\-]?[\d\.]*e[\-\+]?\d*/gi);if(e&&e.length>0)for(var i=0;i<e.length;i++){var n=e[i],r=n.split(/e/i),s=parseFloat(r[0]),o=Math.pow(10,parseFloat(r[1]));o<0?s/=o:s*=o,t=t.replace(n,s)}return t}(t))[0],f=u.toLowerCase(),p=t.slice(1).trim().split(/[\s,]+|(?=\s?[+-])/),g=[],m=!1;for(o=0;o<p.length;o++)if((i=p[o]).indexOf(".")!==i.lastIndexOf(".")){for(r=(n=i.split("."))[0]+"."+n[1],p.splice(o,1,r),s=2;s<n.length;s++)p.splice(o+s-1,0,"0."+n[s]);m=!0}switch(m&&(t=u+p.join(",")),e<=0&&(h=[]),f){case"h":case"v":p.length>1&&(d=1);break;case"m":case"l":case"t":p.length>2&&(d=2);break;case"s":case"q":p.length>4&&(d=4);break;case"c":p.length>6&&(d=6);break;case"a":p.length>7&&(d=7)}if(d){for(o=0,l=p.length,c=0;o<l;o+=d){if(a=u,c>0)switch(u){case"m":a="l";break;case"M":a="L"}g.push(a+p.slice(o,o+d).join(" ")),c++}h=Array.prototype.concat.apply(h,g)}else h.push(t)})),O.each(h,(function(t,e){var i,h,d,u,f,p,m,v,y,_,b,w,x=t[0],k=x.toLowerCase();switch(a=(a=(a=t.slice(1).trim()).replace(/(-?\d+(?:\.\d*)?)[eE]([+-]?\d+)/g,(function(t,e,i){return parseFloat(e)*Math.pow(10,i)}))).split(/[\s,]+|(?=\s?[+-])/),s=x===k,k){case"z":if(e>=c)r=!0;else{h=l.x,d=l.y,i=new z(h,d,void 0,void 0,void 0,void 0,g.close);for(var S=n.length-1;S>=0;S--){var R=n[S];if(/m/i.test(R.command)){l=R;break}}}break;case"m":case"l":o=void 0,h=parseFloat(a[0]),d=parseFloat(a[1]),i=new z(h,d,void 0,void 0,void 0,void 0,/m/i.test(k)?g.move:g.line),s&&i.addSelf(l),l=i;break;case"h":case"v":var C=/h/i.test(k)?"x":"y",M=/x/i.test(C)?"y":"x";(i=new z(void 0,void 0,void 0,void 0,void 0,void 0,g.line))[C]=parseFloat(a[0]),i[M]=l[M],s&&(i[C]+=l[C]),l=i;break;case"c":case"s":u=l.x,f=l.y,o||(o=new A),/c/i.test(k)?(p=parseFloat(a[0]),m=parseFloat(a[1]),v=parseFloat(a[2]),y=parseFloat(a[3]),_=parseFloat(a[4]),b=parseFloat(a[5])):(p=(w=J(l,o,s)).x,m=w.y,v=parseFloat(a[0]),y=parseFloat(a[1]),_=parseFloat(a[2]),b=parseFloat(a[3])),s&&(p+=u,m+=f,v+=u,y+=f,_+=u,b+=f),O.isObject(l.controls)||z.AppendCurveProperties(l),l.controls.right.set(p-l.x,m-l.y),i=new z(_,b,v-_,y-b,void 0,void 0,g.curve),l=i,o=i.controls.left;break;case"t":case"q":u=l.x,f=l.y,o||(o=new A),/q/i.test(k)?(p=parseFloat(a[0]),m=parseFloat(a[1]),v=parseFloat(a[0]),y=parseFloat(a[1]),_=parseFloat(a[2]),b=parseFloat(a[3])):(p=(w=J(l,o,s)).x,m=w.y,v=w.x,y=w.y,_=parseFloat(a[0]),b=parseFloat(a[1])),s&&(p+=u,m+=f,v+=u,y+=f,_+=u,b+=f),O.isObject(l.controls)||z.AppendCurveProperties(l),l.controls.right.set(.33*(p-l.x),.33*(m-l.y)),i=new z(_,b,v-_,y-b,void 0,void 0,g.curve),l=i,o=i.controls.left;break;case"a":u=l.x,f=l.y;var E=parseFloat(a[0]),T=parseFloat(a[1]),P=parseFloat(a[2]),F=parseFloat(a[3]),I=parseFloat(a[4]);_=parseFloat(a[5]),b=parseFloat(a[6]),s&&(_+=u,b+=f);var j=new z(_,b);j.command=g.arc,j.rx=E,j.ry=T,j.xAxisRotation=P,j.largeArcFlag=F,j.sweepFlag=I,i=j,l=j,o=void 0}i&&(Array.isArray(i)?n=n.concat(i):n.push(i))}))}(i=new Lt(n,r,void 0,!0).noStroke()).fill="black";var d=i.getBoundingClientRect(!0);return d.centroid={x:d.left+d.width/2,y:d.top+d.height/2},O.each(i.vertices,(function(t){t.subSelf(d.centroid)})),le.call(this,t,i,e),i.translation.addSelf(d.centroid),i},circle:function(t,e){var i=parseFloat(t.getAttribute("cx")),n=parseFloat(t.getAttribute("cy")),r=parseFloat(t.getAttribute("r")),s=new Xt(0,0,r).noStroke();return s.fill="black",le.call(this,t,s,e),s.translation.x=i,s.translation.y=n,s},ellipse:function(t,e){var i=parseFloat(t.getAttribute("cx")),n=parseFloat(t.getAttribute("cy")),r=parseFloat(t.getAttribute("rx")),s=parseFloat(t.getAttribute("ry")),o=new Jt(0,0,r,s).noStroke();return o.fill="black",le.call(this,t,o,e),o.translation.x=i,o.translation.y=n,o},rect:function(t,e){var i=parseFloat(t.getAttribute("rx")),n=parseFloat(t.getAttribute("ry"));if(!O.isNaN(i)||!O.isNaN(n))return de["rounded-rect"](t);parseFloat(t.getAttribute("x")),parseFloat(t.getAttribute("y"));var r=parseFloat(t.getAttribute("width")),s=parseFloat(t.getAttribute("height")),o=r/2,a=s/2,l=new te(0,0,r,s).noStroke();return l.fill="black",le.call(this,t,l,e),l.translation.x+=o,l.translation.y+=a,l},"rounded-rect":function(t,e){parseFloat(t.getAttribute("x")),parseFloat(t.getAttribute("y"));var i=parseFloat(t.getAttribute("rx"))||0,n=parseFloat(t.getAttribute("ry"))||0,r=parseFloat(t.getAttribute("width")),s=parseFloat(t.getAttribute("height")),o=r/2,a=s/2,l=new A(i,n),h=new ee(0,0,r,s,l).noStroke();return h.fill="black",le.call(this,t,h,e),h.translation.x+=o,h.translation.y+=a,h},line:function(t,e){var i=parseFloat(t.getAttribute("x1")),n=parseFloat(t.getAttribute("y1")),r=parseFloat(t.getAttribute("x2")),s=parseFloat(t.getAttribute("y2")),o=new Qt(i,n,r,s).noFill();return le.call(this,t,o,e),o},lineargradient:function(t,e){for(var i=parseFloat(t.getAttribute("x1")),n=parseFloat(t.getAttribute("y1")),r=parseFloat(t.getAttribute("x2")),s=parseFloat(t.getAttribute("y2")),o=(r+i)/2,a=(s+n)/2,l=[],h=0;h<t.children.length;h++){var c=t.children[h],d=c.getAttribute("offset");/%/gi.test(d)&&(d=parseFloat(d.replace(/%/gi,""))/100),d=parseFloat(d);var u,f=c.getAttribute("stop-color"),p=c.getAttribute("stop-opacity"),g=c.getAttribute("style");null===f&&(f=(u=!!g&&g.match(/stop-color:\s?([#a-fA-F0-9]*)/))&&u.length>1?u[1]:void 0),p=null===p?(u=!!g&&g.match(/stop-opacity:\s?([0-9.-]*)/))&&u.length>1?parseFloat(u[1]):1:parseFloat(p),l.push(new Ot(d,f,p))}var m=new Et(i-o,n-a,r-o,s-a,l);return le.call(this,t,m,e),m},radialgradient:function(t,e){var i=parseFloat(t.getAttribute("cx"))||0,n=parseFloat(t.getAttribute("cy"))||0,r=parseFloat(t.getAttribute("r")),s=parseFloat(t.getAttribute("fx")),o=parseFloat(t.getAttribute("fy"));O.isNaN(s)&&(s=i),O.isNaN(o)&&(o=n);for(var a=Math.abs(i+s)/2,l=Math.abs(n+o)/2,h=[],c=0;c<t.children.length;c++){var d=t.children[c],u=d.getAttribute("offset");/%/gi.test(u)&&(u=parseFloat(u.replace(/%/gi,""))/100),u=parseFloat(u);var f,p=d.getAttribute("stop-color"),g=d.getAttribute("stop-opacity"),m=d.getAttribute("style");null===p&&(p=(f=!!m&&m.match(/stop-color:\s?([#a-fA-F0-9]*)/))&&f.length>1?f[1]:void 0),g=null===g?(f=!!m&&m.match(/stop-opacity:\s?([0-9.-]*)/))&&f.length>1?parseFloat(f[1]):1:parseFloat(g),h.push(new Ot(u,p,g))}var v=new Tt(i-a,n-l,r,h,s-a,o-l);return le.call(this,t,v,e),v},text:function(t,e){var i,n=(i=t.getAttribute("text-anchor"),ne[i]||"left"),r=function(t){var e=t.getAttribute("dominant-baseline"),i=t.getAttribute("alignment-baseline");return e||i}(t)||"baseline",s=t.textContent,o=new ie(s);return le.call(this,t,o,e),o.alignment=n,o.baseline=r,o}},ue=function(t,e){var i=new XMLHttpRequest;return i.open("GET",t),i.onreadystatechange=function(){4===i.readyState&&200===i.status&&e(i.responseText)},i.send(),i},fe=function(t,e,i,n){Lt.call(this,[new z,new z,new z,new z],!0),this._renderer.flagTextures=fe.FlagTextures.bind(this),this._renderer.bindTextures=fe.BindTextures.bind(this),this._renderer.unbindTextures=fe.UnbindTextures.bind(this),this.noStroke(),this.noFill(),Array.isArray(t)?this.textures=t.map(fe.GenerateTexture.bind(this)):this.textures=[fe.GenerateTexture(t)],this.origin=new A,this._update(),this.translation.set(e||0,i||0),this.frameRate="number"==typeof n?n:fe.DefaultFrameRate,this.index=0};O.extend(fe,{Properties:["frameRate","index"],DefaultFrameRate:30,FlagTextures:function(){this._flagTextures=!0},BindTextures:function(t){for(var e=t.length;e--;)t[e].bind(E.Types.change,this._renderer.flagTextures);this._renderer.flagTextures()},UnbindTextures:function(t){for(var e=t.length;e--;)t[e].unbind(E.Types.change,this._renderer.flagTextures);this._renderer.flagTextures()},MakeObservable:function(t){te.MakeObservable(t),O.each(fe.Properties,Rt,t),Object.defineProperty(t,"textures",{enumerable:!0,get:function(){return this._textures},set:function(t){this._renderer.flagTextures;var e=this._renderer.bindTextures,i=this._renderer.unbindTextures;this._textures&&this._textures.unbind(E.Types.insert,e).unbind(E.Types.remove,i),this._textures=new it((t||[]).slice(0)),this._textures.bind(E.Types.insert,e).bind(E.Types.remove,i),e(this._textures)}})},GenerateTexture:function(t){return t instanceof Ft?t:"string"==typeof t?new Ft(t):void 0}}),O.extend(fe.prototype,te.prototype,{_flagTextures:!1,_flagFrameRate:!1,_flagIndex:!1,_amount:1,_duration:0,_index:0,_startTime:0,_playing:!1,_firstFrame:0,_lastFrame:0,_loop:!0,_textures:null,_frameRate:0,_origin:null,constructor:fe,play:function(t,e,i){return this._playing=!0,this._firstFrame=0,this._lastFrame=this.amount-1,this._startTime=O.performance.now(),"number"==typeof t&&(this._firstFrame=t),"number"==typeof e&&(this._lastFrame=e),"function"==typeof i?this._onLastFrame=i:delete this._onLastFrame,this._index!==this._firstFrame&&(this._startTime-=1e3*Math.abs(this._index-this._firstFrame)/this._frameRate),this},pause:function(){return this._playing=!1,this},stop:function(){return this._playing=!1,this._index=this._firstFrame,this},clone:function(t){var e=new fe(this.textures,this.translation.x,this.translation.y,this.frameRate);return e._loop=this._loop,this._playing&&e.play(),t&&t.add(e),e},toObject:function(){var t=te.prototype.toObject.call(this);return t.textures=this.textures.map((function(t){return t.toObject()})),t.frameRate=this.frameRate,t.index=this.index,t._firstFrame=this._firstFrame,t._lastFrame=this._lastFrame,t._loop=this._loop,t},_update:function(){var t,e,i,n,r,s,o,a,l=this._textures;return this._flagTextures&&(this._amount=l.length),this._flagFrameRate&&(this._duration=1e3*this._amount/this._frameRate),this._playing&&this._frameRate>0?(n=this._amount,O.isNaN(this._lastFrame)&&(this._lastFrame=n-1),i=O.performance.now()-this._startTime,r=1e3*((a=this._lastFrame+1)-this._firstFrame)/this._frameRate,this._loop?i%=r:i=Math.min(i,r),o=w(this._firstFrame,a,i/r),(o=Math.floor(o))!==this._index&&(this._index=o,(s=l[this._index]).loaded&&(t=s.image.width,e=s.image.height,this.width!==t&&(this.width=t),this.height!==e&&(this.height=e),this.fill=s,o>=this._lastFrame-1&&this._onLastFrame&&this._onLastFrame()))):!this._flagIndex&&this.fill instanceof Ft||((s=l[this._index]).loaded&&(t=s.image.width,e=s.image.height,this.width!==t&&(this.width=t),this.height!==e&&(this.height=e)),this.fill=s),te.prototype._update.call(this),this},flagReset:function(){return this._flagTextures=this._flagFrameRate=!1,te.prototype.flagReset.call(this),this}}),fe.MakeObservable(fe.prototype);var pe=function(t,e,i,n,r,s){Lt.call(this,[new z,new z,new z,new z],!0),this.noStroke(),this.noFill(),t instanceof Ft?this.texture=t:"string"==typeof t&&(this.texture=new Ft(t)),this.origin=new A,this._update(),this.translation.set(e||0,i||0),"number"==typeof n&&(this.columns=n),"number"==typeof r&&(this.rows=r),"number"==typeof s&&(this.frameRate=s),this.index=0};O.extend(pe,{Properties:["texture","columns","rows","frameRate","index"],MakeObservable:function(t){te.MakeObservable(t),O.each(pe.Properties,Rt,t)}}),O.extend(pe.prototype,te.prototype,{_flagTexture:!1,_flagColumns:!1,_flagRows:!1,_flagFrameRate:!1,flagIndex:!1,_amount:1,_duration:0,_startTime:0,_playing:!1,_firstFrame:0,_lastFrame:0,_loop:!0,_texture:null,_columns:1,_rows:1,_frameRate:0,_index:0,_origin:null,constructor:pe,play:function(t,e,i){return this._playing=!0,this._firstFrame=0,this._lastFrame=this.amount-1,this._startTime=O.performance.now(),"number"==typeof t&&(this._firstFrame=t),"number"==typeof e&&(this._lastFrame=e),"function"==typeof i?this._onLastFrame=i:delete this._onLastFrame,this._index!==this._firstFrame&&(this._startTime-=1e3*Math.abs(this._index-this._firstFrame)/this._frameRate),this},pause:function(){return this._playing=!1,this},stop:function(){return this._playing=!1,this._index=0,this},clone:function(t){var e=new pe(this.texture,this.translation.x,this.translation.y,this.columns,this.rows,this.frameRate);return this.playing&&(e.play(this._firstFrame,this._lastFrame),e._loop=this._loop),t&&t.add(e),e},toObject:function(){var t=te.prototype.toObject.call(this);return t.texture=this.texture.toObject(),t.columns=this.columns,t.rows=this.rows,t.frameRate=this.frameRate,t.index=this.index,t._firstFrame=this._firstFrame,t._lastFrame=this._lastFrame,t._loop=this._loop,t},_update:function(){var t,e,i,n,r,s,o,a,l,h=this._texture,c=this._columns,d=this._rows;if((this._flagColumns||this._flagRows)&&(this._amount=this._columns*this._rows),this._flagFrameRate&&(this._duration=1e3*this._amount/this._frameRate),this._flagTexture&&(this.fill=this._texture),this._texture.loaded){t=(o=h.image.width)/c,e=(a=h.image.height)/d,n=this._amount,this.width!==t&&(this.width=t),this.height!==e&&(this.height=e),this._playing&&this._frameRate>0&&(O.isNaN(this._lastFrame)&&(this._lastFrame=n-1),i=O.performance.now()-this._startTime,r=1e3*((l=this._lastFrame+1)-this._firstFrame)/this._frameRate,this._loop?i%=r:i=Math.min(i,r),s=w(this._firstFrame,l,i/r),(s=Math.floor(s))!==this._index&&(this._index=s,s>=this._lastFrame-1&&this._onLastFrame&&this._onLastFrame()));var u=-t*(this._index%c)+(o-t)/2,f=-e*Math.floor(this._index/c)+(a-e)/2;u!==h.offset.x&&(h.offset.x=u),f!==h.offset.y&&(h.offset.y=f)}return te.prototype._update.call(this),this},flagReset:function(){return this._flagTexture=this._flagColumns=this._flagRows=this._flagFrameRate=!1,te.prototype.flagReset.call(this),this}}),pe.MakeObservable(pe.prototype);var ge=2*Math.PI,me=Math.PI/2,ve=function(t,e,i,n,r,s,o){for(var a=o||3*N.Resolution,l=[],h=0;h<a;h++)l.push(new z);Lt.call(this,l,!0,!1,!0),this.innerRadius=i,this.outerRadius=n,this.startAngle=r,this.endAngle=s,this._update(),"number"==typeof t&&(this.translation.x=t),"number"==typeof e&&(this.translation.y=e)};O.extend(ve,{Properties:["startAngle","endAngle","innerRadius","outerRadius"],MakeObservable:function(t){Lt.MakeObservable(t),O.each(ve.Properties,Rt,t)}}),O.extend(ve.prototype,Lt.prototype,{_flagStartAngle:!1,_flagEndAngle:!1,_flagInnerRadius:!1,_flagOuterRadius:!1,_startAngle:0,_endAngle:ge,_innerRadius:0,_outerRadius:0,constructor:ve,_update:function(){if(this._flagStartAngle||this._flagEndAngle||this._flagInnerRadius||this._flagOuterRadius){var t,e=this._startAngle,i=this._endAngle,n=this._innerRadius,r=this._outerRadius,s=x(e,ge)===x(i,ge),o=n>0,a=this.vertices,l=o?a.length/2:a.length,h=0;s?l--:o||(l-=2);for(var c=0,d=l-1;c<l;c++){var u=c/d,f=a[h],p=u*(i-e)+e,m=(i-e)/l,v=r*Math.cos(p),y=r*Math.sin(p);switch(c){case 0:t=g.move;break;default:t=g.curve}if(f.command=t,f.x=v,f.y=y,f.controls.left.clear(),f.controls.right.clear(),f.command===g.curve){var _=r*m/Math.PI;f.controls.left.x=_*Math.cos(p-me),f.controls.left.y=_*Math.sin(p-me),f.controls.right.x=_*Math.cos(p+me),f.controls.right.y=_*Math.sin(p+me),1===c&&f.controls.left.multiplyScalar(2),c===d&&f.controls.right.multiplyScalar(2)}h++}if(o){for(s?(a[h].command=g.close,h++):d=--l-1,c=0;c<l;c++)u=c/d,f=a[h],p=(1-u)*(i-e)+e,m=(i-e)/l,v=n*Math.cos(p),y=n*Math.sin(p),t=g.curve,c<=0&&(t=s?g.move:g.line),f.command=t,f.x=v,f.y=y,f.controls.left.clear(),f.controls.right.clear(),f.command===g.curve&&(_=n*m/Math.PI,f.controls.left.x=_*Math.cos(p+me),f.controls.left.y=_*Math.sin(p+me),f.controls.right.x=_*Math.cos(p-me),f.controls.right.y=_*Math.sin(p-me),1===c&&f.controls.left.multiplyScalar(2),c===d&&f.controls.right.multiplyScalar(2)),h++;a[h].copy(a[0]),a[h].command=g.line}else s||(a[h].command=g.line,a[h].x=0,a[h].y=0,a[++h].copy(a[0]),a[h].command=g.line)}return Lt.prototype._update.call(this),this},flagReset:function(){return Lt.prototype.flagReset.call(this),this._flagStartAngle=this._flagEndAngle=this._flagInnerRadius=this._flagOuterRadius=!1,this},clone:function(t){var e=this.innerRadius,i=this.outerradius,n=this.startAngle,r=this.endAngle,s=this.vertices.length,o=new ve(0,0,e,i,n,r,s);return o.translation.copy(this.translation),o.rotation=this.rotation,o.scale=this.scale,this.matrix.manual&&o.matrix.copy(this.matrix),O.each(Lt.Properties,(function(t){o[t]=this[t]}),this),t&&t.add(o),o},toObject:function(){var t=Lt.prototype.toObject.call(this);return O.each(ve.Properties,(function(e){t[e]=this[e]}),this),t}}),ve.MakeObservable(ve.prototype);var ye=2*Math.PI,_e=Math.cos,be=Math.sin,we=function(t,e,i,n){n=Math.max(n||0,3),Lt.call(this),this.closed=!0,this.automatic=!1,this.width=2*i,this.height=2*i,this.sides=n,this._update(),this.translation.set(t,e)};O.extend(we,{Properties:["width","height","sides"],MakeObservable:function(t){Lt.MakeObservable(t),O.each(we.Properties,Rt,t)}}),O.extend(we.prototype,Lt.prototype,{_flagWidth:!1,_flagHeight:!1,_flagSides:!1,_width:0,_height:0,_sides:0,constructor:we,_update:function(){if(this._flagWidth||this._flagHeight||this._flagSides){var t=this._sides,e=t+1,i=this.vertices.length;i>t&&(this.vertices.splice(t-1,i-t),i=t);for(var n=0;n<e;n++){var r=ye*((n+.5)/t)+Math.PI/2,s=this._width*_e(r)/2,o=this._height*be(r)/2;n>=i?this.vertices.push(new z(s,o)):this.vertices[n].set(s,o),this.vertices[n].command=0===n?g.move:g.line}}return Lt.prototype._update.call(this),this},flagReset:function(){return this._flagWidth=this._flagHeight=this._flagSides=!1,Lt.prototype.flagReset.call(this),this},clone:function(t){var e=new we(0,0,this.radius,this.sides);return e.translation.copy(this.translation),e.rotation=this.rotation,e.scale=this.scale,this.matrix.manual&&e.matrix.copy(this.matrix),O.each(Lt.Properties,(function(t){e[t]=this[t]}),this),t&&t.add(e),e},toObject:function(){var t=Lt.prototype.toObject.call(this);return O.each(we.Properties,(function(e){t[e]=this[e]}),this),t}}),we.MakeObservable(we.prototype);var xe=2*Math.PI,ke=Math.cos,Se=Math.sin,Re=function(t,e,i,n,r){arguments.length<=3&&(i=(n=i)/2),("number"!=typeof r||r<=0)&&(r=5),Lt.call(this),this.closed=!0,this.automatic=!1,this.innerRadius=i,this.outerRadius=n,this.sides=r,this._update(),this.translation.set(t,e)};O.extend(Re,{Properties:["innerRadius","outerRadius","sides"],MakeObservable:function(t){Lt.MakeObservable(t),O.each(Re.Properties,Rt,t)}}),O.extend(Re.prototype,Lt.prototype,{_flagInnerRadius:!1,_flagOuterRadius:!1,_flagSides:!1,_innerRadius:0,_outerRadius:0,_sides:0,constructor:Re,_update:function(){if(this._flagInnerRadius||this._flagOuterRadius||this._flagSides){var t=2*this._sides,e=t+1,i=this.vertices.length;i>t&&(this.vertices.splice(t-1,i-t),i=t);for(var n=0;n<e;n++){var r=xe*((n+.5)/t),s=(n%2?this._outerRadius:this._innerRadius)/2,o=s*ke(r),a=s*Se(r);n>=i?this.vertices.push(new z(o,a)):this.vertices[n].set(o,a),this.vertices[n].command=0===n?g.move:g.line}}return Lt.prototype._update.call(this),this},flagReset:function(){return this._flagInnerRadius=this._flagOuterRadius=this._flagSides=!1,Lt.prototype.flagReset.call(this),this},clone:function(t){var e=this.innerRadius,i=this.outerRadius,n=this.sides,r=new Re(0,0,e,i,n);return r.translation.copy(this.translation),r.rotation=this.rotation,r.scale=this.scale,this.matrix.manual&&r.matrix.copy(this.matrix),O.each(Lt.Properties,(function(t){r[t]=this[t]}),this),t&&t.add(r),r},toObject:function(){var t=Lt.prototype.toObject.call(this);return O.each(Re.Properties,(function(e){t[e]=this[e]}),this),t}}),Re.MakeObservable(Re.prototype);var Ce={version:1.1,ns:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",alignments:{left:"start",center:"middle",right:"end"},createElement:function(t,e){var i=t,n=document.createElementNS(Ce.ns,i);return"svg"===i&&(e=O.defaults(e||{},{version:Ce.version})),e&&Object.keys(e).length>0&&Ce.setAttributes(n,e),n},setAttributes:function(t,e){for(var i=Object.keys(e),n=0;n<i.length;n++)/href/.test(i[n])?t.setAttributeNS(Ce.xlink,i[n],e[i[n]]):t.setAttribute(i[n],e[i[n]]);return this},removeAttributes:function(t,e){for(var i in e)t.removeAttribute(i);return this},toString:function(t,e){for(var i,n=t.length,r=n-1,s="",o=0;o<n;o++){var a,l,h,c,d,u,f,p,m,v,y,_,b,w,k=t[o],R=e?x(o-1,n):Math.max(o-1,0),C=e?x(o+1,n):Math.min(o+1,r),O=t[R],M=t[C],E=S(k.x),T=S(k.y);switch(k.command){case g.close:a=g.close;break;case g.arc:v=k.rx,y=k.ry,_=k.xAxisRotation,b=k.largeArcFlag,w=k.sweepFlag,a=g.arc+" "+v+" "+y+" "+_+" "+b+" "+w+" "+E+" "+T;break;case g.curve:u=O.controls&&O.controls.right||A.zero,f=k.controls&&k.controls.left||A.zero,O.relative?(l=S(u.x+O.x),h=S(u.y+O.y)):(l=S(u.x),h=S(u.y)),k.relative?(c=S(f.x+k.x),d=S(f.y+k.y)):(c=S(f.x),d=S(f.y)),a=(0===o?g.move:g.curve)+" "+l+" "+h+" "+c+" "+d+" "+E+" "+T;break;case g.move:i=k,a=g.move+" "+E+" "+T;break;default:a=k.command+" "+E+" "+T}o>=r&&e&&(k.command===g.curve&&(M=i,p=k.controls&&k.controls.right||k,m=M.controls&&M.controls.left||M,k.relative?(l=S(p.x+k.x),h=S(p.y+k.y)):(l=S(p.x),h=S(p.y)),M.relative?(c=S(m.x+M.x),d=S(m.y+M.y)):(c=S(m.x),d=S(m.y)),a+=" C "+l+" "+h+" "+c+" "+d+" "+(E=S(M.x))+" "+(T=S(M.y))),k.command!==g.close&&(a+=" Z")),s+=a+" "}return s},getClip:function(t){var e=t._renderer.clip;if(!e){for(var i=t;i.parent;)i=i.parent;e=t._renderer.clip=Ce.createElement("clipPath"),i.defs.appendChild(e)}return e},group:{appendChild:function(t){var e=t._renderer.elem;if(e){var i=e.nodeName;!i||/(radial|linear)gradient/i.test(i)||t._clip||this.elem.appendChild(e)}},removeChild:function(t){var e=t._renderer.elem;e&&e.parentNode==this.elem&&e.nodeName&&(t._clip||this.elem.removeChild(e))},orderChild:function(t){this.elem.appendChild(t._renderer.elem)},renderChild:function(t){Ce[t._renderer.type].render.call(t,this)},render:function(t){if(this._update(),0===this._opacity&&!this._flagOpacity)return this;this._renderer.elem||(this._renderer.elem=Ce.createElement("g",{id:this.id}),t.appendChild(this._renderer.elem));var e=this._matrix.manual||this._flagMatrix,i={domElement:t,elem:this._renderer.elem};e&&this._renderer.elem.setAttribute("transform","matrix("+this._matrix.toString()+")");for(var n=0;n<this.children.length;n++){var r=this.children[n];Ce[r._renderer.type].render.call(r,t)}return this._flagOpacity&&this._renderer.elem.setAttribute("opacity",this._opacity),this._flagClassName&&this._renderer.elem.setAttribute("class",this.classList.join(" ")),this._flagAdditions&&this.additions.forEach(Ce.group.appendChild,i),this._flagSubtractions&&this.subtractions.forEach(Ce.group.removeChild,i),this._flagOrder&&this.children.forEach(Ce.group.orderChild,i),this._flagMask&&(this._mask?this._renderer.elem.setAttribute("clip-path","url(#"+this._mask.id+")"):this._renderer.elem.removeAttribute("clip-path")),this.flagReset()}},path:{render:function(t){if(this._update(),0===this._opacity&&!this._flagOpacity)return this;var e={};if((this._matrix.manual||this._flagMatrix)&&(e.transform="matrix("+this._matrix.toString()+")"),this._flagVertices){var i=Ce.toString(this._renderer.vertices,this._closed);e.d=i}if(this._fill&&this._fill._renderer&&(this._fill._update(),Ce[this._fill._renderer.type].render.call(this._fill,t,!0)),this._flagFill&&(e.fill=this._fill&&this._fill.id?"url(#"+this._fill.id+")":this._fill),this._stroke&&this._stroke._renderer&&(this._stroke._update(),Ce[this._stroke._renderer.type].render.call(this._stroke,t,!0)),this._flagStroke&&(e.stroke=this._stroke&&this._stroke.id?"url(#"+this._stroke.id+")":this._stroke),this._flagLinewidth&&(e["stroke-width"]=this._linewidth),this._flagOpacity&&(e["stroke-opacity"]=this._opacity,e["fill-opacity"]=this._opacity),this._flagClassName&&(e.class=this.classList.join(" ")),this._flagVisible&&(e.visibility=this._visible?"visible":"hidden"),this._flagCap&&(e["stroke-linecap"]=this._cap),this._flagJoin&&(e["stroke-linejoin"]=this._join),this._flagMiter&&(e["stroke-miterlimit"]=this._miter),this.dashes&&this.dashes.length>0&&(e["stroke-dasharray"]=this.dashes.join(" "),e["stroke-dashoffset"]=this.dashes.offset||0),this._renderer.elem?Ce.setAttributes(this._renderer.elem,e):(e.id=this.id,this._renderer.elem=Ce.createElement("path",e),t.appendChild(this._renderer.elem)),this._flagClip){var n=Ce.getClip(this),r=this._renderer.elem;this._clip?(r.removeAttribute("id"),n.setAttribute("id",this.id),n.appendChild(r)):(n.removeAttribute("id"),r.setAttribute("id",this.id),this.parent._renderer.elem.appendChild(r))}return this.flagReset()}},text:{render:function(t){this._update();var e={};if((this._matrix.manual||this._flagMatrix)&&(e.transform="matrix("+this._matrix.toString()+")"),this._flagFamily&&(e["font-family"]=this._family),this._flagSize&&(e["font-size"]=this._size),this._flagLeading&&(e["line-height"]=this._leading),this._flagAlignment&&(e["text-anchor"]=Ce.alignments[this._alignment]||this._alignment),this._flagBaseline&&(e["alignment-baseline"]=e["dominant-baseline"]=this._baseline),this._flagStyle&&(e["font-style"]=this._style),this._flagWeight&&(e["font-weight"]=this._weight),this._flagDecoration&&(e["text-decoration"]=this._decoration),this._fill&&this._fill._renderer&&(this._fill._update(),Ce[this._fill._renderer.type].render.call(this._fill,t,!0)),this._flagFill&&(e.fill=this._fill&&this._fill.id?"url(#"+this._fill.id+")":this._fill),this._stroke&&this._stroke._renderer&&(this._stroke._update(),Ce[this._stroke._renderer.type].render.call(this._stroke,t,!0)),this._flagStroke&&(e.stroke=this._stroke&&this._stroke.id?"url(#"+this._stroke.id+")":this._stroke),this._flagLinewidth&&(e["stroke-width"]=this._linewidth),this._flagOpacity&&(e.opacity=this._opacity),this._flagClassName&&(e.class=this.classList.join(" ")),this._flagVisible&&(e.visibility=this._visible?"visible":"hidden"),this.dashes&&this.dashes.length>0&&(e["stroke-dasharray"]=this.dashes.join(" "),e["stroke-dashoffset"]=this.dashes.offset||0),this._renderer.elem?Ce.setAttributes(this._renderer.elem,e):(e.id=this.id,this._renderer.elem=Ce.createElement("text",e),t.defs.appendChild(this._renderer.elem)),this._flagClip){var i=Ce.getClip(this),n=this._renderer.elem;this._clip?(n.removeAttribute("id"),i.setAttribute("id",this.id),i.appendChild(n)):(i.removeAttribute("id"),n.setAttribute("id",this.id),this.parent._renderer.elem.appendChild(n))}return this._flagValue&&(this._renderer.elem.textContent=this._value),this.flagReset()}},"linear-gradient":{render:function(t,e){e||this._update();var i={};if(this._flagEndPoints&&(i.x1=this.left._x,i.y1=this.left._y,i.x2=this.right._x,i.y2=this.right._y),this._flagSpread&&(i.spreadMethod=this._spread),this._renderer.elem?Ce.setAttributes(this._renderer.elem,i):(i.id=this.id,i.gradientUnits="userSpaceOnUse",this._renderer.elem=Ce.createElement("linearGradient",i),t.defs.appendChild(this._renderer.elem)),this._flagStops){var n=this._renderer.elem.childNodes.length!==this.stops.length;if(n)for(;this._renderer.elem.lastChild;)this._renderer.elem.removeChild(this._renderer.elem.lastChild);for(var r=0;r<this.stops.length;r++){var s=this.stops[r],o={};s._flagOffset&&(o.offset=100*s._offset+"%"),s._flagColor&&(o["stop-color"]=s._color),s._flagOpacity&&(o["stop-opacity"]=s._opacity),s._renderer.elem?Ce.setAttributes(s._renderer.elem,o):s._renderer.elem=Ce.createElement("stop",o),n&&this._renderer.elem.appendChild(s._renderer.elem),s.flagReset()}}return this.flagReset()}},"radial-gradient":{render:function(t,e){e||this._update();var i={};if(this._flagCenter&&(i.cx=this.center._x,i.cy=this.center._y),this._flagFocal&&(i.fx=this.focal._x,i.fy=this.focal._y),this._flagRadius&&(i.r=this._radius),this._flagSpread&&(i.spreadMethod=this._spread),this._renderer.elem?Ce.setAttributes(this._renderer.elem,i):(i.id=this.id,i.gradientUnits="userSpaceOnUse",this._renderer.elem=Ce.createElement("radialGradient",i),t.defs.appendChild(this._renderer.elem)),this._flagStops){var n=this._renderer.elem.childNodes.length!==this.stops.length;if(n)for(;this._renderer.elem.lastChild;)this._renderer.elem.removeChild(this._renderer.elem.lastChild);for(var r=0;r<this.stops.length;r++){var s=this.stops[r],o={};s._flagOffset&&(o.offset=100*s._offset+"%"),s._flagColor&&(o["stop-color"]=s._color),s._flagOpacity&&(o["stop-opacity"]=s._opacity),s._renderer.elem?Ce.setAttributes(s._renderer.elem,o):s._renderer.elem=Ce.createElement("stop",o),n&&this._renderer.elem.appendChild(s._renderer.elem),s.flagReset()}}return this.flagReset()}},texture:{render:function(t,e){e||this._update();var i={},n={x:0,y:0},r=this.image;if(this._flagLoaded&&this.loaded)switch(r.nodeName.toLowerCase()){case"canvas":n.href=n["xlink:href"]=r.toDataURL("image/png");break;case"img":case"image":n.href=n["xlink:href"]=this.src}if((this._flagOffset||this._flagLoaded||this._flagScale)&&(i.x=this._offset.x,i.y=this._offset.y,r&&(i.x-=r.width/2,i.y-=r.height/2,this._scale instanceof A?(i.x*=this._scale.x,i.y*=this._scale.y):(i.x*=this._scale,i.y*=this._scale)),i.x>0&&(i.x*=-1),i.y>0&&(i.y*=-1)),(this._flagScale||this._flagLoaded||this._flagRepeat)&&(i.width=0,i.height=0,r)){switch(n.width=i.width=r.width,n.height=i.height=r.height,this._repeat){case"no-repeat":i.width+=1,i.height+=1}this._scale instanceof A?(i.width*=this._scale.x,i.height*=this._scale.y):(i.width*=this._scale,i.height*=this._scale)}return(this._flagScale||this._flagLoaded)&&(this._renderer.image?Ce.setAttributes(this._renderer.image,n):this._renderer.image=Ce.createElement("image",n)),this._renderer.elem?0!==Object.keys(i).length&&Ce.setAttributes(this._renderer.elem,i):(i.id=this.id,i.patternUnits="userSpaceOnUse",this._renderer.elem=Ce.createElement("pattern",i),t.defs.appendChild(this._renderer.elem)),this._renderer.elem&&this._renderer.image&&!this._renderer.appended&&(this._renderer.elem.appendChild(this._renderer.image),this._renderer.appended=!0),this.flagReset()}}},Oe=function(t){this.domElement=t.domElement||Ce.createElement("svg"),this.scene=new at,this.scene.parent=this,this.defs=Ce.createElement("defs"),this.domElement.appendChild(this.defs),this.domElement.defs=this.defs,this.domElement.style.overflow="hidden"};O.extend(Oe,{Utils:Ce}),O.extend(Oe.prototype,E,{constructor:Oe,setSize:function(t,e){return this.width=t,this.height=e,Ce.setAttributes(this.domElement,{width:t,height:e}),this.trigger(E.Types.resize,t,e)},render:function(){return Ce.group.render.call(this.scene,this.domElement),this}});var Me=V.Multiply,Ee=[1,0,0,0,1,0,0,0,1],Ae=new k(9),Te=bt.Utils,Pe={isHidden:/(undefined|none|transparent)/i,canvas:v.document?v.document.createElement("canvas"):{getContext:function(){}},alignments:{left:"start",middle:"center",right:"end"},matrix:new V,group:{removeChild:function(t,e){if(t.children)for(var i=0;i<t.children.length;i++)Pe.group.removeChild(t.children[i],e);else e.deleteTexture(t._renderer.texture),delete t._renderer.texture},render:function(t,e){this._update();var i,n=this.parent,r=n._matrix&&n._matrix.manual||n._flagMatrix,s=this._matrix.manual||this._flagMatrix;if((r||s)&&(this._renderer.matrix||(this._renderer.matrix=new k(9)),this._matrix.toTransformArray(!0,Ae),Me(Ae,n._renderer.matrix,this._renderer.matrix),this._renderer.scale instanceof A||(this._renderer.scale=new A),this._scale instanceof A?(this._renderer.scale.x=this._scale.x,this._renderer.scale.y=this._scale.y):(this._renderer.scale.x=this._scale,this._renderer.scale.y=this._scale),/renderer/i.test(n._renderer.type)||(this._renderer.scale.x*=n._renderer.scale.x,this._renderer.scale.y*=n._renderer.scale.y),r&&(this._flagMatrix=!0)),this._mask&&(t.clear(t.STENCIL_BUFFER_BIT),t.enable(t.STENCIL_TEST),t.stencilFunc(t.ALWAYS,1,0),t.stencilOp(t.KEEP,t.KEEP,t.REPLACE),t.colorMask(!1,!1,!1,!1),Pe[this._mask._renderer.type].render.call(this._mask,t,e,this),t.stencilFunc(t.EQUAL,1,255),t.stencilOp(t.KEEP,t.KEEP,t.KEEP),t.colorMask(!0,!0,!0,!0)),this._flagOpacity=n._flagOpacity||this._flagOpacity,this._renderer.opacity=this._opacity*(n&&n._renderer?n._renderer.opacity:1),this._flagSubtractions)for(i=0;i<this.subtractions.length;i++)Pe.group.removeChild(this.subtractions[i],t);for(i=0;i<this.children.length;i++){var o=this.children[i];Pe[o._renderer.type].render.call(o,t,e)}return this._mask&&t.disable(t.STENCIL_TEST),this.flagReset()}},path:{updateCanvas:function(t){var e,i,n,r,s,o,a,l,h,c,d,u,f,p,m,v=t._renderer.vertices,y=this.canvas,_=this.ctx,b=t._renderer.scale,w=t._stroke,k=t._linewidth,S=t._fill,R=t._renderer.opacity||t._opacity,C=t._cap,O=t._join,M=t._miter,E=t._closed,T=t.dashes,P=v.length,F=P-1;y.width=Math.max(Math.ceil(t._renderer.rect.width*b.x),1),y.height=Math.max(Math.ceil(t._renderer.rect.height*b.y),1);var z,I=t._renderer.rect.centroid,j=I.x,D=I.y;_.clearRect(0,0,y.width,y.height),S&&("string"==typeof S?_.fillStyle=S:(Pe[S._renderer.type].render.call(S,_,t),_.fillStyle=S._renderer.effect)),w&&("string"==typeof w?_.strokeStyle=w:(Pe[w._renderer.type].render.call(w,_,t),_.strokeStyle=w._renderer.effect),k&&(_.lineWidth=k),M&&(_.miterLimit=M),O&&(_.lineJoin=O),!E&&C&&(_.lineCap=C)),"number"==typeof R&&(_.globalAlpha=R),T&&T.length>0&&(_.lineDashOffset=T.offset||0,_.setLineDash(T)),_.save(),_.scale(b.x,b.y),_.translate(j,D),_.beginPath();for(var L=0;L<v.length;L++){var B=v[L];switch(f=B.x,p=B.y,B.command){case g.close:_.closePath();break;case g.arc:var V=B.rx,W=B.ry,N=B.xAxisRotation,U=B.largeArcFlag,H=B.sweepFlag,q=(n=v[i=E?x(L-1,P):Math.max(L-1,0)]).x,G=n.y;Te.renderSvgArcCommand(_,q,G,V,W,U,H,N,f,p);break;case g.curve:i=E?x(L-1,P):Math.max(L-1,0),e=E?x(L+1,P):Math.min(L+1,F),n=v[i],r=v[e],h=n.controls&&n.controls.right||A.zero,c=B.controls&&B.controls.left||A.zero,n._relative?(a=h.x+n.x,l=h.y+n.y):(a=h.x,l=h.y),B._relative?(s=c.x+B.x,o=c.y+B.y):(s=c.x,o=c.y),_.bezierCurveTo(a,l,s,o,f,p),L>=F&&E&&(r=z,d=B.controls&&B.controls.right||A.zero,u=r.controls&&r.controls.left||A.zero,B._relative?(a=d.x+B.x,l=d.y+B.y):(a=d.x,l=d.y),r._relative?(s=u.x+r.x,o=u.y+r.y):(s=u.x,o=u.y),f=r.x,p=r.y,_.bezierCurveTo(a,l,s,o,f,p));break;case g.line:_.lineTo(f,p);break;case g.move:z=B,_.moveTo(f,p)}}E&&_.closePath(),Pe.isHidden.test(S)||((m=S._renderer&&S._renderer.offset)&&(_.save(),_.translate(-S._renderer.offset.x,-S._renderer.offset.y),_.scale(S._renderer.scale.x,S._renderer.scale.y)),_.fill(),m&&_.restore()),Pe.isHidden.test(w)||((m=w._renderer&&w._renderer.offset)&&(_.save(),_.translate(-w._renderer.offset.x,-w._renderer.offset.y),_.scale(w._renderer.scale.x,w._renderer.scale.y),_.lineWidth=k/w._renderer.scale.x),_.stroke(),m&&_.restore()),_.restore()},getBoundingClientRect:function(t,e,i){var n,r,s=1/0,o=-1/0,a=1/0,l=-1/0;t.forEach((function(t){var e,i,n,r,h,c,d=t.x,u=t.y,f=t.controls;a=Math.min(u,a),s=Math.min(d,s),o=Math.max(d,o),l=Math.max(u,l),t.controls&&(h=f.left,c=f.right,h&&c&&(e=t._relative?h.x+d:h.x,i=t._relative?h.y+u:h.y,n=t._relative?c.x+d:c.x,r=t._relative?c.y+u:c.y,e&&i&&n&&r&&(a=Math.min(i,r,a),s=Math.min(e,n,s),o=Math.max(e,n,o),l=Math.max(i,r,l))))})),"number"==typeof e&&(a-=e,s-=e,o+=e,l+=e),n=o-s,r=l-a,i.top=a,i.left=s,i.right=o,i.bottom=l,i.width=n,i.height=r,i.centroid||(i.centroid={}),i.centroid.x=-s,i.centroid.y=-a},render:function(t,e,i){if(!this._visible||!this._opacity)return this;this._update();var n=i||this.parent,r=n._matrix.manual||n._flagMatrix,s=this._matrix.manual||this._flagMatrix,o=this._renderer.parent!==n,a=this._flagVertices||this._flagFill||this._fill instanceof Et&&(this._fill._flagSpread||this._fill._flagStops||this._fill._flagEndPoints)||this._fill instanceof Tt&&(this._fill._flagSpread||this._fill._flagStops||this._fill._flagRadius||this._fill._flagCenter||this._fill._flagFocal)||this._fill instanceof Ft&&(this._fill._flagLoaded&&this._fill.loaded||this._fill._flagImage||this._fill._flagVideo||this._fill._flagRepeat||this._fill._flagOffset||this._fill._flagScale)||this._stroke instanceof Et&&(this._stroke._flagSpread||this._stroke._flagStops||this._stroke._flagEndPoints)||this._stroke instanceof Tt&&(this._stroke._flagSpread||this._stroke._flagStops||this._stroke._flagRadius||this._stroke._flagCenter||this._stroke._flagFocal)||this._stroke instanceof Ft&&(this._stroke._flagLoaded&&this._stroke.loaded||this._stroke._flagImage||this._stroke._flagVideo||this._stroke._flagRepeat||this._stroke._flagOffset||this._fill._flagScale)||this._flagStroke||this._flagLinewidth||this._flagOpacity||n._flagOpacity||this._flagVisible||this._flagCap||this._flagJoin||this._flagMiter||this._flagScale||this.dashes&&this.dashes.length>0||!this._renderer.texture;if((r||s||o)&&(this._renderer.matrix||(this._renderer.matrix=new k(9)),this._matrix.toTransformArray(!0,Ae),Me(Ae,n._renderer.matrix,this._renderer.matrix),this._renderer.scale instanceof A||(this._renderer.scale=new A),this._scale instanceof A?(this._renderer.scale.x=this._scale.x*n._renderer.scale.x,this._renderer.scale.y=this._scale.y*n._renderer.scale.y):(this._renderer.scale.x=this._scale*n._renderer.scale.x,this._renderer.scale.y=this._scale*n._renderer.scale.y),o&&(this._renderer.parent=n)),a?(this._renderer.rect||(this._renderer.rect={}),this._renderer.opacity=this._opacity*n._renderer.opacity,Pe.path.getBoundingClientRect(this._renderer.vertices,this._linewidth,this._renderer.rect),Pe.updateTexture.call(Pe,t,this)):(this._fill&&this._fill._update&&this._fill._update(),this._stroke&&this._stroke._update&&this._stroke._update()),!this._clip||i){t.bindTexture(t.TEXTURE_2D,this._renderer.texture);var l=this._renderer.rect;return t.uniformMatrix3fv(e.matrix,!1,this._renderer.matrix),t.uniform4f(e.rect,l.left,l.top,l.right,l.bottom),t.drawArrays(t.TRIANGLES,0,6),this.flagReset()}}},text:{updateCanvas:function(t){var e=this.canvas,i=this.ctx,n=t._renderer.scale,r=t._stroke,s=t._linewidth*n,o=t._fill,a=t._renderer.opacity||t._opacity,l=t.dashes,h=t._decoration;Te.alignments[t._alignment]||t._alignment,t._baseline,e.width=Math.max(Math.ceil(t._renderer.rect.width*n.x),1),e.height=Math.max(Math.ceil(t._renderer.rect.height*n.y),1);var c,d,u,f,p,g,m,v,y,_,b,w=t._renderer.rect.centroid,x=w.x,k=w.y,S=o._renderer&&o._renderer.offset&&r._renderer&&r._renderer.offset;if(i.clearRect(0,0,e.width,e.height),S||(i.font=[t._style,t._weight,t._size+"px/"+t._leading+"px",t._family].join(" ")),i.textAlign="center",i.textBaseline="middle",o&&("string"==typeof o?i.fillStyle=o:(Pe[o._renderer.type].render.call(o,i,t),i.fillStyle=o._renderer.effect)),r&&("string"==typeof r?i.strokeStyle=r:(Pe[r._renderer.type].render.call(r,i,t),i.strokeStyle=r._renderer.effect),s&&(i.lineWidth=s)),"number"==typeof a&&(i.globalAlpha=a),l&&l.length>0&&(i.lineDashOffset=l.offset||0,i.setLineDash(l)),i.save(),i.scale(n.x,n.y),i.translate(x,k),Pe.isHidden.test(o)||(o._renderer&&o._renderer.offset?(g=o._renderer.scale.x,m=o._renderer.scale.y,i.save(),i.translate(-o._renderer.offset.x,-o._renderer.offset.y),i.scale(g,m),c=t._size/o._renderer.scale.y,d=t._leading/o._renderer.scale.y,i.font=[t._style,t._weight,c+"px/",d+"px",t._family].join(" "),u=o._renderer.offset.x/o._renderer.scale.x,f=o._renderer.offset.y/o._renderer.scale.y,i.fillText(t.value,u,f),i.restore()):i.fillText(t.value,0,0)),Pe.isHidden.test(r)||(r._renderer&&r._renderer.offset?(g=r._renderer.scale.x,m=r._renderer.scale.y,i.save(),i.translate(-r._renderer.offset.x,-r._renderer.offset.y),i.scale(g,m),c=t._size/r._renderer.scale.y,d=t._leading/r._renderer.scale.y,i.font=[t._style,t._weight,c+"px/",d+"px",t._family].join(" "),u=r._renderer.offset.x/r._renderer.scale.x,f=r._renderer.offset.y/r._renderer.scale.y,p=s/r._renderer.scale.x,i.lineWidth=p,i.strokeText(t.value,u,f),i.restore()):i.strokeText(t.value,0,0)),/(underline|strikethrough)/i.test(h)){var R=i.measureText(t.value);switch(h){case"underline":y=R.actualBoundingBoxAscent,b=R.actualBoundingBoxAscent;break;case"strikethrough":y=0,b=0}v=-R.width/2,_=R.width/2,i.lineWidth=Math.max(Math.floor(t._size/15),1),i.strokeStyle=i.fillStyle,i.beginPath(),i.moveTo(v,y),i.lineTo(_,b),i.stroke()}i.restore()},getBoundingClientRect:function(t,e){var i=Pe.ctx;i.font=[t._style,t._weight,t._size+"px/"+t._leading+"px",t._family].join(" "),i.textAlign="center",i.textBaseline=t._baseline;var n=1.25*i.measureText(t._value).width,r=1.25*Math.max(t._size,t._leading);this._linewidth&&!Pe.isHidden.test(this._stroke)&&(n+=2*this._linewidth,r+=2*this._linewidth);var s=n/2,o=r/2;switch(Pe.alignments[t._alignment]||t._alignment){case Pe.alignments.left:e.left=0,e.right=n;break;case Pe.alignments.right:e.left=-n,e.right=0;break;default:e.left=-s,e.right=s}switch(t._baseline){case"bottom":e.top=-r,e.bottom=0;break;case"top":e.top=0,e.bottom=r;break;default:e.top=-o,e.bottom=o}e.width=n,e.height=r,e.centroid||(e.centroid={}),e.centroid.x=s,e.centroid.y=o},render:function(t,e,i){if(!this._visible||!this._opacity)return this;this._update();var n=i||this.parent,r=n._matrix.manual||n._flagMatrix,s=this._matrix.manual||this._flagMatrix,o=this._renderer.parent!==n,a=this._flagVertices||this._flagFill||this._fill instanceof Et&&(this._fill._flagSpread||this._fill._flagStops||this._fill._flagEndPoints)||this._fill instanceof Tt&&(this._fill._flagSpread||this._fill._flagStops||this._fill._flagRadius||this._fill._flagCenter||this._fill._flagFocal)||this._fill instanceof Ft&&(this._fill._flagLoaded&&this._fill.loaded||this._fill._flagImage||this._fill._flagVideo||this._fill._flagRepeat||this._fill._flagOffset||this._fill._flagScale)||this._stroke instanceof Et&&(this._stroke._flagSpread||this._stroke._flagStops||this._stroke._flagEndPoints)||this._stroke instanceof Tt&&(this._stroke._flagSpread||this._stroke._flagStops||this._stroke._flagRadius||this._stroke._flagCenter||this._stroke._flagFocal)||this._stroke instanceof Ft&&(this._stroke._flagLoaded&&this._stroke.loaded||this._stroke._flagImage||this._stroke._flagVideo||this._stroke._flagRepeat||this._stroke._flagOffset||this._fill._flagScale)||this._flagStroke||this._flagLinewidth||this._flagOpacity||n._flagOpacity||this._flagVisible||this._flagScale||this._flagValue||this._flagFamily||this._flagSize||this._flagLeading||this._flagAlignment||this._flagBaseline||this._flagStyle||this._flagWeight||this._flagDecoration||this.dashes&&this.dashes.length>0||!this._renderer.texture;if((r||s||o)&&(this._renderer.matrix||(this._renderer.matrix=new k(9)),this._matrix.toTransformArray(!0,Ae),Me(Ae,n._renderer.matrix,this._renderer.matrix),this._renderer.scale instanceof A||(this._renderer.scale=new A),this._scale instanceof A?(this._renderer.scale.x=this._scale.x*n._renderer.scale.x,this._renderer.scale.y=this._scale.y*n._renderer.scale.y):(this._renderer.scale.x=this._scale*n._renderer.scale.x,this._renderer.scale.y=this._scale*n._renderer.scale.y),o&&(this._renderer.parent=n)),a?(this._renderer.rect||(this._renderer.rect={}),this._renderer.opacity=this._opacity*n._renderer.opacity,Pe.text.getBoundingClientRect(this,this._renderer.rect),Pe.updateTexture.call(Pe,t,this)):(this._fill&&this._fill._update&&this._fill._update(),this._stroke&&this._stroke._update&&this._stroke._update()),!this._clip||i){t.bindTexture(t.TEXTURE_2D,this._renderer.texture);var l=this._renderer.rect;return t.uniformMatrix3fv(e.matrix,!1,this._renderer.matrix),t.uniform4f(e.rect,l.left,l.top,l.right,l.bottom),t.drawArrays(t.TRIANGLES,0,6),this.flagReset()}}},"linear-gradient":{render:function(t,e){if(t.canvas.getContext("2d")){if(this._update(),!this._renderer.effect||this._flagEndPoints||this._flagStops){this._renderer.effect=t.createLinearGradient(this.left._x,this.left._y,this.right._x,this.right._y);for(var i=0;i<this.stops.length;i++){var n=this.stops[i];this._renderer.effect.addColorStop(n._offset,n._color)}}return this.flagReset()}}},"radial-gradient":{render:function(t,e){if(t.canvas.getContext("2d")){if(this._update(),!this._renderer.effect||this._flagCenter||this._flagFocal||this._flagRadius||this._flagStops){this._renderer.effect=t.createRadialGradient(this.center._x,this.center._y,0,this.focal._x,this.focal._y,this._radius);for(var i=0;i<this.stops.length;i++){var n=this.stops[i];this._renderer.effect.addColorStop(n._offset,n._color)}}return this.flagReset()}}},texture:{render:function(t,e){if(t.canvas.getContext("2d")){this._update();var i=this.image;if((this._flagLoaded||this._flagImage||this._flagVideo||this._flagRepeat)&&this.loaded)this._renderer.effect=t.createPattern(i,this._repeat);else if(!this._renderer.effect)return this.flagReset();return(this._flagOffset||this._flagLoaded||this._flagScale)&&(this._renderer.offset instanceof A||(this._renderer.offset=new A),this._renderer.offset.x=-this._offset.x,this._renderer.offset.y=-this._offset.y,i&&(this._renderer.offset.x+=i.width/2,this._renderer.offset.y+=i.height/2,this._scale instanceof A?(this._renderer.offset.x*=this._scale.x,this._renderer.offset.y*=this._scale.y):(this._renderer.offset.x*=this._scale,this._renderer.offset.y*=this._scale))),(this._flagScale||this._flagLoaded)&&(this._renderer.scale instanceof A||(this._renderer.scale=new A),this._scale instanceof A?this._renderer.scale.copy(this._scale):this._renderer.scale.set(this._scale,this._scale)),this.flagReset()}}},updateTexture:function(t,e){this[e._renderer.type].updateCanvas.call(Pe,e),e._renderer.texture||(e._renderer.texture=t.createTexture()),t.bindTexture(t.TEXTURE_2D,e._renderer.texture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),this.canvas.width<=0||this.canvas.height<=0||t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,this.canvas)},program:{create:function(t,e){var i,n;if(i=t.createProgram(),O.each(e,(function(e){t.attachShader(i,e)})),t.linkProgram(i),!t.getProgramParameter(i,t.LINK_STATUS))throw n=t.getProgramInfoLog(i),t.deleteProgram(i),new St("unable to link program: "+n);return i}},shaders:{create:function(t,e,i){var n,r;if(n=t.createShader(t[i]),t.shaderSource(n,e),t.compileShader(n),!t.getShaderParameter(n,t.COMPILE_STATUS))throw r=t.getShaderInfoLog(n),t.deleteShader(n),new St("unable to compile shader "+n+": "+r);return n},types:{vertex:"VERTEX_SHADER",fragment:"FRAGMENT_SHADER"},vertex:["precision mediump float;","attribute vec2 a_position;","","uniform mat3 u_matrix;","uniform vec2 u_resolution;","uniform vec4 u_rect;","","varying vec2 v_textureCoords;","","void main() {","   vec2 rectCoords = (a_position * (u_rect.zw - u_rect.xy)) + u_rect.xy;","   vec2 projected = (u_matrix * vec3(rectCoords, 1.0)).xy;","   vec2 normal = projected / u_resolution;","   vec2 clipspace = (normal * 2.0) - 1.0;","","   gl_Position = vec4(clipspace * vec2(1.0, -1.0), 0.0, 1.0);","   v_textureCoords = a_position;","}"].join("\n"),fragment:["precision mediump float;","","uniform sampler2D u_image;","varying vec2 v_textureCoords;","","void main() {","  vec4 texel = texture2D(u_image, v_textureCoords);","  if (texel.a == 0.0) {","    discard;","  }","  gl_FragColor = texel;","}"].join("\n")},TextureRegistry:new Ct};Pe.ctx=Pe.canvas.getContext("2d");var Fe=function(t){var e,i,n;if(this.domElement=t.domElement||document.createElement("canvas"),void 0!==t.offscreenElement&&(Pe.canvas=t.offscreenElement,Pe.ctx=Pe.canvas.getContext("2d")),this.scene=new at,this.scene.parent=this,this._renderer={type:"renderer",matrix:new k(Ee),scale:1,opacity:1},this._flagMatrix=!0,t=O.defaults(t||{},{antialias:!1,alpha:!0,premultipliedAlpha:!0,stencil:!0,preserveDrawingBuffer:!0,overdraw:!1}),this.overdraw=t.overdraw,e=this.ctx=this.domElement.getContext("webgl",t)||this.domElement.getContext("experimental-webgl",t),!this.ctx)throw new St("unable to create a webgl context. Try using another renderer.");i=Pe.shaders.create(e,Pe.shaders.vertex,Pe.shaders.types.vertex),n=Pe.shaders.create(e,Pe.shaders.fragment,Pe.shaders.types.fragment),this.program=Pe.program.create(e,[i,n]),e.useProgram(this.program),this.program.position=e.getAttribLocation(this.program,"a_position"),this.program.matrix=e.getUniformLocation(this.program,"u_matrix"),this.program.rect=e.getUniformLocation(this.program,"u_rect");var r=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,r),e.vertexAttribPointer(this.program.position,2,e.FLOAT,!1,0,0),e.enableVertexAttribArray(this.program.position),e.bufferData(e.ARRAY_BUFFER,new k([0,0,1,0,0,1,0,1,1,0,1,1]),e.STATIC_DRAW),e.enable(e.BLEND),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ONE,e.ONE_MINUS_SRC_ALPHA)};O.extend(Fe,{Utils:Pe}),O.extend(Fe.prototype,E,{constructor:Fe,setSize:function(t,e,i){this.width=t,this.height=e,this.ratio=void 0===i?et(this.ctx):i,this.domElement.width=t*this.ratio,this.domElement.height=e*this.ratio,O.isObject(this.domElement.style)&&O.extend(this.domElement.style,{width:t+"px",height:e+"px"}),this._renderer.matrix[0]=this._renderer.matrix[4]=this._renderer.scale=this.ratio,this._flagMatrix=!0,this.ctx.viewport(0,0,t*this.ratio,e*this.ratio);var n=this.ctx.getUniformLocation(this.program,"u_resolution");return this.ctx.uniform2f(n,t*this.ratio,e*this.ratio),this.trigger(E.Types.resize,t,e,i)},render:function(){var t=this.ctx;return this.overdraw||t.clear(t.COLOR_BUFFER_BIT),Pe.group.render.call(this.scene,t,this.program),this._flagMatrix=!1,this}});var ze=function(t){var e=O.defaults(t||{},{fullscreen:!1,fitted:!1,width:640,height:480,type:ze.Types.svg,autostart:!1});if(O.each(e,(function(t,e){/fullscreen/i.test(e)||/autostart/i.test(e)||(this[e]=t)}),this),O.isElement(e.domElement)){var i=e.domElement.tagName.toLowerCase();/^(CanvasRenderer-canvas|WebGLRenderer-canvas|SVGRenderer-svg)$/.test(this.type+"-"+i)||(this.type=ze.Types[i])}this.renderer=new ze[this.type](this),this.setPlaying(e.autostart),this.frameCount=0,e.fullscreen?(this.fit=Ie.bind(this),this.fit.domElement=window,this.fit.attached=!0,O.extend(document.body.style,{overflow:"hidden",margin:0,padding:0,top:0,left:0,right:0,bottom:0,position:"fixed"}),O.extend(this.renderer.domElement.style,{display:"block",top:0,left:0,right:0,bottom:0,position:"fixed"}),kt.bind(this.fit.domElement,"resize",this.fit),this.fit()):e.fitted?(this.fit=je.bind(this),O.extend(this.renderer.domElement.style,{display:"block"})):O.isElement(e.domElement)||(this.renderer.setSize(e.width,e.height,this.ratio),this.width=e.width,this.height=e.height),this.renderer.bind(E.Types.resize,De.bind(this)),this.scene=this.renderer.scene,ze.Instances.push(this),e.autostart&&Le.init()};function Ie(){var t=document.body.getBoundingClientRect(),e=this.width=t.width,i=this.height=t.height;this.renderer.setSize(e,i,this.ratio)}function je(){var t=this.renderer.domElement.parentElement;if(t){var e=t.getBoundingClientRect(),i=this.width=e.width,n=this.height=e.height;this.renderer.setSize(i,n,this.ratio)}else console.warn("Two.js: Attempting to fit to parent, but no parent found.")}function De(t,e){this.width=t,this.height=e,this.trigger(E.Types.resize,t,e)}O.extend(ze,N),O.extend(ze.prototype,E,{constructor:ze,appendTo:function(t){return t.appendChild(this.renderer.domElement),this.fit&&(this.fit.domElement!==window&&(this.fit.domElement=t,this.fit.attached=!1),this.update()),this},play:function(){return this.playing=!0,Le.init(),this.trigger(E.Types.play)},pause:function(){return this.playing=!1,this.trigger(E.Types.pause)},setPlaying:function(t){this.playing=t},release:function(t){var e,i,n;if(O.isObject(t)){if("function"==typeof t.unbind&&t.unbind(),t.vertices)for("function"==typeof t.vertices.unbind&&t.vertices.unbind(),e=0;e<t.vertices.length;e++)"function"==typeof(i=t.vertices[e]).unbind&&i.unbind();if(t.children)for(e=0;e<t.children.length;e++)n=t.children[e],this.release(n);return t}},update:function(){var t=!!this._lastFrame,e=O.performance.now();t&&(this.timeDelta=parseFloat((e-this._lastFrame).toFixed(3))),this._lastFrame=e,this.fit&&!this.fit.attached&&(kt.bind(this.fit.domElement,"resize",this.fit),this.fit.attached=!0,this.fit());var i=this.width,n=this.height,r=this.renderer;return i===r.width&&n===r.height||r.setSize(i,n,this.ratio),this.trigger(E.Types.update,this.frameCount,this.timeDelta),this.render()},render:function(){return this.renderer.render(),this.trigger(E.Types.render,this.frameCount++)},add:function(t){var e=t;return e instanceof Array||(e=Array.prototype.slice.call(arguments)),this.scene.add(e),this},remove:function(t){var e=t;return e instanceof Array||(e=Array.prototype.slice.call(arguments)),this.scene.remove(e),this},clear:function(){return this.scene.remove(this.scene.children),this},makeLine:function(t,e,i,n){var r=new Qt(t,e,i,n);return this.scene.add(r),r},makeArrow:function(t,e,i,n,r){var s="number"==typeof r?r:10,o=Math.atan2(n-e,i-t),a=[new z(t,e,void 0,void 0,void 0,void 0,g.move),new z(i,n,void 0,void 0,void 0,void 0,g.line),new z(i-s*Math.cos(o-Math.PI/4),n-s*Math.sin(o-Math.PI/4),void 0,void 0,void 0,void 0,g.line),new z(i,n,void 0,void 0,void 0,void 0,g.move),new z(i-s*Math.cos(o+Math.PI/4),n-s*Math.sin(o+Math.PI/4),void 0,void 0,void 0,void 0,g.line)],l=new Lt(a,!1,!1,!0);return l.noFill(),l.cap="round",l.join="round",this.scene.add(l),l},makeRectangle:function(t,e,i,n){var r=new te(t,e,i,n);return this.scene.add(r),r},makeRoundedRectangle:function(t,e,i,n,r){var s=new ee(t,e,i,n,r);return this.scene.add(s),s},makeCircle:function(t,e,i,n){var r=new Xt(t,e,i,n);return this.scene.add(r),r},makeEllipse:function(t,e,i,n,r){var s=new Jt(t,e,i,n,r);return this.scene.add(s),s},makeStar:function(t,e,i,n,r){var s=new Re(t,e,i,n,r);return this.scene.add(s),s},makeCurve:function(t){var e=arguments.length,i=t;if(!Array.isArray(t)){i=[];for(var n=0;n<e;n+=2){var r=arguments[n];if("number"!=typeof r)break;var s=arguments[n+1];i.push(new z(r,s))}}var o=arguments[e-1],a=new Lt(i,!("boolean"==typeof o?o:void 0),!0),l=a.getBoundingClientRect();return a.center().translation.set(l.left+l.width/2,l.top+l.height/2),this.scene.add(a),a},makePolygon:function(t,e,i,n){var r=new we(t,e,i,n);return this.scene.add(r),r},makeArcSegment:function(t,e,i,n,r,s,o){var a=new ve(t,e,i,n,r,s,o);return this.scene.add(a),a},makePath:function(t){var e=arguments.length,i=t;if(!Array.isArray(t)){i=[];for(var n=0;n<e;n+=2){var r=arguments[n];if("number"!=typeof r)break;var s=arguments[n+1];i.push(new z(r,s))}}var o=arguments[e-1],a=new Lt(i,!("boolean"==typeof o?o:void 0)),l=a.getBoundingClientRect();return"number"==typeof l.top&&"number"==typeof l.left&&"number"==typeof l.right&&"number"==typeof l.bottom&&a.center().translation.set(l.left+l.width/2,l.top+l.height/2),this.scene.add(a),a},makeText:function(t,e,i,n){var r=new ie(t,e,i,n);return this.add(r),r},makeLinearGradient:function(t,e,i,n){var r=Array.prototype.slice.call(arguments,4),s=new Et(t,e,i,n,r);return this.add(s),s},makeRadialGradient:function(t,e,i){var n=Array.prototype.slice.call(arguments,3),r=new Tt(t,e,i,n);return this.add(r),r},makeSprite:function(t,e,i,n,r,s,o){var a=new pe(t,e,i,n,r,s);return o&&a.play(),this.add(a),a},makeImageSequence:function(t,e,i,n,r){var s=new fe(t,e,i,n);return r&&s.play(),this.add(s),s},makeTexture:function(t,e){return new Ft(t,e)},makeGroup:function(t){var e=t;e instanceof Array||(e=Array.prototype.slice.call(arguments));var i=new at;return this.scene.add(i),i.add(e),i},interpret:function(t,e,i){var n=t.tagName.toLowerCase();if(i=void 0===i||i,!(n in de))return null;var r=de[n].call(this,t);return i?this.add(e&&r instanceof at?r.children:r):r.parent&&r.remove(),r},load:function(t,e){var i,n,r,s=new at,o=function(t){for(kt.temp.innerHTML=t,n=0;n<kt.temp.children.length;n++)if(i=kt.temp.children[n],/svg/i.test(i.nodeName))for(r=0;r<i.children.length;r++)s.add(this.interpret(i.children[r]));else s.add(this.interpret(i));if("function"==typeof e){var o=kt.temp.children.length<=1?kt.temp.children[0]:kt.temp.children;e(s,o)}}.bind(this);return/.*\.svg/gi.test(t)?(ue(t,o),s):(o(t),s)}});var Le=kt.getRequestAnimationFrame();function Be(){for(var t=0;t<ze.Instances.length;t++){var e=ze.Instances[t];e.playing&&e.update()}ze.nextFrameID=Le(Be)}Le.init=function(){Be(),Le.init=function(){}},O.extend(ze,{Anchor:z,Collection:it,Events:E,Group:at,Matrix:V,Path:Lt,Registry:Ct,Shape:nt,Text:ie,Vector:A,Gradient:Mt,ImageSequence:fe,LinearGradient:Et,RadialGradient:Tt,Sprite:pe,Stop:Ot,Texture:Ft,ArcSegment:ve,Circle:Xt,Ellipse:Jt,Line:Qt,Polygon:we,Rectangle:te,RoundedRectangle:ee,Star:Re,CanvasRenderer:bt,SVGRenderer:Oe,WebGLRenderer:Fe,Commands:g,Utils:O.extend({Error:St,getRatio:et,defineGetterSetter:Rt,read:de,xhr:ue},O,xt,Q,R)});var Ve=ze,We=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},Ne=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),Ue=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var i=[],n=!0,r=!1,s=void 0;try{for(var o,a=t[Symbol.iterator]();!(n=(o=a.next()).done)&&(i.push(o.value),!e||i.length!==e);n=!0);}catch(t){r=!0,s=t}finally{try{!n&&a.return&&a.return()}finally{if(r)throw s}}return i}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")};String.prototype.startsWith=String.prototype.startsWith||function(t){return 0===this.indexOf(t)},String.prototype.padStart=String.prototype.padStart||function(t,e){for(var i=this;i.length<t;)i=e+i;return i};var He={cb:"0f8ff",tqw:"aebd7",q:"-ffff",qmrn:"7fffd4",zr:"0ffff",bg:"5f5dc",bsq:"e4c4",bck:"---",nch:"ebcd",b:"--ff",bvt:"8a2be2",brwn:"a52a2a",brw:"deb887",ctb:"5f9ea0",hrt:"7fff-",chcT:"d2691e",cr:"7f50",rnw:"6495ed",crns:"8dc",crms:"dc143c",cn:"-ffff",Db:"--8b",Dcn:"-8b8b",Dgnr:"b8860b",Dgr:"a9a9a9",Dgrn:"-64-",Dkhk:"bdb76b",Dmgn:"8b-8b",Dvgr:"556b2f",Drng:"8c-",Drch:"9932cc",Dr:"8b--",Dsmn:"e9967a",Dsgr:"8fbc8f",DsTb:"483d8b",DsTg:"2f4f4f",Dtrq:"-ced1",Dvt:"94-d3",ppnk:"1493",pskb:"-bfff",mgr:"696969",grb:"1e90ff",rbrc:"b22222",rwht:"af0",stg:"228b22",chs:"-ff",gnsb:"dcdcdc",st:"8f8ff",g:"d7-",gnr:"daa520",gr:"808080",grn:"-8-0",grnw:"adff2f",hnw:"0fff0",htpn:"69b4",nnr:"cd5c5c",ng:"4b-82",vr:"0",khk:"0e68c",vnr:"e6e6fa",nrb:"0f5",wngr:"7cfc-",mnch:"acd",Lb:"add8e6",Lcr:"08080",Lcn:"e0ffff",Lgnr:"afad2",Lgr:"d3d3d3",Lgrn:"90ee90",Lpnk:"b6c1",Lsmn:"a07a",Lsgr:"20b2aa",Lskb:"87cefa",LsTg:"778899",Lstb:"b0c4de",Lw:"e0",m:"-ff-",mgrn:"32cd32",nn:"af0e6",mgnt:"-ff",mrn:"8--0",mqm:"66cdaa",mmb:"--cd",mmrc:"ba55d3",mmpr:"9370db",msg:"3cb371",mmsT:"7b68ee","":"-fa9a",mtr:"48d1cc",mmvt:"c71585",mnLb:"191970",ntc:"5fffa",mstr:"e4e1",mccs:"e4b5",vjw:"dead",nv:"--80",c:"df5e6",v:"808-0",vrb:"6b8e23",rng:"a5-",rngr:"45-",rch:"da70d6",pgnr:"eee8aa",pgrn:"98fb98",ptrq:"afeeee",pvtr:"db7093",ppwh:"efd5",pchp:"dab9",pr:"cd853f",pnk:"c0cb",pm:"dda0dd",pwrb:"b0e0e6",prp:"8-080",cc:"663399",r:"--",sbr:"bc8f8f",rb:"4169e1",sbrw:"8b4513",smn:"a8072",nbr:"4a460",sgrn:"2e8b57",ssh:"5ee",snn:"a0522d",svr:"c0c0c0",skb:"87ceeb",sTb:"6a5acd",sTgr:"708090",snw:"afa",n:"-ff7f",stb:"4682b4",tn:"d2b48c",t:"-8080",thst:"d8bfd8",tmT:"6347",trqs:"40e0d0",vt:"ee82ee",whT:"5deb3",wht:"",hts:"5f5f5",w:"-",wgrn:"9acd32"};function qe(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=e>0?t.toFixed(e).replace(/0+$/,"").replace(/\.$/,""):t.toString();return i||"0"}var Ge=function(){function t(e,i,n,r){We(this,t);var s=this;if(void 0===e);else if(Array.isArray(e))this.rgba=e;else if(void 0===n){var o=e&&""+e;o&&function(e){if(e.startsWith("hsl")){var i=e.match(/([\-\d\.e]+)/g).map(Number),n=Ue(i,4),r=n[0],o=n[1],a=n[2],l=n[3];void 0===l&&(l=1),r/=360,o/=100,a/=100,s.hsla=[r,o,a,l]}else if(e.startsWith("rgb")){var h=e.match(/([\-\d\.e]+)/g).map(Number),c=Ue(h,4),d=c[0],u=c[1],f=c[2],p=c[3];void 0===p&&(p=1),s.rgba=[d,u,f,p]}else e.startsWith("#")?s.rgba=t.hexToRgb(e):s.rgba=t.nameToRgb(e)||t.hexToRgb(e)}(o.toLowerCase())}else this.rgba=[e,i,n,void 0===r?1:r]}return Ne(t,[{key:"printRGB",value:function(t){var e=(t?this.rgba:this.rgba.slice(0,3)).map((function(t,e){return qe(t,3===e?3:0)}));return t?"rgba("+e+")":"rgb("+e+")"}},{key:"printHSL",value:function(t){var e=[360,100,100,1],i=["","%","%",""],n=(t?this.hsla:this.hsla.slice(0,3)).map((function(t,n){return qe(t*e[n],3===n?3:1)+i[n]}));return t?"hsla("+n+")":"hsl("+n+")"}},{key:"printHex",value:function(t){var e=this.hex;return t?e:e.substring(0,7)}},{key:"rgba",get:function(){if(this._rgba)return this._rgba;if(!this._hsla)throw new Error("No color is set");return this._rgba=t.hslToRgb(this._hsla)},set:function(t){3===t.length&&(t[3]=1),this._rgba=t,this._hsla=null}},{key:"rgbString",get:function(){return this.printRGB()}},{key:"rgbaString",get:function(){return this.printRGB(!0)}},{key:"hsla",get:function(){if(this._hsla)return this._hsla;if(!this._rgba)throw new Error("No color is set");return this._hsla=t.rgbToHsl(this._rgba)},set:function(t){3===t.length&&(t[3]=1),this._hsla=t,this._rgba=null}},{key:"hslString",get:function(){return this.printHSL()}},{key:"hslaString",get:function(){return this.printHSL(!0)}},{key:"hex",get:function(){return"#"+this.rgba.map((function(t,e){return e<3?t.toString(16):Math.round(255*t).toString(16)})).map((function(t){return t.padStart(2,"0")})).join("")},set:function(e){this.rgba=t.hexToRgb(e)}}],[{key:"hexToRgb",value:function(t){var e=(t.startsWith("#")?t.slice(1):t).replace(/^(\w{3})$/,"$1F").replace(/^(\w)(\w)(\w)(\w)$/,"$1$1$2$2$3$3$4$4").replace(/^(\w{6})$/,"$1FF");if(!e.match(/^([0-9a-fA-F]{8})$/))throw new Error("Unknown hex color; "+t);var i=e.match(/^(\w\w)(\w\w)(\w\w)(\w\w)$/).slice(1).map((function(t){return parseInt(t,16)}));return i[3]=i[3]/255,i}},{key:"nameToRgb",value:function(e){var i=e.toLowerCase().replace("at","T").replace(/[aeiouyldf]/g,"").replace("ght","L").replace("rk","D").slice(-5,4),n=He[i];return void 0===n?n:t.hexToRgb(n.replace(/\-/g,"00").padStart(6,"f"))}},{key:"rgbToHsl",value:function(t){var e=Ue(t,4),i=e[0],n=e[1],r=e[2],s=e[3];i/=255,n/=255,r/=255;var o=Math.max(i,n,r),a=Math.min(i,n,r),l=void 0,h=void 0,c=(o+a)/2;if(o===a)l=h=0;else{var d=o-a;switch(h=c>.5?d/(2-o-a):d/(o+a),o){case i:l=(n-r)/d+(n<r?6:0);break;case n:l=(r-i)/d+2;break;case r:l=(i-n)/d+4}l/=6}return[l,h,c,s]}},{key:"hslToRgb",value:function(t){var e=Ue(t,4),i=e[0],n=e[1],r=e[2],s=e[3],o=void 0,a=void 0,l=void 0;if(0===n)o=a=l=r;else{var h=function(t,e,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?t+6*(e-t)*i:i<.5?e:i<2/3?t+(e-t)*(2/3-i)*6:t},c=r<.5?r*(1+n):r+n-r*n,d=2*r-c;o=h(d,c,i+1/3),a=h(d,c,i),l=h(d,c,i-1/3)}var u=[255*o,255*a,255*l].map(Math.round);return u[3]=s,u}}]),t}(),Xe=function(){function t(){We(this,t),this._events=[]}return Ne(t,[{key:"add",value:function(t,e,i){t.addEventListener(e,i,!1),this._events.push({target:t,type:e,handler:i})}},{key:"remove",value:function(e,i,n){this._events=this._events.filter((function(r){var s=!0;return e&&e!==r.target&&(s=!1),i&&i!==r.type&&(s=!1),n&&n!==r.handler&&(s=!1),s&&t._doRemove(r.target,r.type,r.handler),!s}))}},{key:"destroy",value:function(){this._events.forEach((function(e){return t._doRemove(e.target,e.type,e.handler)})),this._events=[]}}],[{key:"_doRemove",value:function(t,e,i){t.removeEventListener(e,i,!1)}}]),t}();function Ye(t,e,i){var n=!1;function r(t,e,i){return Math.max(e,Math.min(t,i))}function s(t,s,o){if(o&&(n=!0),n){t.preventDefault();var a=e.getBoundingClientRect(),l=a.width,h=a.height,c=s.clientX,d=s.clientY,u=r(c-a.left,0,l),f=r(d-a.top,0,h);i(u/l,f/h)}}function o(t,e){1===(void 0===t.buttons?t.which:t.buttons)?s(t,t,e):n=!1}function a(t,e){1===t.touches.length?s(t,t.touches[0],e):n=!1}t.add(e,"mousedown",(function(t){o(t,!0)})),t.add(e,"touchstart",(function(t){a(t,!0)})),t.add(window,"mousemove",o),t.add(e,"touchmove",a),t.add(window,"mouseup",(function(t){n=!1})),t.add(e,"touchend",(function(t){n=!1})),t.add(e,"touchcancel",(function(t){n=!1}))}var Ze="keydown",Ke="mousedown",$e="focusin";function Je(t,e){return(e||document).querySelector(t)}function Qe(t){t.preventDefault(),t.stopPropagation()}function ti(t,e,i,n,r){t.add(e,Ze,(function(t){i.indexOf(t.key)>=0&&(r&&Qe(t),n(t))}))}var ei=document.createElement("style");ei.textContent=".picker_wrapper.no_alpha .picker_alpha{display:none}.picker_wrapper.no_editor .picker_editor{position:absolute;z-index:-1;opacity:0}.picker_wrapper.no_cancel .picker_cancel{display:none}.layout_default.picker_wrapper{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-flow:row wrap;-webkit-box-pack:justify;justify-content:space-between;-webkit-box-align:stretch;align-items:stretch;font-size:10px;width:25em;padding:.5em}.layout_default.picker_wrapper input,.layout_default.picker_wrapper button{font-size:1rem}.layout_default.picker_wrapper>*{margin:.5em}.layout_default.picker_wrapper::before{content:'';display:block;width:100%;height:0;-webkit-box-ordinal-group:2;order:1}.layout_default .picker_slider,.layout_default .picker_selector{padding:1em}.layout_default .picker_hue{width:100%}.layout_default .picker_sl{-webkit-box-flex:1;flex:1 1 auto}.layout_default .picker_sl::before{content:'';display:block;padding-bottom:100%}.layout_default .picker_editor{-webkit-box-ordinal-group:2;order:1;width:6.5rem}.layout_default .picker_editor input{width:100%;height:100%}.layout_default .picker_sample{-webkit-box-ordinal-group:2;order:1;-webkit-box-flex:1;flex:1 1 auto}.layout_default .picker_done,.layout_default .picker_cancel{-webkit-box-ordinal-group:2;order:1}.picker_wrapper{box-sizing:border-box;background:#f2f2f2;box-shadow:0 0 0 1px silver;cursor:default;font-family:sans-serif;color:#444;pointer-events:auto}.picker_wrapper:focus{outline:none}.picker_wrapper button,.picker_wrapper input{box-sizing:border-box;border:none;box-shadow:0 0 0 1px silver;outline:none}.picker_wrapper button:focus,.picker_wrapper button:active,.picker_wrapper input:focus,.picker_wrapper input:active{box-shadow:0 0 2px 1px dodgerblue}.picker_wrapper button{padding:.4em .6em;cursor:pointer;background-color:whitesmoke;background-image:-webkit-gradient(linear, left bottom, left top, from(gainsboro), to(transparent));background-image:linear-gradient(0deg, gainsboro, transparent)}.picker_wrapper button:active{background-image:-webkit-gradient(linear, left bottom, left top, from(transparent), to(gainsboro));background-image:linear-gradient(0deg, transparent, gainsboro)}.picker_wrapper button:hover{background-color:white}.picker_selector{position:absolute;z-index:1;display:block;-webkit-transform:translate(-50%, -50%);transform:translate(-50%, -50%);border:2px solid white;border-radius:100%;box-shadow:0 0 3px 1px #67b9ff;background:currentColor;cursor:pointer}.picker_slider .picker_selector{border-radius:2px}.picker_hue{position:relative;background-image:-webkit-gradient(linear, left top, right top, from(red), color-stop(yellow), color-stop(lime), color-stop(cyan), color-stop(blue), color-stop(magenta), to(red));background-image:linear-gradient(90deg, red, yellow, lime, cyan, blue, magenta, red);box-shadow:0 0 0 1px silver}.picker_sl{position:relative;box-shadow:0 0 0 1px silver;background-image:-webkit-gradient(linear, left top, left bottom, from(white), color-stop(50%, rgba(255,255,255,0))),-webkit-gradient(linear, left bottom, left top, from(black), color-stop(50%, rgba(0,0,0,0))),-webkit-gradient(linear, left top, right top, from(gray), to(rgba(128,128,128,0)));background-image:linear-gradient(180deg, white, rgba(255,255,255,0) 50%),linear-gradient(0deg, black, rgba(0,0,0,0) 50%),linear-gradient(90deg, gray, rgba(128,128,128,0))}.picker_alpha,.picker_sample{position:relative;background:url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='2' height='2'%3E%3Cpath d='M1,0H0V1H2V2H1' fill='lightgrey'/%3E%3C/svg%3E\") left top/contain white;box-shadow:0 0 0 1px silver}.picker_alpha .picker_selector,.picker_sample .picker_selector{background:none}.picker_editor input{font-family:monospace;padding:.2em .4em}.picker_sample::before{content:'';position:absolute;display:block;width:100%;height:100%;background:currentColor}.picker_arrow{position:absolute;z-index:-1}.picker_wrapper.popup{position:absolute;z-index:2;margin:1.5em}.picker_wrapper.popup,.picker_wrapper.popup .picker_arrow::before,.picker_wrapper.popup .picker_arrow::after{background:#f2f2f2;box-shadow:0 0 10px 1px rgba(0,0,0,0.4)}.picker_wrapper.popup .picker_arrow{width:3em;height:3em;margin:0}.picker_wrapper.popup .picker_arrow::before,.picker_wrapper.popup .picker_arrow::after{content:\"\";display:block;position:absolute;top:0;left:0;z-index:-99}.picker_wrapper.popup .picker_arrow::before{width:100%;height:100%;-webkit-transform:skew(45deg);transform:skew(45deg);-webkit-transform-origin:0 100%;transform-origin:0 100%}.picker_wrapper.popup .picker_arrow::after{width:150%;height:150%;box-shadow:none}.popup.popup_top{bottom:100%;left:0}.popup.popup_top .picker_arrow{bottom:0;left:0;-webkit-transform:rotate(-90deg);transform:rotate(-90deg)}.popup.popup_bottom{top:100%;left:0}.popup.popup_bottom .picker_arrow{top:0;left:0;-webkit-transform:rotate(90deg) scale(1, -1);transform:rotate(90deg) scale(1, -1)}.popup.popup_left{top:0;right:100%}.popup.popup_left .picker_arrow{top:0;right:0;-webkit-transform:scale(-1, 1);transform:scale(-1, 1)}.popup.popup_right{top:0;left:100%}.popup.popup_right .picker_arrow{top:0;left:0}",document.documentElement.firstElementChild.appendChild(ei);var ii=function(){function t(e){We(this,t),this.settings={popup:"right",layout:"default",alpha:!0,editor:!0,editorFormat:"hex",cancelButton:!1,defaultColor:"#0cf"},this._events=new Xe,this.onChange=null,this.onDone=null,this.onOpen=null,this.onClose=null,this.setOptions(e)}return Ne(t,[{key:"setOptions",value:function(t){var e=this;if(t){var i=this.settings;if(t instanceof HTMLElement)i.parent=t;else{i.parent&&t.parent&&i.parent!==t.parent&&(this._events.remove(i.parent),this._popupInited=!1),function(t,e,i){for(var n in t)e[n]=t[n]}(t,i),t.onChange&&(this.onChange=t.onChange),t.onDone&&(this.onDone=t.onDone),t.onOpen&&(this.onOpen=t.onOpen),t.onClose&&(this.onClose=t.onClose);var n=t.color||t.colour;n&&this._setColor(n)}var r=i.parent;if(r&&i.popup&&!this._popupInited){var s=function(t){return e.openHandler(t)};this._events.add(r,"click",s),ti(this._events,r,[" ","Spacebar","Enter"],s),this._popupInited=!0}else t.parent&&!i.popup&&this.show()}}},{key:"openHandler",value:function(t){if(this.show()){t&&t.preventDefault(),this.settings.parent.style.pointerEvents="none";var e=t&&t.type===Ze?this._domEdit:this.domElement;setTimeout((function(){return e.focus()}),100),this.onOpen&&this.onOpen(this.colour)}}},{key:"closeHandler",value:function(t){var e=t&&t.type,i=!1;if(t)if(e===Ke||e===$e){var n=(this.__containedEvent||0)+100;t.timeStamp>n&&(i=!0)}else Qe(t),i=!0;else i=!0;i&&this.hide()&&(this.settings.parent.style.pointerEvents="",e!==Ke&&this.settings.parent.focus(),this.onClose&&this.onClose(this.colour))}},{key:"movePopup",value:function(t,e){this.closeHandler(),this.setOptions(t),e&&this.openHandler()}},{key:"setColor",value:function(t,e){this._setColor(t,{silent:e})}},{key:"_setColor",value:function(t,e){if("string"==typeof t&&(t=t.trim()),t){e=e||{};var i=void 0;try{i=new Ge(t)}catch(t){if(e.failSilently)return;throw t}if(!this.settings.alpha){var n=i.hsla;n[3]=1,i.hsla=n}this.colour=this.color=i,this._setHSLA(null,null,null,null,e)}}},{key:"setColour",value:function(t,e){this.setColor(t,e)}},{key:"show",value:function(){if(!this.settings.parent)return!1;if(this.domElement){var t=this._toggleDOM(!0);return this._setPosition(),t}var e,i,n=(e=this.settings.template||'<div class="picker_wrapper" tabindex="-1"><div class="picker_arrow"></div><div class="picker_hue picker_slider"><div class="picker_selector"></div></div><div class="picker_sl"><div class="picker_selector"></div></div><div class="picker_alpha picker_slider"><div class="picker_selector"></div></div><div class="picker_editor"><input aria-label="Type a color name or hex value"/></div><div class="picker_sample"></div><div class="picker_done"><button>Ok</button></div><div class="picker_cancel"><button>Cancel</button></div></div>',(i=document.createElement("div")).innerHTML=e,i.firstElementChild);return this.domElement=n,this._domH=Je(".picker_hue",n),this._domSL=Je(".picker_sl",n),this._domA=Je(".picker_alpha",n),this._domEdit=Je(".picker_editor input",n),this._domSample=Je(".picker_sample",n),this._domOkay=Je(".picker_done button",n),this._domCancel=Je(".picker_cancel button",n),n.classList.add("layout_"+this.settings.layout),this.settings.alpha||n.classList.add("no_alpha"),this.settings.editor||n.classList.add("no_editor"),this.settings.cancelButton||n.classList.add("no_cancel"),this._ifPopup((function(){return n.classList.add("popup")})),this._setPosition(),this.colour?this._updateUI():this._setColor(this.settings.defaultColor),this._bindEvents(),!0}},{key:"hide",value:function(){return this._toggleDOM(!1)}},{key:"destroy",value:function(){this._events.destroy(),this.domElement&&this.settings.parent.removeChild(this.domElement)}},{key:"_bindEvents",value:function(){var t=this,e=this,i=this.domElement,n=this._events;function r(t,e,i){n.add(t,e,i)}r(i,"click",(function(t){return t.preventDefault()})),Ye(n,this._domH,(function(t,i){return e._setHSLA(t)})),Ye(n,this._domSL,(function(t,i){return e._setHSLA(null,t,1-i)})),this.settings.alpha&&Ye(n,this._domA,(function(t,i){return e._setHSLA(null,null,null,1-i)}));var s=this._domEdit;r(s,"input",(function(t){e._setColor(this.value,{fromEditor:!0,failSilently:!0})})),r(s,"focus",(function(t){var e=this;e.selectionStart===e.selectionEnd&&e.select()})),this._ifPopup((function(){var e=function(e){return t.closeHandler(e)};r(window,Ke,e),r(window,$e,e),ti(n,i,["Esc","Escape"],e);var s=function(e){t.__containedEvent=e.timeStamp};r(i,Ke,s),r(i,$e,s),r(t._domCancel,"click",e)}));var o=function(e){t._ifPopup((function(){return t.closeHandler(e)})),t.onDone&&t.onDone(t.colour)};r(this._domOkay,"click",o),ti(n,i,["Enter"],o)}},{key:"_setPosition",value:function(){var t=this.settings.parent,e=this.domElement;t!==e.parentNode&&t.appendChild(e),this._ifPopup((function(i){"static"===getComputedStyle(t).position&&(t.style.position="relative");var n=!0===i?"popup_right":"popup_"+i;["popup_top","popup_bottom","popup_left","popup_right"].forEach((function(t){t===n?e.classList.add(t):e.classList.remove(t)})),e.classList.add(n)}))}},{key:"_setHSLA",value:function(t,e,i,n,r){r=r||{};var s=this.colour,o=s.hsla;[t,e,i,n].forEach((function(t,e){(t||0===t)&&(o[e]=t)})),s.hsla=o,this._updateUI(r),this.onChange&&!r.silent&&this.onChange(s)}},{key:"_updateUI",value:function(t){if(this.domElement){t=t||{};var e=this.colour,i=e.hsla,n="hsl("+360*i[0]+", 100%, 50%)",r=e.hslString,s=e.hslaString,o=this._domH,a=this._domSL,l=this._domA,h=Je(".picker_selector",o),c=Je(".picker_selector",a),d=Je(".picker_selector",l);y(0,h,i[0]),this._domSL.style.backgroundColor=this._domH.style.color=n,y(0,c,i[1]),_(0,c,1-i[2]),a.style.color=r,_(0,d,1-i[3]);var u=r,f=u.replace("hsl","hsla").replace(")",", 0)"),p="linear-gradient("+[u,f]+")";if(this._domA.style.backgroundImage=p+", url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='2' height='2'%3E%3Cpath d='M1,0H0V1H2V2H1' fill='lightgrey'/%3E%3C/svg%3E\")",!t.fromEditor){var g=this.settings.editorFormat,m=this.settings.alpha,v=void 0;switch(g){case"rgb":v=e.printRGB(m);break;case"hsl":v=e.printHSL(m);break;default:v=e.printHex(m)}this._domEdit.value=v}this._domSample.style.color=s}function y(t,e,i){e.style.left=100*i+"%"}function _(t,e,i){e.style.top=100*i+"%"}}},{key:"_ifPopup",value:function(t,e){this.settings.parent&&this.settings.popup?t&&t(this.settings.popup):e&&e()}},{key:"_toggleDOM",value:function(t){var e=this.domElement;if(!e)return!1;var i=t?"":"none",n=e.style.display!==i;return n&&(e.style.display=i),n}}],[{key:"StyleElement",get:function(){return ei}}]),t}(),ni=[{type:"textfield",label:"Image Url",input:!0,key:"imageUrl",weight:20},{type:"select",input:!0,key:"imageType",label:"Image Type",tooltip:"Element used to display background image",weight:20,defaultValue:"image",dataSrc:"values",data:{values:[{label:"Image",value:"image"},{label:"SVG",value:"svg"}]}},{type:"textfield",label:"Width",input:!0,key:"width",customConditional:function(t){return!t.data.autoSize},weight:20},{type:"textfield",label:"Height",input:!0,key:"height",customConditional:function(t){return!t.data.autoSize},weight:20},{type:"checkbox",label:"Set Size Automatically",input:!0,key:"autoSize",tooltip:"Background image will fill the available width. Uncheck this if you want to specify width/height manually.",weight:20},{type:"textfield",label:"Default Zoom",input:!0,key:"defaultZoom",placeholder:"100",weight:20},{type:"textfield",label:"Default Stroke Color",description:"Start with # sign",input:!0,key:"defaultStroke",placeholder:"#333",weight:20},{type:"textfield",label:"Default Fill Color",description:"Start with # sign",input:!0,key:"defaultFill",placeholder:"#ccc",weight:20},{type:"number",label:"Default Line Width",input:!0,key:"defaultLineWidth",placeholder:"1",weight:20},{type:"number",label:"Default Circle Size",input:!0,key:"defaultCircleSize",placeholder:"10",weight:20},{key:"placeholder",ignore:!0}],ri=[{key:"unique",ignore:!0}],si=[{key:"multiple",ignore:!0}],oi=function(){for(var t=0,e=0,i=arguments.length;e<i;e++)t+=arguments[e].length;var n=Array(t),r=0;for(e=0;e<i;e++)for(var s=arguments[e],o=0,a=s.length;o<a;o++,r++)n[r]=s[o];return n},ai=t.Components.components.component.editForm;function li(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return ai.apply(void 0,oi([[{key:"display",components:ni},{key:"validation",components:ri},{key:"data",components:si}]],t))}function hi(t){var e=this;return{pencil:{state:{mode:"pencil"},eventStart:function(i){e.points=[i],e.prev=i,e.curve=e.two.makeCurve([new t.Vector(e.prev.x,e.prev.y),new t.Vector(i.x,i.y+1)],!0),e.curve.noFill().stroke=e.state.stroke,e.curve.linewidth=e.state.linewidth,e.curve.vertices.forEach((function(t){return t.addSelf(e.curve.translation)})),e.curve.translation.clear(),e.two.update(),e.layers.push(e.curve)},drag:function(i){e.points.push(i),e.curve.vertices.push(new t.Vector(i.x,i.y)),e.two.update(),e.prev=i},eventEnd:function(){var t=e.dataValue.slice();t.push(Object.assign({},e.state,{points:e.points})),e.dataValue=t,e.triggerChange()},draw:function(i){var n=e.two.makeCurve(i.points.map((function(e){return new t.Vector(e.x,e.y)})),!0);return n.noFill().stroke=i.stroke,n.linewidth=i.linewidth,n.vertices.forEach((function(t){return t.addSelf(n.translation)})),n.translation.clear(),n}},line:{state:{mode:"line"},eventStart:function(t){e.center=t,e.line=e.two.makeLine(t.x,t.y,t.x,t.y),e.line.fill=e.state.fill,e.line.stroke=e.state.stroke,e.line.linewidth=e.state.linewidth,e.two.update(),e.layers.push(e.line),e.layers.length},drag:function(t){e.line.vertices[1].x=t.x,e.line.vertices[1].y=t.y,e.two.update()},eventEnd:function(){var t=e.dataValue.slice(),i=e.line.vertices.map((function(t){return{x:t.x,y:t.y}}));t.push(Object.assign({},e.state,{vertices:i})),e.dataValue=t,e.triggerChange()},draw:function(t){var i=e.two.makeLine(t.vertices[0].x,t.vertices[0].y,t.vertices[1].x,t.vertices[1].y);return i.fill=t.fill,i.stroke=t.stroke,i.linewidth=t.linewidth,i}},circle:{state:{mode:"circle"},eventStart:function(t){e.center=t;var i=e.two.makeCircle(t.x,t.y,e.state.circleSize);i.fill=e.state.fill,i.stroke=e.state.stroke,i.linewidth=e.state.linewidth,e.two.update(),e.layers.push(i)},drag:function(){},eventEnd:function(){var t=e.dataValue.slice();t.push(Object.assign({},e.state,{center:e.center})),e.dataValue=t,e.triggerChange()},draw:function(t){var i=e.two.makeCircle(t.center.x,t.center.y,t.circleSize);return i.fill=t.fill,i.stroke=t.stroke,i.linewidth=t.linewidth,i}},rectangle:{cursor:{hover:"crosshair"},state:{mode:"rectangle"},eventStart:function(t){e.dragStartPoint=t},drag:function(t){e.dragEndPoint=t,e.rectangle&&e.rectangle.remove(),e.width=Math.abs(e.dragEndPoint.x-e.dragStartPoint.x),e.height=Math.abs(e.dragEndPoint.y-e.dragStartPoint.y),e.center={x:Math.min(e.dragStartPoint.x,e.dragEndPoint.x)+e.width/2,y:Math.min(e.dragStartPoint.y,e.dragEndPoint.y)+e.height/2},e.rectangle=e.two.makeRectangle(e.center.x,e.center.y,e.width,e.height),e.rectangle.fill=e.state.fill,e.rectangle.stroke=e.state.stroke,e.rectangle.linewidth=e.state.linewidth,e.two.update(),e.layers.push(e.rectangle)},eventEnd:function(){var t=e.dataValue.slice();delete e.rectangle;var i={center:e.center,width:e.width,height:e.height};t.push(Object.assign({},e.state,i)),e.dataValue=t,e.triggerChange()},draw:function(t){var i=e.two.makeRectangle(t.center.x,t.center.y,t.width,t.height);return i.fill=t.fill,i.stroke=t.stroke,i.linewidth=t.linewidth,i}},zoomIn:{cursor:{hover:"zoom-in"},state:{mode:"zoomIn"},eventStart:function(t){return e.zoom(t,e.zoomInfo.multiplier)}},zoomOut:{cursor:{hover:"zoom-out"},state:{mode:"zoomOut"},eventStart:function(t){return e.zoom(t,1/e.zoomInfo.multiplier)}},dragImage:{cursor:{hover:"grab",clicked:"grabbing"},state:{mode:"dragImage"},eventStart:function(t){return e.dragStartPoint=t},drag:function(t){e.dragLastPoint||(e.dragLastPoint=e.dragStartPoint);var i={x:Math.round(t.x-e.dragStartPoint.x),y:Math.round(t.y-e.dragStartPoint.y)};0===i.x&&0===i.y||(e.dragImage(i),e.dragLastPoint=t)}}}}var ci={modes:[{title:"Pencil",key:"pencil",icon:"fa fa-pencil"},{title:"Line",key:"line",icon:"fa fa-minus"},{title:"Circle",key:"circle",icon:"fa fa-circle",input:{type:"number",class:"formio-sketchpad-radius-input",attributes:{min:0}}},{title:"Rectangle",key:"rectangle",icon:"fa fa-square-o"},{title:"Zoom In",key:"zoomIn",icon:"fa fa-search-plus"},{title:"Zoom Out",key:"zoomOut",icon:"fa fa-search-minus"},{title:"Drag Zoomed Image",key:"dragImage",icon:"fa fa-hand-paper-o"}],styles:[{title:"Stroke Color",key:"stroke",icon:"fa fa-square-o"},{title:"Fill Color",key:"fill",icon:"fa fa-square"},{title:"Line Width",key:"width",icon:"fa fa-minus",input:{type:"number",class:"formio-sketchpad-linewidth-input",attributes:{min:0,max:250}}}],actions:[{title:"Undo",key:"undo",icon:"fa fa-undo"},{title:"Redo",key:"redo",icon:"fa fa-repeat"},{title:"Reset Zoom",key:"resetZoom",icon:"fa fa-search"},{title:"Clear All",key:"clearAll",icon:"fa fa-ban"}]},di=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),ui=function(){return(ui=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var r in e=arguments[i])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},fi=function(){for(var t=0,e=0,i=arguments.length;e<i;e++)t+=arguments[e].length;var n=Array(t),r=0;for(e=0;e<i;e++)for(var s=arguments[e],o=0,a=s.length;o<a;o++,r++)n[r]=s[o];return n},pi=t.Components.components.field,gi=function(e){function i(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=e.apply(this,t)||this;return r.dimensionsCorrection=1,r.imageType=r.component.imageType,r.modes=hi.call(r,Ve),r.state={mode:Object.keys(r.modes)[0],stroke:r.component.defaultStroke||i.defaultStroke,fill:r.component.defaultFill||i.defaultFill,linewidth:r.component.defaultLineWidth||i.defaultLineWidth,circleSize:r.component.defaultCircleSize||i.defaultCircleSize},r.dimensionsMultiplier=1,r.zoomInfo={viewBox:{},canvasViewBox:{},multiplier:1.5,totalMultiplier:1},r.deleted=[],r.layers=[],r}return di(i,e),Object.defineProperty(i,"defaultFill",{get:function(){return"#ccc"},enumerable:!1,configurable:!0}),Object.defineProperty(i,"defaultStroke",{get:function(){return"#333"},enumerable:!1,configurable:!0}),Object.defineProperty(i,"defaultLineWidth",{get:function(){return 1},enumerable:!1,configurable:!0}),Object.defineProperty(i,"defaultCircleSize",{get:function(){return 10},enumerable:!1,configurable:!0}),i.schema=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return pi.schema.apply(pi,fi([{type:"sketchpad",label:"Sketchpad",key:"sketchpad",input:!0,multiple:!0,modalEdit:!0,imageType:"image",autoSize:!0,defaultZoom:100,defaultStroke:i.defaultStroke,defaultFill:i.defaultFill,defaultLineWidth:i.defaultLineWidth,defaultCircleSize:i.defaultCircleSize}],t))},Object.defineProperty(i,"builderInfo",{get:function(){return{title:"Sketchpad",group:"premium",icon:"image",weight:110,documentation:"http://help.form.io/userguide/",schema:i.schema()}},enumerable:!1,configurable:!0}),i.prototype.render=function(){return e.prototype.render.call(this,this.renderTemplate(this.templateName,ui({},this.renderContext)))},i.prototype.loadComponentRefs=function(t){this.loadRefs(t,ui({canvas:"single",drawingContainer:"single",background:"single",backgroundImage:"single",totalMultiplier:"single",previewContainer:"single",previewDrawing:"single"},this.buttonsRefs))},i.prototype.init=function(){var i=this,n=new t.Formio.Promise((function(t,e){i.backgroundReady={resolve:t,reject:e}}));return this.backgroundReady.promise=n,e.prototype.init.call(this)},i.prototype.attach=function(i){var n=this,r=new t.Formio.Promise((function(t,e){n.backgroundReady={resolve:t,reject:e}}));this.backgroundReady.promise=r;var s=e.prototype.attach.call(this,i);return this.loadComponentRefs(i),this.refs.canvas&&(this.createDrawingArea(),this.backgroundReady.promise.then((function(){return n.onBackgroundReady()})),this.disabled||this.shouldDisabled||this.readOnly||this.attachDrawEvents(),"image"===this.imageType&&this.refs.backgroundImage?this.loadBackgroundImage(this.refs.backgroundImage):this.addBackground(),this.attachToolbar()),s},Object.defineProperty(i.prototype,"buttonsRefs",{get:function(){var t={};return Object.values(ci).forEach((function(e){return e.forEach((function(e){t[e.key]="single",e.input&&(t[e.key+"-input"]="single")}))})),t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"renderContext",{get:function(){return{zoomInfo:{totalMultiplier:this.zoomInfo?Math.round(100*this.zoomInfo.totalMultiplier)/100:1},buttonGroups:this.buttonGroups,disabled:e.prototype.disabled}},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"defaultSchema",{get:function(){return i.schema()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"templateName",{get:function(){return"sketchpad"},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"emptyValue",{get:function(){return[]},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dataReady",{get:function(){return this.backgroundReady.promise},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"attachFunctions",{get:function(){var t=this,e=function(t,e,i){var n=new ii(t);return t.style.color=e,n.setColor(e,!0),n.onChange=function(e){t.style.color=e.rgbaString,i(e.rgbaString)},t},i=function(e,i,n){var r=t.refs[e];r&&(r.addEventListener("change",(function(t){return n(t.target.value)})),r.value=i)};return{stroke:function(i){return e(i,t.state.stroke,(function(e){return t.state.stroke=e}))},fill:function(i){return e(i,t.state.fill,(function(e){return t.state.fill=e}))},width:function(){return i("width-input",t.state.linewidth,(function(e){return t.state.linewidth=e}))},circle:function(){return i("circle-input",t.state.circleSize,(function(e){return t.state.circleSize=e}))}}},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"buttonGroups",{get:function(){return Object.entries(ci).map((function(t){return t[1]}))},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"componentLabel",{get:function(){return this.component.hideLabel?"":'<label class="control-label">'+this.component.label+"</label><br>"},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"viewBoxFromSubmission",{get:function(){return this._viewBoxFromSubmission},set:function(t){this._viewBoxFromSubmission=t;var e=t.width,i=t.height,n=t.minX,r=t.minY;this.backgroundReady.isReady&&this.setCanvasViewBox(e,i,n,r)},enumerable:!1,configurable:!0}),i.prototype.loadBackgroundImage=function(t){var e=this;t.addEventListener("load",(function(){return e.addBackground()})),t.setAttribute("src",this.component.imageUrl)},i.prototype.createDrawingArea=function(){this.two=new Ve({type:Ve.Types.svg}).appendTo(this.refs.canvas),this.canvasSvg=this.two.renderer.domElement,this.addClass(this.canvasSvg,"formio-sketchpad-svg"),this.canvasSvg.setAttribute("preserveAspectRatio","xMidYMid meet")},i.prototype.getActualCoordinate=function(t){var e=t.x,i=t.y,n=this.zoomInfo.canvasViewBox.current.minX,r=this.zoomInfo.canvasViewBox.current.minY;return t.x=Math.round(e/this.zoomInfo.totalMultiplier/this.dimensionsMultiplier+n),t.y=Math.round(i/this.zoomInfo.totalMultiplier/this.dimensionsMultiplier+r),t},i.prototype.onBackgroundReady=function(){var e=this;this.backgroundReady.isReady=!0,this.addEventListener(window,"resize",t.Utils._.debounce((function(){return e.stretchDrawingArea()}),100)),this.resetZoom()},i.prototype.addBackground=function(){var e=this;this.refs.backgroundImage&&this.refs.backgroundImage.complete?this.setBackgroundImage():this.component.imageUrl&&"svg"===this.imageType&&t.Formio.makeStaticRequest(this.component.imageUrl,"GET",null,{noToken:!0,headers:{}}).then((function(t){e.setBackgroundImage(t)})).catch((function(t){console.warn(t),e.refs.background.innerHTML=e.t("Background image failed to load. Tagpad doesn't work without background image"),e.backgroundReady.reject()}))},i.prototype.parseSvg=function(t){var e=(new DOMParser).parseFromString(t,"image/svg+xml").getElementsByTagName("svg");return e&&e[0]?e[0]:null},i.prototype.prepareSvg=function(t){t.removeAttribute("width"),t.removeAttribute("height"),t.setAttribute("ref","backgroundImage")},i.prototype.setSvgImage=function(t){var e=this.parseSvg(t);if(e){var i=e.getAttribute("viewBox"),n=i?i.split(" ").map(parseFloat):this.mapDimensionsFromAttributes(e);this.setDimensions.apply(this,n),this.prepareSvg(e);var r=this.dimensions;this.assignZoomInfo(r),this.setViewBoxAttribute(e,r),t=(t=(new XMLSerializer).serializeToString(e)).replace("<svg:svg","<svg").replace("</svg:svg>","</svg>"),this.loadComponentRefs(this.element),this.refs.background.innerHTML=t}else console.warn("Sketchpad '"+this.component.key+"': Background SVG doesn't contain <svg> tag on it")},i.prototype.assignZoomInfo=function(e,i){void 0===i&&(i="viewBox"),this.zoomInfo[i].default={width:e.width,height:e.height,minX:e.minX,minY:e.minY},this.state.viewBox=this.zoomInfo[i].default,this.zoomInfo[i].current=t.Utils._.cloneDeep(this.zoomInfo[i].default)},i.prototype.buttonAttributes=function(t){return t&&t.input&&t.input.attributes?Object.entries(t.input.attributes).map((function(t){return t[0]+"='"+t[1]+"'"})).join(" "):""},i.prototype.attachDrawEvents=function(){var t=this;this.canvasSvg.addEventListener("mousedown",(function(e){e.preventDefault();var i=t.canvasSvg.getBoundingClientRect(),n="default";t.modes[t.state.mode].cursor&&(n=t.modes[t.state.mode].cursor.clicked||t.modes[t.state.mode].cursor.hover),t.canvasSvg.style.cursor=n,t.modes[t.state.mode].eventStart&&t.modes[t.state.mode].eventStart(t.getActualCoordinate({x:e.clientX-i.left,y:e.clientY-i.top}));var r=function(e){e.preventDefault();var i=t.canvasSvg.getBoundingClientRect();t.modes[t.state.mode].drag&&t.modes[t.state.mode].drag(t.getActualCoordinate({x:e.clientX-i.left,y:e.clientY-i.top}))},s=function(e){e.preventDefault(),t.canvasSvg.removeEventListener("mousemove",r),t.canvasSvg.removeEventListener("mouseup",s),document.removeEventListener("mouseup",s);var i="default";t.modes[t.state.mode].cursor&&(i=t.modes[t.state.mode].cursor.hover||i),t.canvasSvg.style.cursor=i;var n=t.canvasSvg.getBoundingClientRect();t.modes[t.state.mode].eventEnd&&t.modes[t.state.mode].eventEnd(t.getActualCoordinate({x:e.clientX-n.left,y:e.clientY-n.top}))};return t.canvasSvg.addEventListener("mousemove",r),t.canvasSvg.addEventListener("mouseup",s),document.addEventListener("mouseup",s),!1})),this.canvasSvg.addEventListener("touchstart",(function(e){e.preventDefault();var i=t.canvasSvg.getBoundingClientRect(),n=e.changedTouches[0],r="default";t.modes[t.state.mode].cursor&&(r=t.modes[t.state.mode].cursor.clicked||t.modes[t.state.mode].cursor.hover),t.canvasSvg.style.cursor=r,t.modes[t.state.mode].eventStart&&t.modes[t.state.mode].eventStart(t.getActualCoordinate({x:n.clientX-i.left,y:n.clientY-i.top}));var s=function(e){e.preventDefault();var i=t.canvasSvg.getBoundingClientRect(),n=e.changedTouches[0];t.modes[t.state.mode].drag&&t.modes[t.state.mode].drag(t.getActualCoordinate({x:n.clientX-i.left,y:n.clientY-i.top}))},o=function(e){e.preventDefault(),t.canvasSvg.removeEventListener("touchmove",s),t.canvasSvg.removeEventListener("touchend",o);var i=t.canvasSvg.getBoundingClientRect(),n=e.changedTouches[0],r="default";t.modes[t.state.mode].cursor&&(r=t.modes[t.state.mode].cursor.hover||r),t.canvasSvg.style.cursor=r,t.modes[t.state.mode].eventEnd&&t.modes[t.state.mode].eventEnd(t.getActualCoordinate({x:n.clientX-i.left,y:n.clientY-i.top}))};return t.canvasSvg.addEventListener("touchmove",s),t.canvasSvg.addEventListener("touchend",o),!1})),this.two.update()},i.prototype.attachToolbar=function(){this.attachModesButtons(),this.attachStylesButtons(),this.attachActionsButtons(),this.setActiveButton(this.state.mode)},i.prototype.attachModesButtons=function(){var t=this;ci.modes.forEach((function(e){var i=t.refs[e.key];if(i&&t.modes[e.key]){var n=t.modes[e.key];i.addEventListener("click",(function(e){return t.setState(n.state)})),t.callAttachFunction(i,e.key)}}))},i.prototype.attachStylesButtons=function(){var t=this;ci.styles.forEach((function(e){var i=t.refs[e.key];i&&t.callAttachFunction(i,e.key)}))},i.prototype.attachActionsButtons=function(){var t=this;ci.actions.forEach((function(e){var i=t.refs[e.key];i&&i.addEventListener("click",(function(){return t[e.key]()}))}))},i.prototype.callAttachFunction=function(t,e){this.attachFunctions[e]&&this.attachFunctions[e](t)},i.prototype.setState=function(e){Object.assign(this.state,e),this.setActiveButton(this.state.mode),this.canvasSvg.style.cursor=t.Utils._.get(this.modes[this.state.mode],"cursor.hover","default")},i.prototype.setActiveButton=function(t){var e=this;ci.modes.forEach((function(i){e.refs[i.key]&&e.removeClass(e.refs[i.key],"active"),e.refs[t]&&e.addClass(e.refs[t],"active")}))},i.prototype.setBackgroundImage=function(t){if("svg"===this.imageType)if(t&&t.startsWith("<?xml"))this.setSvgImage(t);else{this.imageType="image";var e=new Image;e.setAttribute("ref","backgroundImage"),this.refs.background.appendChild(e),this.loadBackgroundImage(e)}else this.setRasterImage();this.onBackgroundImageWasSetted()},i.prototype.setRasterImage=function(){var t=this.refs.backgroundImage.naturalWidth,e=this.refs.backgroundImage.naturalHeight;this.setDimensions(0,0,t,e),this.assignZoomInfo(this.dimensions)},i.prototype.setCanvasViewBox=function(t,e,i,n){var r,s;void 0===i&&(i=0),void 0===n&&(n=0),this.setDimensions(i,n,t,e),this.assignZoomInfo(this.dimensions,"canvasViewBox"),(null===(s=null===(r=this.zoomInfo)||void 0===r?void 0:r.viewBox)||void 0===s?void 0:s.default)?this.dimensionsCorrection=this.dimensions.width/this.zoomInfo.viewBox.default.width:console.warn("Default ViewBox is not defined"),this.setViewBoxAttribute(this.canvasSvg,this.zoomInfo.canvasViewBox.default),this.setEditorSize(this.dimensions.width,this.dimensions.height),this.stretchDrawingArea()},i.prototype.calculateCanvasViewBox=function(){var t=this.component.width,e=this.component.height;if(this.component.autoSize){var i=this.calculateAutoSize();t=i.width,e=i.height}return t&&e&&!this.component.autoSize&&(this.refs.drawingContainer.style.maxWidth=t+"px",this.refs.drawingContainer.style.maxHeight=e+"px"),"image"===this.imageType&&(t=this.refs.backgroundImage.naturalWidth,e=this.refs.backgroundImage.naturalHeight),{minX:0,minY:0,width:t,height:e}},i.prototype.onBackgroundImageWasSetted=function(){this.loadRefs(this.element,{backgroundImage:"single",component:"single"});var t=this.viewBoxFromSubmission||this.calculateCanvasViewBox(),e=t.width,i=t.height,n=t.minX,r=t.minY;this.setCanvasViewBox(e,i,n,r),this.draw(this.dataValue),this.backgroundReady.resolve()},i.prototype.calculateAutoSize=function(){var t,e=Math.round(null===(t=this.refs.drawingContainer)||void 0===t?void 0:t.offsetWidth),i=this.dimensions.width/this.dimensions.height,n=Math.round(e/i),r=Math.round(window.innerHeight-.2*window.innerHeight);return(r<n||0===e)&&(n=r,e=Math.round(n*i)),{width:e,height:n}},i.prototype.setOpenModalElement=function(){var t="\n      "+this.componentLabel+"\n      <div class='formio-sketchpad-modal-preview-container' ref='previewContainer'>\n        <div ref=\"openModal\">\n          <img class='formio-sketchpad-modal-preview-background' src=\""+this.component.imageUrl+'" width="100%" alt="sketchpad preview background"/>\n          '+this.getPreviewImage()+"\n        </div>\n      </div>\n    ";this.componentModal.setOpenModalElement(t)},i.prototype.getPreviewImage=function(){return this.canvasSvg&&this.two&&this.zoomInfo.viewBox.default?'<img class="formio-sketchpad-modal-preview-drawing" src="data:image/svg+xml;base64,'+this.getEncodedDrawing()+'"\n                ref="previewDrawing" width="100%" alt="sketchpad preview drawing"/>':""},i.prototype.getValueAsString=function(t,e){return t&&t.length?"[Complex Data]":""},i.prototype.getEncodedDrawing=function(){var t=this.getSvg(),e=(new XMLSerializer).serializeToString(t);return window.btoa(e)},i.prototype.getModalPreviewTemplate=function(){return"\n      "+this.componentLabel+"\n      <div class='formio-sketchpad-modal-preview-container' ref='previewContainer'>\n        <div ref=\"openModal\">\n          <img class='formio-sketchpad-modal-preview-background' src="+this.component.imageUrl+' width="100%" alt="sketchpad preview background"/>\n          '+this.getPreviewImage()+"\n        </div>\n      </div>"},i.prototype.mapDimensionsFromAttributes=function(t){return[{attribute:"x",defaultValue:0},{attribute:"y",defaultValue:0},{attribute:"width",defaultValue:640},{attribute:"height",defaultValue:480}].map((function(e){return parseFloat(t.getAttribute(e.attribute))||e.defaultValue}))},i.prototype.setDimensions=function(t,e,i,n){this.dimensions={width:i,height:n,minX:t,minY:e}},i.prototype.stretchDrawingArea=function(){var t=this.calculateAutoSize(),e=t.width,i=t.height;if(e&&i){var n=this.zoomInfo,r=n.canvasViewBox,s=n.totalMultiplier,o=r.default.width,a=r.default.height;if(this.dimensionsMultiplier=e/o,this.dimensions.width=Math.round(o*this.dimensionsMultiplier),this.dimensions.height=Math.round(a*this.dimensionsMultiplier),e===this.editorSize.width&&i===this.editorSize.height)return;var l=s>1?this.dimensions.width:this.dimensions.width*s,h=s>1?this.dimensions.height:this.dimensions.height*s;this.setEditorSize(l,h)}},i.prototype.setEditorSize=function(t,e){this.two&&(this.editorSize={width:t,height:e},this.two.width=t,this.two.height=e,this.two.update()),this.refs.backgroundImage&&(this.refs.backgroundImage.setAttribute("width",t),this.refs.backgroundImage.setAttribute("height",e)),this.canvasSvg&&(this.canvasSvg.style.width=t,this.canvasSvg.style.height=e)},i.prototype.clear=function(){this.two&&this.two.clear()},i.prototype.clearAll=function(){this.layers=[],this.dataValue=[],this.two&&(this.clear(),this.two.update())},i.prototype.draw=function(t){var e=this;this.two&&(this.clear(),t&&t.length?(this.layers=t.map((function(t){return e.modes[t.mode].draw(t)})),this.two.update(),this.appendDrawingToPreview()):this.two.update())},i.prototype.appendDrawingToPreview=function(){var t;if(null===(t=this.componentModal)||void 0===t?void 0:t.element){this.loadComponentRefs(this.componentModal.element);var e="data:image/svg+xml;base64,"+this.getEncodedDrawing();if(this.refs.previewDrawing)this.refs.previewDrawing.setAttribute("src",e);else{var i=new Image;i.src=e,this.addClass(i,"formio-sketchpad-modal-preview-drawing"),i.setAttribute("ref","previewDrawing"),this.refs.previewContainer&&(this.refs.previewContainer.appendChild(i),this.addEventListener(i,"click",this.componentModal.openModalListener))}}},i.prototype.undo=function(){var t=this.dataValue.slice();t.length&&(this.deleted.push(t.pop()),this.dataValue=t,this.triggerChange(),this.draw(t))},i.prototype.redo=function(){if(this.deleted.length){var t=this.dataValue.slice();t.push(this.deleted.pop()),this.dataValue=t,this.triggerChange(),this.draw(t)}},i.prototype.setValue=function(t,i){var n;e.prototype.setValue.call(this,t,i);var r=null===(n=null==t?void 0:t[0])||void 0===n?void 0:n.viewBox;r&&(this.viewBoxFromSubmission=r),this.backgroundReady.isReady&&this.two&&this.draw(t)},i.prototype.getSvg=function(){var t=this.canvasSvg.cloneNode(!0);this.addClass(t,"formio-sketchpad-preview-svg"),t.removeAttribute("style");var e=this.zoomInfo.canvasViewBox.default;return this.setViewBoxAttribute(t,e),t},i.prototype.normalizeSvgOffset=function(t){void 0===t&&(t="viewBox");var e=this.zoomInfo[t];this.zoomInfo[t].current.minX=e.current.minX<e.default.minX?e.default.minX:e.current.minX,this.zoomInfo[t].current.minY=e.current.minY<e.default.minY?e.default.minY:e.current.minY;var i=e.default.width-e.current.width+e.default.minX,n=e.default.height-e.current.height+e.default.minY;this.zoomInfo[t].current.minX=e.current.minX>i?i:e.current.minX,this.zoomInfo[t].current.minY=e.current.minY>n?n:e.current.minY},i.prototype.setViewBoxAttribute=function(t,e){t.setAttribute("viewBox",e.minX+" "+e.minY+" "+e.width+" "+e.height)},i.prototype.updateSvgViewBox=function(t){void 0===t&&(t="viewBox");var e=this.zoomInfo[t].current;"svg"===this.imageType&&("viewBox"===t?this.setViewBoxAttribute(this.refs.backgroundImage,e):this.setViewBoxAttribute(this.canvasSvg,e))},i.prototype.drag=function(t,e){void 0===e&&(e="viewBox"),this.zoomInfo[e].current.minX=this.zoomInfo[e].current.minX-t.x,this.zoomInfo[e].current.minY=this.zoomInfo[e].current.minY-t.y,this.normalizeSvgOffset(e),this.updateSvgViewBox(e)},i.prototype.dragImage=function(t){var e=this.dimensionsCorrection?{x:t.x/this.dimensionsCorrection,y:t.y/this.dimensionsCorrection}:t;this.drag(e),this.drag(t,"canvasViewBox")},i.prototype.setTotalMultiplier=function(t){this.zoomInfo.totalMultiplier=t,this.refs.totalMultiplier.innerHTML=this.t(Math.round(100*t)/100)},i.prototype.zoomImage=function(t,e){void 0===e&&(e="viewBox"),this.zoomInfo[e].current.width=Math.round(this.zoomInfo[e].default.width/this.zoomInfo.totalMultiplier),this.zoomInfo[e].current.height=Math.round(this.zoomInfo[e].default.height/this.zoomInfo.totalMultiplier);var i=this.zoomInfo[e].current,n=i.width,r=i.height,s=this.zoomInfo[e].default,o=s.width,a=s.height;n>o&&r>a?this.zoomOut(e):this.zoomIn(t,e),this.updateSvgViewBox(e)},i.prototype.zoom=function(t,e){this.setTotalMultiplier(this.zoomInfo.totalMultiplier*e);var i=this.dimensionsCorrection?{x:t.x/this.dimensionsCorrection,y:t.y/this.dimensionsCorrection}:t;this.zoomImage(i),this.zoomImage(t,"canvasViewBox")},i.prototype.zoomOut=function(e){void 0===e&&(e="viewBox"),this.setEditorSize(this.dimensions.width*this.zoomInfo.totalMultiplier,this.dimensions.height*this.zoomInfo.totalMultiplier),this.zoomInfo[e].current=t.Utils._.cloneDeep(this.zoomInfo[e].default)},i.prototype.zoomIn=function(t,e){void 0===e&&(e="viewBox"),this.canvasSvg.width===this.dimensions.width&&this.canvasSvg.height===this.dimensions.height||this.setEditorSize(this.dimensions.width,this.dimensions.height),"svg"!==this.imageType?this.refs.backgroundImage&&this.setEditorSize(this.dimensions.width*this.zoomInfo.totalMultiplier,this.dimensions.height*this.zoomInfo.totalMultiplier):(this.zoomInfo[e].current.minX=t.x-this.zoomInfo[e].current.width/2,this.zoomInfo[e].current.minY=t.y-this.zoomInfo[e].current.height/2),this.normalizeSvgOffset(e)},i.prototype.resetZoom=function(){this.zoom({x:0,y:0},this.component.defaultZoom/100/this.zoomInfo.totalMultiplier)},i.editForm=li,i}(pi),mi=function(){if("undefined"!=typeof Map)return Map;function t(t,e){var i=-1;return t.some((function(t,n){return t[0]===e&&(i=n,!0)})),i}return function(){function e(){this.__entries__=[]}return Object.defineProperty(e.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),e.prototype.get=function(e){var i=t(this.__entries__,e),n=this.__entries__[i];return n&&n[1]},e.prototype.set=function(e,i){var n=t(this.__entries__,e);~n?this.__entries__[n][1]=i:this.__entries__.push([e,i])},e.prototype.delete=function(e){var i=this.__entries__,n=t(i,e);~n&&i.splice(n,1)},e.prototype.has=function(e){return!!~t(this.__entries__,e)},e.prototype.clear=function(){this.__entries__.splice(0)},e.prototype.forEach=function(t,e){void 0===e&&(e=null);for(var i=0,n=this.__entries__;i<n.length;i++){var r=n[i];t.call(e,r[1],r[0])}},e}()}(),vi="undefined"!=typeof window&&"undefined"!=typeof document&&window.document===document,yi=void 0!==n.g&&n.g.Math===Math?n.g:"undefined"!=typeof self&&self.Math===Math?self:"undefined"!=typeof window&&window.Math===Math?window:Function("return this")(),_i="function"==typeof requestAnimationFrame?requestAnimationFrame.bind(yi):function(t){return setTimeout((function(){return t(Date.now())}),1e3/60)},bi=["top","right","bottom","left","width","height","size","weight"],wi="undefined"!=typeof MutationObserver,xi=function(){function t(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=function(t,e){var i=!1,n=!1,r=0;function s(){i&&(i=!1,t()),n&&a()}function o(){_i(s)}function a(){var t=Date.now();if(i){if(t-r<2)return;n=!0}else i=!0,n=!1,setTimeout(o,20);r=t}return a}(this.refresh.bind(this))}return t.prototype.addObserver=function(t){~this.observers_.indexOf(t)||this.observers_.push(t),this.connected_||this.connect_()},t.prototype.removeObserver=function(t){var e=this.observers_,i=e.indexOf(t);~i&&e.splice(i,1),!e.length&&this.connected_&&this.disconnect_()},t.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},t.prototype.updateObservers_=function(){var t=this.observers_.filter((function(t){return t.gatherActive(),t.hasActive()}));return t.forEach((function(t){return t.broadcastActive()})),t.length>0},t.prototype.connect_=function(){vi&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),wi?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},t.prototype.disconnect_=function(){vi&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},t.prototype.onTransitionEnd_=function(t){var e=t.propertyName,i=void 0===e?"":e;bi.some((function(t){return!!~i.indexOf(t)}))&&this.refresh()},t.getInstance=function(){return this.instance_||(this.instance_=new t),this.instance_},t.instance_=null,t}(),ki=function(t,e){for(var i=0,n=Object.keys(e);i<n.length;i++){var r=n[i];Object.defineProperty(t,r,{value:e[r],enumerable:!1,writable:!1,configurable:!0})}return t},Si=function(t){return t&&t.ownerDocument&&t.ownerDocument.defaultView||yi},Ri=Ai(0,0,0,0);function Ci(t){return parseFloat(t)||0}function Oi(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];return e.reduce((function(e,i){return e+Ci(t["border-"+i+"-width"])}),0)}var Mi="undefined"!=typeof SVGGraphicsElement?function(t){return t instanceof Si(t).SVGGraphicsElement}:function(t){return t instanceof Si(t).SVGElement&&"function"==typeof t.getBBox};function Ei(t){return vi?Mi(t)?function(t){var e=t.getBBox();return Ai(0,0,e.width,e.height)}(t):function(t){var e=t.clientWidth,i=t.clientHeight;if(!e&&!i)return Ri;var n=Si(t).getComputedStyle(t),r=function(t){for(var e={},i=0,n=["top","right","bottom","left"];i<n.length;i++){var r=n[i],s=t["padding-"+r];e[r]=Ci(s)}return e}(n),s=r.left+r.right,o=r.top+r.bottom,a=Ci(n.width),l=Ci(n.height);if("border-box"===n.boxSizing&&(Math.round(a+s)!==e&&(a-=Oi(n,"left","right")+s),Math.round(l+o)!==i&&(l-=Oi(n,"top","bottom")+o)),!function(t){return t===Si(t).document.documentElement}(t)){var h=Math.round(a+s)-e,c=Math.round(l+o)-i;1!==Math.abs(h)&&(a-=h),1!==Math.abs(c)&&(l-=c)}return Ai(r.left,r.top,a,l)}(t):Ri}function Ai(t,e,i,n){return{x:t,y:e,width:i,height:n}}var Ti=function(){function t(t){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=Ai(0,0,0,0),this.target=t}return t.prototype.isActive=function(){var t=Ei(this.target);return this.contentRect_=t,t.width!==this.broadcastWidth||t.height!==this.broadcastHeight},t.prototype.broadcastRect=function(){var t=this.contentRect_;return this.broadcastWidth=t.width,this.broadcastHeight=t.height,t},t}(),Pi=function(t,e){var i,n,r,s,o,a,l,h=(n=(i=e).x,r=i.y,s=i.width,o=i.height,a="undefined"!=typeof DOMRectReadOnly?DOMRectReadOnly:Object,l=Object.create(a.prototype),ki(l,{x:n,y:r,width:s,height:o,top:r,right:n+s,bottom:o+r,left:n}),l);ki(this,{target:t,contentRect:h})},Fi=function(){function t(t,e,i){if(this.activeObservations_=[],this.observations_=new mi,"function"!=typeof t)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=t,this.controller_=e,this.callbackCtx_=i}return t.prototype.observe=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(t instanceof Si(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var e=this.observations_;e.has(t)||(e.set(t,new Ti(t)),this.controller_.addObserver(this),this.controller_.refresh())}},t.prototype.unobserve=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(t instanceof Si(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var e=this.observations_;e.has(t)&&(e.delete(t),e.size||this.controller_.removeObserver(this))}},t.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},t.prototype.gatherActive=function(){var t=this;this.clearActive(),this.observations_.forEach((function(e){e.isActive()&&t.activeObservations_.push(e)}))},t.prototype.broadcastActive=function(){if(this.hasActive()){var t=this.callbackCtx_,e=this.activeObservations_.map((function(t){return new Pi(t.target,t.broadcastRect())}));this.callback_.call(t,e,t),this.clearActive()}},t.prototype.clearActive=function(){this.activeObservations_.splice(0)},t.prototype.hasActive=function(){return this.activeObservations_.length>0},t}(),zi="undefined"!=typeof WeakMap?new WeakMap:new mi,Ii=function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var i=xi.getInstance(),n=new Fi(e,i,this);zi.set(this,n)};["observe","unobserve","disconnect"].forEach((function(t){Ii.prototype[t]=function(){var e;return(e=zi.get(this))[t].apply(e,arguments)}}));var ji=void 0!==yi.ResizeObserver?yi.ResizeObserver:Ii,Di=[{type:"textfield",label:"Image Url",input:!0,key:"imageUrl",weight:20},{type:"textfield",label:"Width",input:!0,key:"canvasWidth",weight:20},{type:"textfield",label:"Height",input:!0,key:"canvasHeight",weight:20},{type:"textfield",label:"Dot Size",input:!0,key:"dotSize",placeholder:"10",weight:20},{type:"textfield",label:"Dot Stroke Size",input:!0,key:"dotStrokeSize",placeholder:"2",weight:20},{type:"textfield",label:"Dot Stroke Color",input:!0,key:"dotStrokeColor",placeholder:"#333",weight:20},{type:"textfield",label:"Dot Fill Color",input:!0,key:"dotFillColor",placeholder:"#ccc",weight:20},{type:"textfield",label:"Dot Custom Label",input:!0,key:"dotCustomLabel",placeholder:"x",tooltip:"Custom static label for dot.",weight:20}],Li=[{key:"multiple",ignore:!0}],Bi=[{type:"textarea",input:!0,key:"template",label:"Dot Value Template",editor:"ace",as:"html",rows:10,weight:18,tooltip:"The HTML template for displaying dots' values in preview mode (View Tab, generated PDF)",description:'Four available variables. "dot" is the data of the dot, "index" is the index of the dot (indexes start from \'0\'), "components" is an array of components of the form associated with the dot and "instance" is an instance of the Tagpad.'}],Vi=function(){for(var t=0,e=0,i=arguments.length;e<i;e++)t+=arguments[e].length;var n=Array(t),r=0;for(e=0;e<i;e++)for(var s=arguments[e],o=0,a=s.length;o<a;o++,r++)n[r]=s[o];return n},Wi=t.Components.components.component.editForm;function Ni(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Wi.apply(void 0,Vi([[{key:"display",components:Di},{key:"data",components:Li},{key:"templates",label:"Templates",weight:5,components:Bi}]],t))}var Ui=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Hi=function(){return(Hi=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var r in e=arguments[i])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},qi=function(){for(var t=0,e=0,i=arguments.length;e<i;e++)t+=arguments[e].length;var n=Array(t),r=0;for(e=0;e<i;e++)for(var s=arguments[e],o=0,a=s.length;o<a;o++,r++)n[r]=s[o];return n},Gi=t.Components.components.component,Xi=t.Components.components.nestedarray,Yi=function(e){function i(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];var r=e.apply(this,i)||this;r.type="tagpad",r.dots=[];var s=new t.Formio.Promise((function(t,e){r.backgroundReady={resolve:t,reject:e}}));return r.backgroundReady.promise=s,r.dimensionsMultiplier=1,r.sizeFromSubmission=!1,r}return Ui(i,e),i.schema=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Xi.schema.apply(Xi,qi([{type:"tagpad",label:"Tagpad",key:"tagpad",input:!0,dotSize:10,dotStrokeSize:2,dotStrokeColor:"#333",dotFillColor:"#ccc",dotCustomLabel:"",components:[],tree:!0,template:i.defaultDotPreviewTemplate}],t))},Object.defineProperty(i,"builderInfo",{get:function(){return{title:"Tagpad",group:"premium",icon:"tag",weight:115,documentation:"",schema:i.schema()}},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"defaultSchema",{get:function(){return i.schema()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"emptyValue",{get:function(){return[]},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"defaultValue",{get:function(){return[]},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"iterableRows",{get:function(){return this.editForms},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"buttons",{get:function(){var t=this,e={};return[{name:"removeDot",method:"removeSelectedDot"}].forEach((function(i){t.hasButton(i.name)&&(e[i.name]=i)})),e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dataReady",{get:function(){return this.backgroundReady.promise},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"renderContext",{get:function(){return{selectedDot:this.selectedDot,hasDots:this.dots&&this.dots.length||this.dataValue.length,buttons:this.buttons,canvasMaxHeight:this.userDefiniedCanvasSize.height?this.userDefiniedCanvasSize.height+"px":"50%",canvasMaxWidth:this.userDefiniedCanvasSize.width?this.userDefiniedCanvasSize.width+"px":"50%"}},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"userDefiniedCanvasSize",{get:function(){var t=parseInt(this.component.canvasWidth,10),e=parseInt(this.component.canvasHeight,10);return isNaN(t)||isNaN(e)?{width:void 0,height:void 0}:{width:t,height:e}},enumerable:!1,configurable:!0}),Object.defineProperty(i,"defaultDotPreviewTemplate",{get:function(){return'<div class="dot-preview-label"> Dot {{index + 1}}: </div>\n    {% Object.keys(dot).forEach(function(key) { %}\n      <div style="margin-left: 15px;"><span class="dot-preview-field-label">{{key}}</span>:\n        <p class="dot-preview-value">\n          {{\n            instance.getComponent([index, key]) && \'getValueAsString\' in instance.getComponent([index, key])\n              ? instance.getComponent([index, key]).getValueAsString(dot[key])\n              : dot[key]\n          }}\n        </p>\n    </div>\n    {% }) %}'},enumerable:!1,configurable:!0}),i.prototype.init=function(){var t=this;if(this.builderMode)return this.editForms=[],e.prototype.init.call(this);this.components=this.components||[];var i=this.dataValue||this.emptyValue;this.editForms=i.map((function(e,i){return{isOpen:!1,data:e.dot?e.dot.data:e.data,components:t.createFormComponents(e,i)}}))},i.prototype.render=function(t){if(this.builderMode)return e.prototype.render.call(this);var i=this.renderContext;return e.prototype.render.call(this,t||this.renderTemplate("tagpad",Hi(Hi({},i),{components:this.renderComponents(this.formComponents)})))},i.prototype.attach=function(i){var n=this,r=new t.Formio.Promise((function(t,e){n.backgroundReady={resolve:t,reject:e}}));return this.backgroundReady.promise=r,this.builderMode||(this.loadRefs(i,{canvas:"single",background:"single",form:"single",canvasImage:"single",image:"single",removeDot:"single"}),this.formComponents&&this.attachComponents(this.refs.form,this.formComponents),this.refs.background&&this.hasBackgroundImage&&(this.createDrawingArea(),this.backgroundReady.promise.then((function(){n.resizeObserver=new ji((function(){if(n.originalImageSize&&(!n.originalImageSize.width||!n.originalImageSize.height)){n.setOriginalImageSize();var t=n.originalImageSize,e=t.width,i=t.height;n.setDimensions(0,0,e,i),n.setViewBoxAttribute(n.canvasSvg,n.dimensions)}n.stretchDrawingArea()})),n.refs.background&&n.resizeObserver.observe(n.refs.background)})),this.disabled||this.shouldDisabled||this.readOnly||this.attachDrawEvents(),this.refs.image&&!this.imageWasLoaded?this.refs.image.addEventListener("load",(function(t){n.setOriginalImageSize(),n.imageWasLoaded=!0,n.addBackground()})):this.addBackground()),this.attachButtons(),this.dataValue.length>0&&0===this.dots.length?this.createDots():this.dots.length>0&&this.dots.forEach((function(t){return n.drawDot(t.dot,t.index)}))),e.prototype.attach.call(this,i)},i.prototype.beforeFocus=function(e){"beforeFocus"in this.parent&&this.parent.beforeFocus(this);var i=this.getRelativePath(e.path),n=t.Utils.getArrayFromComponentPath(i);t.Utils._.isNumber(n[0])&&this.selectDot(n[0])},i.prototype.getRelativePath=function(t){var e="."+this.key,i=this.isInputComponent?this.path:this.path.slice(0).replace(e,"");return t.replace(i,"")},i.prototype.setOriginalImageSize=function(){this.loadRefs(this.element,{background:"single",canvasContainer:"single"});var t=window.getComputedStyle(this.refs.background),e=parseInt(null==t?void 0:t.width,10),i=parseInt(null==t?void 0:t.height,10);e=isNaN(e)?0:e,i=isNaN(i)?0:i,this.originalImageSize={width:e,height:i}},i.prototype.attachDrawEvents=function(){var t=this;if(!this.options.readOnly&&this.canvasSvg){var e=function(e){e.preventDefault();var i=t.canvasSvg.getBoundingClientRect(),n=t.getActualCoordinate({x:e.clientX-i.left,y:e.clientY-i.top});t.addDot({coordinate:n,data:{}}),t.selectDot(t.dots.length-1)};this.canvasSvg.addEventListener("mouseup",e);var i=function(e){e.preventDefault();var i=t.canvasSvg.getBoundingClientRect(),n=e.changedTouches[0],r=t.getActualCoordinate({x:n.pageX-i.left,y:n.pageY-i.top});t.addDot({coordinate:r,data:{}}),t.selectDot(t.dots.length-1)};this.canvasSvg.addEventListener("touchend",i),this.on("destroy",(function(){t.canvasSvg.removeEventListener("touchend",i),t.canvasSvg.removeEventListener("mouseup",e)})),this.two.update()}},i.prototype.attachButtons=function(){var e=this;t.Utils._.each(this.buttons,(function(t){var i=e.refs[""+t.name];i&&e.addEventListener(i,"click",(function(n){n.preventDefault(),i.setAttribute("disabled","disabled"),e.setLoading(i,!0),"function"==typeof e[t.method]&&e[t.method](),i.removeAttribute("disabled"),e.setLoading(i,!1)}))}))},i.prototype.redraw=function(){e.prototype.redraw.call(this);var t=[];this.dots.forEach((function(e){return t.push(e.shape.circle,e.shape.text)})),this.two&&this.two.add(t)},i.prototype.destroy=function(){e.prototype.destroy.call(this),this.emit("destroy"),this.off("destroy")},i.prototype.destroyDot=function(t){if(this.dots[t]){var e=this.dots[t];e.shape.circle._renderer.elem.removeEventListener("mouseup",this.dotClicked),e.shape.text._renderer.elem.removeEventListener("mouseup",this.dotClicked)}},i.prototype.destroyComponents=function(){if(this.builderMode||!this.formComponents)return e.prototype.destroyComponents.call(this);this.formComponents.slice().forEach((function(t){return t.destroy()}))},i.prototype.addBackground=function(){this.refs.image&&this.refs.image.complete&&!this.imageWasLoaded?this.imageWasLoaded=!0:this.refs.image&&this.refs.image.complete&&this.imageWasLoaded&&this.setBackgroundImage()},i.prototype.setBackgroundImage=function(t){if(this.sizeFromSubmission)this.setViewBoxAttribute(this.canvasSvg,this.dimensions);else{var e=this.originalImageSize,i=e.width,n=e.height;this.setDimensions(0,0,i,n),this.setViewBoxAttribute(this.canvasSvg,this.dimensions)}this.loadRefs(this.refs.background,{backgroundImage:"single"}),this.stretchDrawingArea(),this.backgroundReady.resolve()},i.prototype.mapDimensionsFromAttributes=function(t){return[{attribute:"x",defaultValue:0},{attribute:"y",defaultValue:0},{attribute:"width",defaultValue:640},{attribute:"height",defaultValue:480}].map((function(e){return parseFloat(t.getAttribute(e.attribute))||e.defaultValue}))},i.prototype.setDimensions=function(t,e,i,n){this.dimensions={width:i,height:n,minX:t,minY:e}},i.prototype.setViewBoxAttribute=function(t,e){t.setAttribute("viewBox",e.minX+" "+e.minY+" "+e.width+" "+e.height)},i.prototype.hasButton=function(t){switch(t){case"removeDot":return!this.options.readOnly;default:return!1}},Object.defineProperty(i.prototype,"iteratableRows",{get:function(){return this.editForms},enumerable:!1,configurable:!0}),i.prototype.componentContext=function(t){return this.iteratableRows[t.row]?this.iteratableRows[t.row].data:{}},i.prototype.createFormComponents=function(e,i){var n=this,r=[];return this.component.components.forEach((function(s){var o=t.Utils._.clone(n.options);o.row=""+i,o.name+="["+i+"]";var a=e.dot?e.dot.data:e.data,l=n.createComponent(s,o,a);r.push(l)})),r},i.prototype.redrawDots=function(){this.dots=[],this.two.clear(),this.two.render(),this.createDots()},i.prototype.createDots=function(){var t=this,e=this.dataValue;e&&e.length&&this.two&&(e.forEach((function(e,i){t.dots[i]||t.addDot(e)})),this.dots.splice(e.length),this.editForms.splice(e.length))},i.prototype.getComponent=function(e,i){var n=null,r=(e=Array.isArray(e)?e:[e])[0],s=e[1],o=e.slice(2);return t.Utils._.isNumber(r)&&s&&(n=this.editForms[r].components.find((function(t){return t.key===s})))&&(t.Utils._.isFunction(i)&&i(n,this.getComponents),o.length&&"getComponent"in n)?n.getComponent(o,i):n},i.prototype.rescaleImage=function(e){var i=this;if(void 0===e&&(e={}),e.fromSubmission&&this.dataValue.length)return t.Utils._.get(this.dataValue,"[0].coordinate.width",!1)?(this.setDimensions(0,0,this.dataValue[0].coordinate.width,this.dataValue[0].coordinate.height),void(this.sizeFromSubmission=!0)):void(this.hasBackgroundImage&&this.backgroundReady.promise.then((function(){i.dataValue=i.dataValue.map((function(t){return t.coordinate.width=i.dimensions.width,t.coordinate.height=i.dimensions.height,t}))})))},i.prototype.setValue=function(t,e){this.dataValue=t,this.rescaleImage(e),this.createDots(),this.rebuild()},i.prototype.getActualCoordinate=function(t){return t.x=Math.round(t.x/this.dimensionsMultiplier)+this.dimensions.minX,t.y=Math.round(t.y/this.dimensionsMultiplier)+this.dimensions.minY,t.width=this.dimensions.width,t.height=this.dimensions.height,t},i.prototype.selectDot=function(e){if(this.selectedDot&&this.dots[this.selectedDot.index]&&(this.dots[this.selectedDot.index].shape.circle.dashes=[0]),!t.Utils._.isNumber(e)||!this.dots[e])return this.selectedDot=null,void this.redraw();var i=this.dots[e];this.selectedDot=i,this.dots[this.selectedDot.index].shape.circle.dashes=[1],this.formComponents=this.editForms[e].components,this.redraw(),this.triggerChange()},i.prototype.dotClicked=function(t,e){t.stopPropagation(),this.selectDot(e)},i.prototype.addDot=function(t){var e=this.dots.length,i=this.drawDot(t,e);this.dots.push({index:e,dot:t,shape:i}),this.dataValue[e]||this.dataValue.push(t),this.editForms.push({components:this.createFormComponents(this.dots[e],e),data:t})},i.prototype.drawDot=function(t,e){var i=this,n=t.coordinate,r=n.x,s=n.y,o=this.drawDotCircle(r,s,this.component.dotSize,e),a=this.drawDotLabel(r,s,this.component.dotCustomLabel||e+1);return this.two.add(o,a),this.two.update(),o._renderer.elem.addEventListener("mouseup",(function(t){return i.dotClicked(t,e)})),a._renderer.elem.addEventListener("mouseup",(function(t){return i.dotClicked(t,e)})),{circle:o,text:a}},i.prototype.drawDotCircle=function(t,e,i,n){var r=this.two.makeCircle(t,e,i);return r.fill=this.component.dotFillColor,r.stroke=this.component.dotStrokeColor,r.linewidth=this.component.dotStrokeSize,r.className+=" formio-tagpad-dot",this.selectedDot&&this.selectedDot.index===n&&(r.dashes=[1]),r},i.prototype.drawDotLabel=function(t,e,i){var n=new Ve.Text(i,t,e);return n.className+=" formio-tagpad-dot-index",n.styles={color:this.component.dotStrokeColor},n},i.prototype.createDrawingArea=function(){this.two=new Ve({type:Ve.Types.svg,width:"100%",height:"100%"}).appendTo(this.refs.canvas),this.canvasSvg=this.two.renderer.domElement,this.canvasSvg.setAttribute("preserveAspectRatio","xMidYMid meet")},i.prototype.stretchDrawingArea=function(){var t,e;this.loadRefs(this.element,{background:"single"});var i=null===(t=this.refs.background)||void 0===t?void 0:t.offsetWidth,n=null===(e=this.refs.background)||void 0===e?void 0:e.offsetHeight;if(i&&n){var r=i/this.dimensions.width;this.dimensionsMultiplier!==r&&(this.dimensionsMultiplier=i/this.dimensions.width,this.setEditorSize(i,n))}},i.prototype.setEditorSize=function(t,e){this.two.width=t,this.two.height=e,this.two.update(),this.refs.image&&(this.refs.image.setAttribute("width",t),this.refs.image.setAttribute("height",e))},Object.defineProperty(i.prototype,"hasBackgroundImage",{get:function(){return this.component.image||this.component.imageUrl},enumerable:!1,configurable:!0}),i.prototype.removeSelectedDot=function(){this.selectedDot&&this.dataValue[this.selectedDot.index]&&(this.destroyDot(this.selectedDot.index),this.destroyComponents(),this.dataValue.splice(this.selectedDot.index,1),this.dots=[],this.editForms=[],this.components=[],this.createDots(),this.selectDot(0))},i.prototype.focus=function(){return this.refs.canvas&&this.refs.canvas.focus()},i.prototype.checkData=function(t,e,i){var n=this;return t=t||this.rootValue,e=e||{},i=i||this.data,Gi.prototype.checkData.call(this,t,e,i),this.editForms.reduce((function(i,r,s){return n.checkDot(t,e,r.data,s)&&i}),!0)},i.prototype.checkValidity=function(t,e,i){return t=t||this.rootValue,i=i||this.data,this.checkCondition(i,t)?this.checkComponentValidity(t,e,i):(this.setCustomValidity(""),!0)},i.prototype.checkComponentValidity=function(t,i,n){var r=this;if(!e.prototype.checkComponentValidity.call(this,t,i,n))return!1;var s=!0;if(this.editForms.forEach((function(t,e){var n=r.checkDotValidity(t,i,r.dots[e]);s=s&&n})),!s)return!1;var o=this.invalid||this.invalidMessage(t,i);return this.setCustomValidity(o,i),!0},i.prototype.checkDot=function(t,i,n,r){var s=e.prototype.checkData.call(this,t,i,n,this.editForms[r].components);return this.setDotValidity(this.dots[r],s),s},i.prototype.checkDotValidity=function(t,e,i){var n=!0;if(!t)return!0;var r=e||t.dirty;return t.components.forEach((function(e){(r=r||!e.pristine)&&(e.setPristine(!r),t.dirty=!!r,n=n&&e.checkValidity(null,r,t.data))})),this.setDotValidity(i,n),!!n},i.prototype.addDotNumberToErrorMessages=function(t){this.editForms[t.index].components.forEach((function(e){e.errors.forEach((function(e){var i=" (see dot "+(t.index+1)+")";e.message.includes(i)||(e.message+=i,e.messages.forEach((function(t){return t.message+=i})))}))}))},i.prototype.setDotValidity=function(t,e){if(t){var i=e?this.component.dotStrokeColor:"#ff0000";t.shape.circle.stroke=i,t.shape.text.styles.color=i,this.two.update(),this.addDotNumberToErrorMessages(t)}},i.prototype.getDataAsString=function(){var t=this,e="",n=this.component.template||i.defaultDotPreviewTemplate;return this.iterableRows.forEach((function(i,r){var s=i.data,o=i.components,a=t.interpolate(n,{dot:s,index:r,components:o,instance:t});e+=a})),e},i.prototype.getValueAsString=function(i,n){var r=this;if(!i||!i.length)return"";if(n&&n.email){var s="";t.Utils.eachComponent(this.components,(function(t){s+="<th>"+t.label+"</th>"}));var o='\n        <table border="1" style="width:100%">\n          <thead>\n            <tr><th>Dots</th>'+s+"</tr>\n          </thead>\n          <tbody>\n      ";return i.map((function(e,i){var s=r.editForms[i].components,a="";t.Utils.eachComponent(s,(function(t){a+='<td style="text-align: center">',t.isInputComponent&&t.visible&&!t.skipInEmail&&(a+=t.getView(t.dataValue,n)),a+="</td>"})),o+='\n          <tr>\n            <td style="text-align: center">'+(i+1)+"</td>\n            "+a+"\n          </tr>\n        "})),o+="</tbody></table>"}return e.prototype.getValueAsString.call(this,i,n)},i.editForm=Ni,i}(Xi),Zi=[{type:"checkbox",input:!0,weight:105,key:"inlineEdit",label:"Inline Editing",tooltip:"Check this if you would like your changes within 'edit' mode to be committed directly to the submission object as that row is being changed"},{key:"defaultValue",ignore:!0},{key:"multiple",ignore:!0}],Ki=[{key:"placeholder",ignore:!0},{key:"modalEdit",ignore:!0}],$i=[{type:"textarea",label:"Header Template",key:"templates.header",rows:5,editor:"ace",as:"handlebars",input:!0,placeholder:"/*** Lodash Template Code ***/",tooltip:"This is the <a href='https://lodash.com/docs/4.17.5#template'>Lodash Template</a> used to render the header of the Dynamic Wizard.",customConditional:function(){return!t.Utils.Evaluator.noeval}},{type:"textarea",label:"Row Template",key:"templates.row",rows:5,editor:"ace",as:"handlebars",input:!0,placeholder:"/*** Lodash Template Code ***/",description:'Three available variables. "row" is an object of one row\'s data, "components" is the array of components in the grid and "state" is current row\'s state (can be "draft" or "saved").',tooltip:"This is the <a href='https://lodash.com/docs/4.17.5#template'>Lodash Template</a> used to render each row of the Dynamic Wizard.",customConditional:function(){return!t.Utils.Evaluator.noeval}},{type:"textarea",label:"Footer Template",key:"templates.footer",rows:5,editor:"ace",as:"handlebars",input:!0,placeholder:"/*** Lodash Template Code ***/",description:'Two available variables. "value" is the array of row data and "components" is the array of components in the grid.',tooltip:"This is the <a href='https://lodash.com/docs/4.17.5#template'>Lodash Template</a> used to render the footer of the Dynamic Wizard.",customConditional:function(){return!t.Utils.Evaluator.noeval}},{type:"textfield",input:!0,key:"rowClass",label:"Row CSS Class",placeholder:"Row CSS Class",tooltip:"CSS class to add to the edit row wrapper."}],Ji=[{weight:110,key:"validate.minLength",label:"Minimum Length",placeholder:"Minimum Length",type:"number",tooltip:"The minimum length requirement this field must meet.",input:!0},{weight:120,key:"validate.maxLength",label:"Maximum Length",placeholder:"Maximum Length",type:"number",tooltip:"The maximum length requirement this field must meet.",input:!0},{type:"checkbox",input:!0,weight:105,key:"rowDrafts",label:"Enable Row Drafts",tooltip:"Allow save rows even if their data is invalid. Errors will occur when try to submit with invalid rows."}],Qi=function(){for(var t=0,e=0,i=arguments.length;e<i;e++)t+=arguments[e].length;var n=Array(t),r=0;for(e=0;e<i;e++)for(var s=arguments[e],o=0,a=s.length;o<a;o++,r++)n[r]=s[o];return n},tn=t.Components.components.component.editForm;function en(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return tn.apply(void 0,Qi([[{label:"Templates",key:"templates",weight:5,components:$i},{key:"display",components:Ki},{key:"data",components:Zi},{key:"validation",components:Ji}]],t))}var nn,rn=n(213),sn=n(131),on={row:rn.Z,header:sn.Z},an=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),ln=function(){for(var t=0,e=0,i=arguments.length;e<i;e++)t+=arguments[e].length;var n=Array(t),r=0;for(e=0;e<i;e++)for(var s=arguments[e],o=0,a=s.length;o<a;o++,r++)n[r]=s[o];return n},hn=t.Components.components.editgrid,cn=t.Components.components.nested,dn={New:"new",Editing:"editing",Saved:"saved",Removed:"removed",Draft:"draft"},un={datasource:p,sketchpad:gi,tagpad:Yi,dynamicWizard:function(e){function i(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];var n=e.apply(this,t)||this;return n.type="dynamicWizard",n.isChangingMode=!0,n.isSavingInProgress=!1,n.editRows=[],n.changingRowIndex=null,n.step=0,n.buttonSettings={showPrevious:!0,showNext:!0,showSubmit:!0,showCancel:!n.options.readOnly},n.shouldUpdate=!0,n}return an(i,e),i.schema=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return hn.schema.apply(hn,ln([{type:"dynamicWizard",label:"Dynamic Wizard",key:"dynamicWizard",templates:{header:i.defaultHeaderTemplate,row:i.defaultRowTemplate,footer:""}}],t))},Object.defineProperty(i,"builderInfo",{get:function(){return{title:"Dynamic Wizard",group:"premium",icon:"tasks",ignoreForForm:!0,disableSiblings:!0,weight:20,schema:i.schema()}},enumerable:!1,configurable:!0}),Object.defineProperty(i,"defaultHeaderTemplate",{get:function(){return'<div class="row">\n    <div class="col-sm-2">\n      Users\n    </div>\n  </div>'},enumerable:!1,configurable:!0}),Object.defineProperty(i,"defaultRowTemplate",{get:function(){return'<div class="list-group-item">\n    <div class="list-group-subheader">\n      <div class="row">\n        <div class="col-sm-2">\n          User {{ rowIndex + 1 }}\n        </div>\n        {% if (!ctx.self.options.readOnly && !component.disabled) { %}\n        <div class="col-sm-2">\n          <div class="btn-group pull-right">\n            <button class="btn btn-default btn-light btn-sm editCard"><i class="{{ ctx.iconClass(\'edit\') }}"></i></button>\n            <button class="btn btn-danger btn-sm removeCard"><i class="{{ ctx.iconClass(\'trash\') }}"></i></button>\n          </div>\n        </div>\n        {% } %}\n      </div>\n    </div>\n    {% ctx.util.eachComponent(ctx.components, function(component) { %}\n    {% if ((!component.hasOwnProperty(\'tableView\') || component.tableView) && isVisibleInRow(component)) { %}\n    <div class="row">\n      <div class="col-sm-2">\n        {{ component.key }}\n      </div>\n    </div>\n    <div class="row">\n      <div class="col-sm-2">\n        {{ ctx.getView(component, ctx.row[component.key]) }}\n      </div>\n    </div>\n    {% } %}\n    {% }) %}\n  </div>'},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dynamicWizardKey",{get:function(){return"dynamicWizard-"+this.key},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rowRef",{get:function(){return this.dynamicWizardKey+"-row"},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rowElements",{get:function(){return this.refs[this.rowRef]},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rowRefs",{get:function(){return this.refs["dynamicWizard-"+this.component.key+"-row"]},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"agreeButtonRef",{get:function(){return this.dynamicWizardKey+"-agreeButton"},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"denyButtonRef",{get:function(){return this.dynamicWizardKey+"-denyButton"},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"agreeButtonElements",{get:function(){return this.refs[this.agreeButtonRef]},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"cancelRowRef",{get:function(){return this.dynamicWizardKey+"-cancelRow"},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"cancelRowElements",{get:function(){return this.refs[this.cancelRowRef]},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"inlineEditMode",{get:function(){return this.component.inlineEdit},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"saveEditMode",{get:function(){return!this.inlineEditMode},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rootWizard",{get:function(){var t;return this.findRootWizard(null===(t=this.parent)||void 0===t?void 0:t.parent)||{}},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"hasComponents",{get:function(){return this.component.components.length},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"buttons",{get:function(){var t=this,e={};return[{name:"cancel",method:"cancelRow"},{name:"previous",method:"prevPage"},{name:"next",method:"nextPage"}].forEach((function(i){t.hasButton(i.name)&&(e[i.name]=i)})),e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"defaultSchema",{get:function(){return i.schema()},enumerable:!1,configurable:!0}),i.prototype.init=function(t){return this.prevVisibility=this._visible,this.prevBlocking=this.disabled,this.secondRender=!!t,this.shouldUpdate=!0,this.changingRowIndex=null,this.builderMode&&(this.editRows=[]),e.prototype.init.call(this)},i.prototype.render=function(i){var n,r,s;if(this.builderMode)return e.prototype.render.call(this);var o=this.dataValue||[],a=t.Utils.Evaluator.noeval?on.header:t.Utils._.get(this.component,"templates.header"),l=this.editRows[this.changingRowIndex];0===this.step&&l&&!l.components[this.step]._visible&&this.nextPage();var h=!this.editRows.length&&0===this.step&&0===this.changingRowIndex;return(!this.secondRender&&this.shouldUpdate||h)&&!this.options.readOnly&&(this.secondRender=!0,this.rootWizard.editMode||0===this.root.page&&this.page===this.root.page&&this._parentVisible&&this._visible&&!this._disabled&&this.hasComponents&&(this.shouldUpdate=!1,this.isInitRowExists=!0,this.addRow(!0,h))),(null===(n=this.root)||void 0===n?void 0:n.editMode)&&this.rootWizard.editMode&&this.isInitRowExists&&(this.isInitRowExists=!1,this.cancelRow()),e.prototype.render.call(this,i||this.renderTemplate("dynamicWizard",{ref:{row:this.rowRef,agreeButton:this.agreeButtonRef,denyButton:this.denyButtonRef},header:this.renderString(a),footer:this.renderString(t.Utils._.get(this.component,"templates.footer"),{components:this.component.components,value:o}),rows:this.editRows.map(this.renderRow.bind(this)),currentComponent:-1===this.step?null:null===(s=null===(r=this.editRows[this.changingRowIndex])||void 0===r?void 0:r.components[this.step])||void 0===s?void 0:s.render(),errors:this.editRows.map((function(t){return t.error})),buttons:this.buttons,hasRemoveButtons:this.hasRemoveButtons(),isChangingMode:this.isChangingMode,isDisabled:this._disabled,isBlocking:!this._visible||this._disabled||!this.hasComponents,dynamicWizardKey:this.dynamicWizardKey,readOnly:this.options.readOnly}))},i.prototype.attach=function(t){var i,n=this,r=e.prototype.attach.call(this,t);if(this.builderMode)return e.prototype.attach.call(this,t);if(this.visibilityCheck(),this.blockingCheck(),this.loadRefs(t,((i={})[this.agreeButtonRef]="multiple",i[this.denyButtonRef]="multiple",i[this.rowRef]="multiple",i[this.dynamicWizardKey+"-cancel"]="single",i[this.dynamicWizardKey+"-previous"]="single",i[this.dynamicWizardKey+"-next"]="single",i)),this.agreeButtonElements.forEach((function(t){n.addEventListener(t,"click",(function(){n.addRow(),-1===n.rootWizard.currentNextPage&&n.rootWizard.redraw()}))})),this.attachNav(),this.isChangingMode){var s=this.editRows[this.changingRowIndex];s&&this.attachComponents(this.rowElements[0],s.components,this.component.components,!0)}else this.rowElements.forEach((function(t,e){[{className:"removeCard",event:"click",action:function(){return n.removeRow(e)}},{className:"editCard",event:"click",action:function(){n.editRow(e)}}].forEach((function(e){var i=e.className,r=e.event,s=e.action,o=t.getElementsByClassName(i);Array.prototype.forEach.call(o,(function(t){n.addEventListener(t,r,s)}))}))}));return r},i.prototype.attachNav=function(){var e=this;t.Utils._.each(this.buttons,(function(t){var i=e.refs[e.dynamicWizardKey+"-"+t.name];e.addEventListener(i,"click",(function(i){if(i.preventDefault(),!e[t.method]()||"nextPage"!==t.method){e.redraw();var n=e.editRows[e.changingRowIndex];n&&e.validateRow(n,!1)}}))}))},i.prototype.attachComponents=function(i,n,r,s){var o;if(void 0===r&&(r=this.component.components),this.builderMode)return e.prototype.attachComponents.call(this,i,n,r);if(s){if(n=n||this.component.components,!(i=this.hook("attachComponents",i,n,r,this)))return new t.Formio.Promise((function(){}));var a=0,l=[];return this.isChangingMode?!t.Utils._.isNil(this.step)&&i.children[0]&&!(null===(o=i.children[0])||void 0===o?void 0:o.getAttribute("data-noattach"))&&n[this.step]&&l.push(n[this.step].attach(i.children[0])):Array.prototype.slice.call(i.children).forEach((function(t){!t.getAttribute("data-noattach")&&n[a]&&(l.push(n[a].attach(t)),a++)})),t.Formio.Promise.all(l)}},i.prototype.visibilityCheck=function(){this.page===this.root.page&&(this._visible&&!this.prevVisibility&&(this.prevVisibility=!0,!this.disabled&&this.hasComponents&&this.addRow()),this.prevVisibility&&!this._visible&&(this.prevVisibility=!1))},i.prototype.blockingCheck=function(){this.page===this.root.page&&this.prevBlocking&&!this.disabled&&(this.prevBlocking=!1,this.isChangingMode=!1,this.rootWizard.redraw())},i.prototype.isOpen=function(t){return[dn.New,dn.Editing].includes(null==t?void 0:t.state)},i.prototype.resetValue=function(){cn.prototype.resetValue.call(this),this.emptyRows(),this.step=0,this.addRow(!0,!0)},i.prototype.addRow=function(e,i){if(void 0===e&&(e=!1),void 0===i&&(i=!1),!this.options.readOnly){var n,r={},s=this.editRows.length;return(t.Utils._.isNil(this.changingRowIndex)||i)&&(this.changingRowIndex=this.editRows.length,n={components:this.createRowComponents(r,s),data:r,state:dn.New,backup:null,error:null},this.editRows.push(n),this.inlineEditMode&&(this.dataValue.push(r),this.triggerChange()),this.checkRow("checkData",null,{},n.data,n.components),this.component.modal&&this.addRowModal(s)),this.isChangingMode=!0,this.step=-1!==this.step?this.step:0,this.addChangingMode(e),n||this.editRows[this.changingRowIndex]}},i.prototype.cancelRow=function(){var e=t.Utils._.clone(this.changingRowIndex);if(!this.options.readOnly){var i=this.editRows[e];(null==i?void 0:i.state)===dn.New?this.isSavingInProgress?this.removeRow(e):(i.state=dn.Removed,this.clearErrors(e),this.destroyComponents(e),this.inlineEditMode&&this.splice(e),this.editRows.splice(e,1)):(null==i?void 0:i.state)===dn.Editing&&(i.state=i.prevState,this.inlineEditMode&&(this.dataValue[e]=i.backup),i.data=i.backup,i.backup=null,this.isSavingInProgress&&(this.setValues(i),this.rebuild(!0)),this.restoreRowContext(i),this.component.rowDrafts||this.clearErrors(e)),this.returnPrevPageState(),this.shouldUpdate=!0,this.checkValidity(null,!0),this.redraw(),this.component.rowDrafts&&this.checkValidity(this.data,!1)}},i.prototype.rebuild=function(t){return void 0===t&&(t=!1),this.destroy(),this.init(t),this.visible=this.conditionallyVisible(null,null),this.redraw()},i.prototype.returnPrevPageState=function(){this.isChangingMode=!1,this.isSavingInProgress=!1,this.step=-1,this.changingRowIndex=null,this.removeChangingMode()},i.prototype.setValues=function(t){if(!this.options.readOnly&&this.saveEditMode){var e=this.dataValue||[];if((null==t?void 0:t.state)!==dn.New||this.isSavingInProgress)((null==t?void 0:t.state)===dn.Editing||this.isSavingInProgress)&&(e[this.changingRowIndex]=null==t?void 0:t.data);else{var i=e.length;e.push(null==t?void 0:t.data),this.changingRowIndex!==i&&(this.editRows.splice(this.changingRowIndex,1),this.editRows.splice(this.changingRowIndex,0,t))}}},i.prototype.saveRow=function(t){var e=this,i=this.editRows[this.changingRowIndex];return i&&(this.setValues(i),this.isSavingInProgress&&(this.isSavingInProgress=!1),i.state=this.component.rowDrafts&&!t?dn.Draft:dn.Saved,i.backup=null,this.updateValue(),this.triggerChange(),this.component.rowDrafts&&i.components.forEach((function(t){return t.setPristine(e.pristine)})),this.checkValidity(null,!0),this.redraw(),i.alerts&&(i.alerts=!1),this.isChangingMode=!1,this.changingRowIndex=null,this.shouldUpdate=!0,this.removeChangingMode()),!0},i.prototype.saveCurrentPageData=function(t){(null==t?void 0:t.state)!==dn.New&&(null==t?void 0:t.state)!==dn.Editing||(this.setValues(t),this.checkData(this.data),this.isSavingInProgress||(this.isSavingInProgress=!0))},i.prototype.isRowEditing=function(t){return(null==t?void 0:t.state)===dn.Editing||(null==t?void 0:t.state)===dn.New},i.prototype.switchToStep=function(e){var i=this.getRelativePath(e.path),n=t.Utils.getArrayFromComponentPath(i),r=t.Utils._.findIndex(this.components,(function(t){return t.key===e.component.key})),s=this.editRows[n[0]],o=this.isRowEditing(s);s?o?(this.step=t.Utils._.isFinite(r)?r:0,this.addChangingMode(),this.validateRow(s,!1)):this.editRow(n[0],r):this.addRow()},i.prototype.editRow=function(e,i){var n=this.editRows[e],r=this.isRowEditing(n);if(n&&!r){n.prevState=n.state,n.state=dn.Editing;var s=t.Utils._.cloneDeep(n.data);if(this.inlineEditMode?n.backup=s:(n.backup=n.data,n.data=s,this.restoreRowContext(n)),this.component.modal)return this.addRowModal(e);this.isChangingMode=!0,this.changingRowIndex=e,this.step=t.Utils._.isFinite(i)?i:0,this.addChangingMode(),this.validateRow(n,!1)}},i.prototype.removeRow=function(t){this.options.readOnly||(this.baseRemoveRow(t),this.splice(t),this.editRows.splice(t,1),this.updateRowsComponents(t),this.updateValue(),this.triggerChange(),this.checkValidity(null,!0),this.checkData(),this.redraw())},i.prototype.renderRow=function(e,n){var r=this,s=this.dataValue||[],o=this.flattenComponents(n),a=t.Utils.Evaluator.noeval?on.row:t.Utils._.get(this.component,"templates.row",i.defaultRowTemplate);return this.renderString(a,{row:s[n]||{},data:this.data,rowIndex:n,components:this.component.components,flattenedComponents:o,isVisibleInRow:function(t){return r.isComponentVisibleInRow(t,o)},getView:function(e,i){var n=o[e.key],r=n?n.getView(i||n.dataValue):"";return n&&n.widget&&"--- PROTECTED ---"!==r&&(r=t.Utils._.isArray(r)?r.map((function(t){return n.widget.getValueAsString(t)})):n.widget.getValueAsString(r)),r},state:this.editRows[n].state})},i.prototype.hasButton=function(t,e){void 0===e&&(e=this.getNextPage());var i=this.buttonSettings,n=i.previous,r=void 0===n?this.buttonSettings.showPrevious:n,s=i.cancel,o=void 0===s?this.buttonSettings.showCancel:s,a=i.next,l=void 0===a?this.buttonSettings.showNext:a;switch(t){case"previous":return r&&0!==this.step&&this.hasComponents;case"next":return l&&e&&this.hasComponents;case"cancel":return o&&this.hasComponents;default:return!0}},i.prototype.getNextPage=function(){var t;return this.step<(null===(t=this.component)||void 0===t?void 0:t.components.length)},i.prototype.prevPage=function(){var e,i,n=this.editRows[this.changingRowIndex];if(0!==this.step){var r=t.Utils._.clone(this.step);this.step=r-1,(null===(i=null===(e=null==n?void 0:n.components)||void 0===e?void 0:e[this.step])||void 0===i?void 0:i._visible)?this.saveCurrentPageData(n):this.prevPage()}else this.rootWizard.prevPage()},i.prototype.findRootWizard=function(t){var e,i,n,r=null===(e=null==t?void 0:t.parent)||void 0===e?void 0:e.parent;return(null===(i=null==t?void 0:t.parent)||void 0===i?void 0:i.subForm)&&(r=null==r?void 0:r.parent),r&&"wizard"===(null===(n=null==r?void 0:r._form)||void 0===n?void 0:n.display)?this.findRootWizard(r):t},i.prototype.nextPage=function(){var e,i,n,r,s=this.editRows[this.changingRowIndex],o=this.validateRow(s,!0);if(!this.component.rowDrafts&&!o)return!0;if(this.step===(null===(i=null===(e=this.component)||void 0===e?void 0:e.components)||void 0===i?void 0:i.length)-1)return this.step=-1,this.saveRow(o),-1===this.rootWizard.currentNextPage&&this.rootWizard.redraw(),!1;var a=t.Utils._.clone(this.step);this.step=a+1,(null===(r=null===(n=null==s?void 0:s.components)||void 0===n?void 0:n[this.step])||void 0===r?void 0:r._visible)?this.saveCurrentPageData(s):this.nextPage()},i.prototype.validateStep=function(t,e,i,n){var r=e,s=!(!t.serverErrors||!t.serverErrors.length);return this.component.rowDrafts||s||t.setPristine(!i),r&&t.checkValidity(null,i,n)},i.prototype.validateRow=function(t,e){var i=this,n=!0;if(!t)return n;var r=ln(this.errors);if(t.state===dn.Editing||e||t.state===dn.Draft&&!this.pristine&&!this.root.pristine){var s=t.components[this.step];s?n=this.validateStep(s,n,e,t.data):-1===this.step&&t.components.forEach((function(r){n=i.validateStep(r,n,e,t.data)}))}return this.component.validate&&this.component.validate.row&&("true"!==(n=this.evaluate(this.component.validate.row,{valid:n,row:t.data},"valid",!0)).toString()?(t.error=n,n=!1):t.error=null,null===n&&(n="Invalid row validation for "+this.key)),t.errors=n?null:this.errors.filter((function(t){return!r.includes(t)})),this.showRowErrorAlerts(t,!!n),!!n},i.prototype.findSourceRoot=function(t){return(null==t?void 0:t.parent)?this.findSourceRoot(null==t?void 0:t.root):t},i.prototype.changeState=function(t){var e=this.root?this.findSourceRoot(this.root):{};t&&!e.submissionInProcess?this.rebuild():this.redraw()},i.prototype.addChangingMode=function(t){void 0===t&&(t=!1),this.rootWizard.element&&(this.rootWizard.element.classList.contains("dynamicWizard-changingMode")||this.rootWizard.element.classList.add("dynamicWizard-changingMode"),t||(this.redraw(),this.rootWizard.redraw()),this.triggerChange())},i.prototype.removeChangingMode=function(){var t;(null===(t=this.rootWizard)||void 0===t?void 0:t.element)&&(this.rootWizard.element.classList.remove("dynamicWizard-changingMode"),this.redraw(),this.rootWizard.redraw(),this.triggerChange())},i.editForm=en,i}(hn)},fn={trim:function(e){return t.Utils._.trim(e,"/")},path:function(t){return t.filter((function(t){return!!t})).map(this.trim).join("/")},upload:function(e,i,n,r,s,o,a,l,h){return new t.Formio.Promise((function(t,c){var d=new XMLHttpRequest;d.onerror=function(t){t.networkError=!0,c(t)},d.onabort=c,d.onload=function(){if(d.status>=200&&d.status<300){var e=JSON.parse(d.response),i=new XMLHttpRequest;"function"==typeof a&&(i.upload.onprogress=a),i.onerror=function(t){t.networkError=!0,c(t)},i.onabort=function(t){t.networkError=!0,c(t)},i.onload=function(){i.status>=200&&i.status<300?t(e):c(i.response||"Unable to upload file")},i.onabort=c,i.send(n(i,e))}else c(d.response||"Unable to sign file")},d.open("POST",e.formUrl+"/storage/"+i),d.setRequestHeader("Accept","application/json"),d.setRequestHeader("Content-Type","application/json; charset=UTF-8");var u=e.getToken();u&&d.setRequestHeader("x-jwt-token",u),d.send(JSON.stringify({name:fn.path([o,s]),size:r.size,type:r.type,groupPermissions:l,groupId:h}))}))}},pn=fn,gn=function(){function t(t){this.formio=t}return t.prototype.uploadFile=function(t,e,i,n,r,s,o,a,l){return pn.upload(this.formio,"azure",(function(e,i){return e.open("PUT",i.url),e.setRequestHeader("Content-Type",t.type),e.setRequestHeader("x-ms-blob-type","BlockBlob"),t}),t,e,i,n,a,l).then((function(){return{storage:"azure",name:pn.path([i,e]),size:t.size,type:t.type,groupPermissions:a,groupId:l}}))},t.prototype.downloadFile=function(t){return this.formio.makeRequest("file",this.formio.formUrl+"/storage/azure?name="+pn.trim(t.name),"GET")},t.title="Azure File Services",t}(),mn=function(){function e(t){this.formio=t}return e.prototype.uploadFile=function(e,i,n,r,s,o,a,l,h){var c=this;return new t.Formio.Promise((function(t,s){var o=new XMLHttpRequest;"function"==typeof r&&(o.upload.onprogress=r);var a=new FormData;a.append("name",i),a.append("dir",n),a.append("file",e),o.onerror=function(t){t.networkError=!0,s(t)},o.onload=function(){if(o.status>=200&&o.status<300){var i=JSON.parse(o.response);i.storage="dropbox",i.size=e.size,i.type=e.type,i.groupId=h,i.groupPermissions=l,i.url=i.path_lower,t(i)}else s(o.response||"Unable to upload file")},o.onabort=s,o.open("POST",c.formio.formUrl+"/storage/dropbox");var d=c.formio.getToken();d&&o.setRequestHeader("x-jwt-token",d),o.send(a)}))},e.prototype.downloadFile=function(e){var i=this.formio.getToken();return e.url=this.formio.formUrl+"/storage/dropbox?path_lower="+e.path_lower+(i?"&x-jwt-token="+i:""),t.Formio.Promise.resolve(e)},e.title="Dropbox",e}(),vn=new Uint8Array(16);function yn(){if(!nn&&!(nn="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return nn(vn)}for(var _n=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,bn=function(t){return"string"==typeof t&&_n.test(t)},wn=[],xn=0;xn<256;++xn)wn.push((xn+256).toString(16).substr(1));var kn=function(t,e,i){var n=(t=t||{}).random||(t.rng||yn)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,e){i=i||0;for(var r=0;r<16;++r)e[i+r]=n[r];return e}return function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=(wn[t[e+0]]+wn[t[e+1]]+wn[t[e+2]]+wn[t[e+3]]+"-"+wn[t[e+4]]+wn[t[e+5]]+"-"+wn[t[e+6]]+wn[t[e+7]]+"-"+wn[t[e+8]]+wn[t[e+9]]+"-"+wn[t[e+10]]+wn[t[e+11]]+wn[t[e+12]]+wn[t[e+13]]+wn[t[e+14]]+wn[t[e+15]]).toLowerCase();if(!bn(i))throw TypeError("Stringified UUID is invalid");return i}(n)},Sn={storage:{azure:gn,dropbox:mn,indexeddb:function(){function e(t){this.formio=t}return e.prototype.uploadFile=function(e,i,n,r,s,o){var a=this;if("indexedDB"in window)return new t.Formio.Promise((function(t){var e=indexedDB.open(o.indexeddb,3);e.onsuccess=function(e){var i=e.target.result;t(i)},e.onupgradeneeded=function(t){t.target.result.createObjectStore(o.indexeddbTable)}})).then((function(i){var n=new FileReader;return new t.Formio.Promise((function(t,r){n.onload=function(){var n=new Blob([e],{type:e.type}),r=kn(n),a={id:r,data:n,name:e.name,size:e.size,type:e.type,url:s},l=i.transaction([o.indexeddbTable],"readwrite");l.objectStore(o.indexeddbTable).put(a,r).onerror=function(t){console.log("error storing data"),console.error(t)},l.oncomplete=function(){t({storage:"indexeddb",name:e.name,size:e.size,type:e.type,url:s,id:r})}},n.onerror=function(){return r(a)},n.readAsDataURL(e)}))}));console.log("This browser doesn't support IndexedDB")},e.prototype.downloadFile=function(e,i){var n=this;return new t.Formio.Promise((function(t){indexedDB.open(i.indexeddb,3).onsuccess=function(e){var i=e.target.result;t(i)}})).then((function(r){return new t.Formio.Promise((function(t,s){var o=r.transaction([i.indexeddbTable],"readonly"),a=o.objectStore(i.indexeddbTable).get(e.id);a.onsuccess=function(){o.oncomplete=function(){var i=a.result,r=new File([a.result.data],e.name,{type:a.result.type}),o=new FileReader;o.onload=function(e){i.url=e.target.result,t(i)},o.onerror=function(){return s(n)},o.readAsDataURL(r)}},a.onerror=function(){return s(n)}}))}))},e.title="IndexedDB",e}(),s3:function(){function e(t){this.formio=t}return e.prototype.uploadFile=function(t,e,i,n,r,s,o,a,l){return pn.upload(this.formio,"s3",(function(n,r){if(r.data.fileName=e,r.data.key=pn.path([r.data.key,i,e]),r.signed)return n.open("PUT",r.signed),n.setRequestHeader("Content-Type",t.type),t;for(var s=new FormData,o=0,a=Object.keys(r.data);o<a.length;o++){var l=a[o];s.append(l,r.data[l])}return s.append("file",t),n.open("POST",r.url),s}),t,e,i,n,a,l).then((function(i){return{storage:"s3",name:e,bucket:i.bucket,key:i.data.key,url:pn.path([i.url,i.data.key]),acl:i.data.acl,size:t.size,type:t.type}}))},e.prototype.downloadFile=function(e){return"public-read"!==e.acl?this.formio.makeRequest("file",this.formio.formUrl+"/storage/s3?bucket="+pn.trim(e.bucket)+"&key="+pn.trim(e.key),"GET"):t.Formio.Promise.resolve(e)},e.title="AWS S3",e}()}},Rn={form:n(175).Z},Cn={form:n(352).Z},On={form:n(353).Z},Mn=n(656),En=n(970),An={form:Mn.Z,html:En.Z},Tn=n(752),Pn=n(66),Fn={sketchpad:Rn,tagpad:Cn,codereader:On,dynamicWizard:An,datatable:{form:Tn.Z,html:Pn.Z}},zn={form:n(5).Z},In={form:n(432).Z},jn={form:n(333).Z},Dn=n(290),Ln=n(469),Bn={form:Dn.Z,html:Ln.Z},Vn=n(209),Wn=n(339),Nn={bootstrap:Fn,bootstrap3:{tagpad:zn,sketchpad:In,codereader:jn,dynamicWizard:Bn,datatable:{form:Vn.Z,html:Wn.Z}},semantic:{}},Un=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Hn={components:un,providers:Sn,templates:Nn,displays:{wizard:function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return Un(i,e),i.prototype.emitWizardPageSelected=function(t){this.setChangingMode(),this.emit("wizardPageSelected",this.pages[t],t)},i.prototype.emitNextPage=function(){this.setChangingMode(),this.emit("nextPage",{page:this.page,submission:this.submission})},i.prototype.emitPrevPage=function(){this.setChangingMode(),this.emit("prevPage",{page:this.page,submission:this.submission})},i.prototype.focusOnComponent=function(t){var i=e.prototype.focusOnComponent.call(this,t),n=this.hasDynamicWizard();if(n){var r=this.getComponent(t);n.switchToStep(r)}return i},i.prototype.hasButton=function(e,i){void 0===i&&(i=this.getNextPage());var n=t.Utils._.get(this.currentPage,"component.buttonSettings",{}),r=n.previous,s=void 0===r?this.options.buttonSettings.showPrevious:r,o=n.cancel,a=void 0===o?this.options.buttonSettings.showCancel:o,l=n.submit,h=void 0===l?this.options.buttonSettings.showSubmit:l,c=n.next,d=void 0===c?this.options.buttonSettings.showNext:c,u=this.hasDynamicWizard(),f=!(null==u?void 0:u.isChangingMode)||!u.hasComponents,p=f||this.options.readOnly;switch(e){case"previous":return s&&this.getPreviousPage()>-1&&p;case"next":return d&&null!==i&&-1!==i&&p;case"cancel":return a&&!this.options.readOnly&&p;case"submit":return h&&!this.options.readOnly&&(null===i||this.page===this.pages.length-1)&&f;default:return!0}},i.prototype.setEditMode=function(t){if(!this.editMode&&t._id&&!this.options.readOnly){this.editMode=!0;var e=this.hasDynamicWizard();e&&(e.shouldUpdate=!1,e.isChangingMode=!1),this.redraw()}},i.prototype.setChangingMode=function(){if(!this.options.readOnly){var t=this.hasDynamicWizard();t&&!this.editMode&&t.hasComponents?(t.shouldUpdate&&(t.addRow(),t.shouldUpdate=!1,t.secondRender=!0),this.element&&!this.element.classList.contains("dynamicWizard-changingMode")&&(this.element.classList.add("dynamicWizard-changingMode"),this.redraw())):this.element&&((null==t?void 0:t.isChangingMode)&&t.hasComponents&&(t.isChangingMode=!1,this.redraw()),this.element.classList.contains("dynamicWizard-changingMode")&&this.element.classList.remove("dynamicWizard-changingMode"))}},i.prototype.hasDynamicWizard=function(){var t;return null===(t=this.currentPage)||void 0===t?void 0:t.components.find((function(t){return"dynamicWizard"===t.component.type&&t._parentVisible&&t._visible&&!t._disabled}))},i.prototype.updatePages=function(){this.pages=this.allPages;var t=this.hasDynamicWizard();this.element&&this.element.classList.contains("dynamicWizard-changingMode")&&!t&&this.element.classList.remove("dynamicWizard-changingMode")},i}(t.Displays.displays.wizard)}}}(),r.default}()}));